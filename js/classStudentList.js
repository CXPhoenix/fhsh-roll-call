/*! For license information please see classStudentList.js.LICENSE.txt */
(()=>{var t={669:(t,e,n)=>{t.exports=n(609)},448:(t,e,n)=>{"use strict";var r=n(867),i=n(26),o=n(372),a=n(327),s=n(97),u=n(109),c=n(985),h=n(61);t.exports=function(t){return new Promise((function(e,n){var l=t.data,f=t.headers;r.isFormData(l)&&delete f["Content-Type"];var d=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";f.Authorization="Basic "+btoa(p+":"+v)}var m=s(t.baseURL,t.url);if(d.open(t.method.toUpperCase(),a(m,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in d?u(d.getAllResponseHeaders()):null,o={data:t.responseType&&"text"!==t.responseType?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:r,config:t,request:d};i(e,n,o),d=null}},d.onabort=function(){d&&(n(h("Request aborted",t,"ECONNABORTED",d)),d=null)},d.onerror=function(){n(h("Network Error",t,null,d)),d=null},d.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(h(e,t,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var y=(t.withCredentials||c(m))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;y&&(f[t.xsrfHeaderName]=y)}if("setRequestHeader"in d&&r.forEach(f,(function(t,e){void 0===l&&"content-type"===e.toLowerCase()?delete f[e]:d.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),t.responseType)try{d.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&d.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){d&&(d.abort(),n(t),d=null)})),l||(l=null),d.send(l)}))}},609:(t,e,n)=>{"use strict";var r=n(867),i=n(849),o=n(321),a=n(185);function s(t){var e=new o(t),n=i(o.prototype.request,e);return r.extend(n,o.prototype,e),r.extend(n,e),n}var u=s(n(655));u.Axios=o,u.create=function(t){return s(a(u.defaults,t))},u.Cancel=n(263),u.CancelToken=n(972),u.isCancel=n(502),u.all=function(t){return Promise.all(t)},u.spread=n(713),u.isAxiosError=n(268),t.exports=u,t.exports.default=u},263:t=>{"use strict";function e(t){this.message=t}e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,t.exports=e},972:(t,e,n)=>{"use strict";var r=n(263);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},502:t=>{"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},321:(t,e,n)=>{"use strict";var r=n(867),i=n(327),o=n(782),a=n(572),s=n(185);function u(t){this.defaults=t,this.interceptors={request:new o,response:new o}}u.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},u.prototype.getUri=function(t){return t=s(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(t){u.prototype[t]=function(e,n){return this.request(s(n||{},{method:t,url:e,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(t){u.prototype[t]=function(e,n,r){return this.request(s(r||{},{method:t,url:e,data:n}))}})),t.exports=u},782:(t,e,n)=>{"use strict";var r=n(867);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},97:(t,e,n)=>{"use strict";var r=n(793),i=n(303);t.exports=function(t,e){return t&&!r(e)?i(t,e):e}},61:(t,e,n)=>{"use strict";var r=n(481);t.exports=function(t,e,n,i,o){var a=new Error(t);return r(a,e,n,i,o)}},572:(t,e,n)=>{"use strict";var r=n(867),i=n(527),o=n(502),a=n(655);function s(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return s(t),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||a.adapter)(t).then((function(e){return s(t),e.data=i(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(s(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},481:t=>{"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},185:(t,e,n)=>{"use strict";var r=n(867);t.exports=function(t,e){e=e||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function u(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function c(i){r.isUndefined(e[i])?r.isUndefined(t[i])||(n[i]=u(void 0,t[i])):n[i]=u(t[i],e[i])}r.forEach(i,(function(t){r.isUndefined(e[t])||(n[t]=u(void 0,e[t]))})),r.forEach(o,c),r.forEach(a,(function(i){r.isUndefined(e[i])?r.isUndefined(t[i])||(n[i]=u(void 0,t[i])):n[i]=u(void 0,e[i])})),r.forEach(s,(function(r){r in e?n[r]=u(t[r],e[r]):r in t&&(n[r]=u(void 0,t[r]))}));var h=i.concat(o).concat(a).concat(s),l=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===h.indexOf(t)}));return r.forEach(l,c),n}},26:(t,e,n)=>{"use strict";var r=n(61);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},527:(t,e,n)=>{"use strict";var r=n(867);t.exports=function(t,e,n){return r.forEach(n,(function(n){t=n(t,e)})),t}},655:(t,e,n)=>{"use strict";var r=n(867),i=n(16),o={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s,u={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(s=n(448)),s),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){u.headers[t]=r.merge(o)})),t.exports=u},849:t=>{"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},327:(t,e,n)=>{"use strict";var r=n(867);function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var a=[];r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),a.push(i(e)+"="+i(t))})))})),o=a.join("&")}if(o){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},303:t=>{"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},372:(t,e,n)=>{"use strict";var r=n(867);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},793:t=>{"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},268:t=>{"use strict";t.exports=function(t){return"object"==typeof t&&!0===t.isAxiosError}},985:(t,e,n)=>{"use strict";var r=n(867);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},16:(t,e,n)=>{"use strict";var r=n(867);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},109:(t,e,n)=>{"use strict";var r=n(867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,a={};return t?(r.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(a[e]&&i.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}})),a):a}},713:t=>{"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},867:(t,e,n)=>{"use strict";var r=n(849),i=Object.prototype.toString;function o(t){return"[object Array]"===i.call(t)}function a(t){return void 0===t}function s(t){return null!==t&&"object"==typeof t}function u(t){if("[object Object]"!==i.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function c(t){return"[object Function]"===i.call(t)}function h(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),o(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:function(t){return null!==t&&!a(t)&&null!==t.constructor&&!a(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isPlainObject:u,isUndefined:a,isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:c,isStream:function(t){return s(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:h,merge:function t(){var e={};function n(n,r){u(e[r])&&u(n)?e[r]=t(e[r],n):u(n)?e[r]=t({},n):o(n)?e[r]=n.slice():e[r]=n}for(var r=0,i=arguments.length;r<i;r++)h(arguments[r],n);return e},extend:function(t,e,n){return h(e,(function(e,i){t[i]=n&&"function"==typeof e?r(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t={apiKey:"AIzaSyAyqMZQPC7G6XbukqxrHZoERhDj_r4EDSQ",authDomain:"rollcall-c365a.firebaseapp.com",projectId:"rollcall-c365a",storageBucket:"rollcall-c365a.appspot.com",messagingSenderId:"727999114140",appId:"1:727999114140:web:0a9a7914247ea548def659",measurementId:"G-MFJCXN5MKX"};var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,n)};function r(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function o(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function s(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function c(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create,Object.create;var h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[h],n[l],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var h=a<<4&240|s>>2;if(r.push(h),64!==u){var l=s<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=l(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}var v=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,m.prototype.create),o}return r(e,t),e}(Error),m=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?y(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new v(i,s,r);return u},t}();function y(t,e){return t.replace(g,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var g=/\{\$([^}]+)}/g;function b(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function w(t,e){var n=new I(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=h^u&(c^h),a=1518500249):(o=u^c^h,a=1859775393):r<60?(o=u&c|h&(u|c),a=2400959708):(o=u^c^h,a=3395469782),i=(s<<5|s>>>27)+o+l+a+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var I=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=E),void 0===r.error&&(r.error=E),void 0===r.complete&&(r.complete=E);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function E(){}function T(t){return t&&t._delegate?t._delegate:t}var S,_=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),A="[DEFAULT]",N=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=A);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new f;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=i({identifier:A,optional:!1},t),n=e.identifier,r=e.optional,o=this.normalizeInstanceIdentifier(n);if(!this.isInitialized(o)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:o})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:A})}catch(t){}try{for(var r=s(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=u(i.value,2),a=o[0],c=o[1],h=this.normalizeInstanceIdentifier(a);try{var l=this.getOrInitializeService({instanceIdentifier:h});c.resolve(l)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=A),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return o(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(c(c([],u(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),u(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=A),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.instanceIdentifier,i=void 0===r?A:r,o=t.options,a=void 0===o?{}:o,c=this.normalizeInstanceIdentifier(i);if(this.isInitialized(c))throw Error(this.name+"("+c+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var h=this.getOrInitializeService({instanceIdentifier:c,options:a});try{for(var l=s(this.instancesDeferred.entries()),f=l.next();!f.done;f=l.next()){var d=u(f.value,2),p=d[0],v=d[1];c===this.normalizeInstanceIdentifier(p)&&v.resolve(h)}}catch(t){e={error:t}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(h,c),h},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r;try{for(var i=s(this.onInitCallbacks),o=i.next();!o.done;o=i.next()){var a=o.value;try{a(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===A?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:A:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),k=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new N(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();function D(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var C,O=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(C||(C={}));var R,x={debug:C.DEBUG,verbose:C.VERBOSE,info:C.INFO,warn:C.WARN,error:C.ERROR,silent:C.SILENT},P=C.INFO,L=((S={})[C.DEBUG]="log",S[C.VERBOSE]="log",S[C.INFO]="info",S[C.WARN]="warn",S[C.ERROR]="error",S),M=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=L[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,D(["["+i+"]  "+t.name+":"],n))}},F=function(){function t(t){this.name=t,this._logLevel=P,this._logHandler=M,this._userLogHandler=null,O.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in C))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?x[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,D([this,C.DEBUG],t)),this._logHandler.apply(this,D([this,C.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,D([this,C.VERBOSE],t)),this._logHandler.apply(this,D([this,C.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,D([this,C.INFO],t)),this._logHandler.apply(this,D([this,C.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,D([this,C.WARN],t)),this._logHandler.apply(this,D([this,C.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,D([this,C.ERROR],t)),this._logHandler.apply(this,D([this,C.ERROR],t))},t}();function U(t){O.forEach((function(e){e.setLogLevel(t)}))}var V,j=((R={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",R["bad-app-name"]="Illegal App name: '{$appName}",R["duplicate-app"]="Firebase App named '{$appName}' already exists",R["app-deleted"]="Firebase App named '{$appName}' already deleted",R["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",R["invalid-log-argument"]="First argument to `onLog` must be null or a function.",R),q=new m("app","Firebase",j),B="@firebase/app",K="[DEFAULT]",G=((V={})[B]="fire-core",V["@firebase/analytics"]="fire-analytics",V["@firebase/app-check"]="fire-app-check",V["@firebase/auth"]="fire-auth",V["@firebase/database"]="fire-rtdb",V["@firebase/functions"]="fire-fn",V["@firebase/installations"]="fire-iid",V["@firebase/messaging"]="fire-fcm",V["@firebase/performance"]="fire-perf",V["@firebase/remote-config"]="fire-rc",V["@firebase/storage"]="fire-gcs",V["@firebase/firestore"]="fire-fst",V["fire-js"]="fire-js",V["firebase-wrapper"]="fire-js-all",V),H=new F("@firebase/app"),z=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=l(void 0,t),this.container=new k(e.name),this._addComponent(new _("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=K),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=K),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){H.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw q.create("app-deleted",{appName:this.name_})},t}();z.prototype.name&&z.prototype.options||z.prototype.delete||console.log("dc");var W=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=K);var a=o.name;if("string"!=typeof a||!a)throw q.create("bad-app-name",{appName:String(a)});if(b(e,a))throw q.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=G[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void H.warn(u.join(" "))}o(new _(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:U,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw q.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=x[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:C[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=O;r<i.length;r++)n(i[r])}(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!b(e,t=t||K))throw q.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return H.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw q.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&l(s,o.serviceProps),r[a]=s,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(z);return e.INTERNAL=i(i({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){l(e,t)},createSubscribe:w,ErrorFactory:m,deepExtend:l}),e}(),Q=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if("object"==typeof self&&self.self===self&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var X=self.firebase.SDK_VERSION;X&&X.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Y=W.initializeApp;W.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return p()&&H.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Y.apply(void 0,t)};var J=W;!function(t,e){t.INTERNAL.registerComponent(new _("platform-logger",(function(t){return new Q(t)}),"PRIVATE")),t.registerVersion(B,"0.6.22",void 0),t.registerVersion("fire-js","")}(J);const $=J;$.registerVersion("firebase","8.6.2","app"),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,n){if(n){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(n=n(o=i[t=t[t.length-1]]))!=o&&null!=n&&e(i,t,{configurable:!0,writable:!0,value:n})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=r.setTimeout;n.prototype.c=function(t){a(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),a=r.next();!a.done;a=r.next())i(a.value).Qa(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Qa(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var a=a||{},s=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function l(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==f(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++g)}var y="closure_uid_"+(1e9*Math.random()>>>0),g=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function S(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function _(t){return t}function A(t,e,n){this.code=D+t,this.message=e||C[t]||"",this.a=n||null}function N(t){var e=t&&t.code;return e?new A(e.substring(D.length),t.message,t.serverResponse):null}S(A,Error),A.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.w()};var k,D="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},O={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function R(t){for(var e in O)if(O[e].id===t)return{firebaseEndpoint:(t=O[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function P(t){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function M(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function U(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function V(){this.b=this.a=null}k=R("__EID__")?"__EID__":void 0,S(P,Error),P.prototype.name="CustomError",S(L,P),L.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var j=new F((function(){return new B}),(function(t){t.reset()}));function q(){var t=we,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}V.prototype.add=function(t,e){var n=j.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var K=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},G=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=K(t,e)}function X(t,e){var n;return(n=0<=(e=K(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function J(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,at=/'/g,st=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ht(t,e){return t<e?-1:t>e?1:0}t:{var lt=s.navigator;if(lt){var ft=lt.userAgent;if(ft){tt=ft;break t}}tt=""}function dt(t){return ct(tt,t)}function pt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function mt(t){var e,n={};for(e in t)n[e]=t[e];return n}var yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<yt.length;o++)n=yt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function wt(t,e){this.a=t===St&&e||"",this.b=Tt}function It(t){return t instanceof wt&&t.constructor===wt&&t.b===Tt?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}wt.prototype.sa=!0,wt.prototype.ra=function(){return this.a},wt.prototype.toString=function(){return"Const{"+this.a+"}"};var Et,Tt={},St={};function _t(){if(void 0===Et){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:_,createScript:_,createScriptURL:_})}catch(t){s.console&&s.console.error(t.message)}Et=t}else Et=t}return Et}function At(t,e){this.a=e===Ot?t:""}function Nt(t){return t instanceof At&&t.constructor===At?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function kt(t,e){var n=It(t);if(!Ct.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=_t();return new At(t=e?e.createScriptURL(t):t,Ot)}(t=n.replace(Dt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof wt?It(t):encodeURIComponent(String(t))})))}At.prototype.sa=!0,At.prototype.ra=function(){return this.a.toString()},At.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Dt=/%{(\w+)}/g,Ct=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ot={};function Rt(t,e){this.a=e===Vt?t:""}function xt(t){return t instanceof Rt&&t.constructor===Rt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Rt.prototype.sa=!0,Rt.prototype.ra=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Pt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Lt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Mt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){if(t instanceof Rt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t))t=new Rt(t,Vt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Lt);t=e&&Pt.test(e[1])?new Rt(t,Vt):null}return t}function Ut(t){return t instanceof Rt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Mt.test(t)||(t="about:invalid#zClosurez"),new Rt(t,Vt))}var Vt={},jt=new Rt("about:invalid#zClosurez",Vt);function qt(t,e,n){this.a=n===Bt?t:""}qt.prototype.sa=!0,qt.prototype.ra=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Bt={};function Kt(t,e,n,r){return t=t instanceof Rt?t:Ut(t),e=e||s,n=n instanceof wt?It(n):n||"",e.open(xt(t),n,r,void 0)}function Gt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ht(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(at,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function zt(t){return zt[" "](t),t}zt[" "]=l;var Wt,Qt,Xt=dt("Opera"),Yt=dt("Trident")||dt("MSIE"),Jt=dt("Edge"),$t=Jt||Yt,Zt=dt("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!dt("Edge"))&&!(dt("Trident")||dt("MSIE"))&&!dt("Edge"),te=ct(tt.toLowerCase(),"webkit")&&!dt("Edge");function ee(){var t=s.document;return t?t.documentMode:void 0}t:{var ne="",re=(Qt=tt,Zt?/rv:([^\);]+)(\)|;)/.exec(Qt):Jt?/Edge\/([\d\.]+)/.exec(Qt):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Qt):te?/WebKit\/(\S+)/.exec(Qt):Xt?/(?:Version)[ \/]?(\S+)/.exec(Qt):void 0);if(re&&(ne=re?re[1]:""),Yt){var ie=ee();if(null!=ie&&ie>parseFloat(ne)){Wt=String(ie);break t}}Wt=ne}var oe,ae={};function se(t){return function(t,e){var n=ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=et(String(Wt)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ht(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ht(0==a[2].length,0==s[2].length)||ht(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}s.document&&Yt?oe=ee()||parseInt(Wt,10)||void 0:oe=void 0;var ue=oe;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Qt){}var ce=!Yt||9<=Number(ue);function he(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function le(t,e){pt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:pe.hasOwnProperty(n)?t.setAttribute(pe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var fe,de,pe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){a="function"==typeof o.item;break t}}a=!1}G(a?Z(o):o,r)}}}function me(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ye(t){s.setTimeout((function(){throw t}),0)}function ge(t,e){de||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);de=function(){t.then(Ie)}}else de=function(){var t=Ie;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!dt("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(fe||(fe=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!dt("Presto")&&(t=function(){var t=me(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!dt("Trident")&&!dt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),fe(t)):s.setImmediate(t)}}(),be||(de(),be=!0),we.add(t,e)}var be=!1,we=new V;function Ie(){for(var t;t=q();){try{t.a.call(t.b)}catch(t){ye(t)}U(j,t)}be=!1}function Ee(t,e){if(this.a=Te,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Me(n,Se,t)}),(function(t){if(!(t instanceof Ke))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Me(n,_e,t)}))}catch(t){Me(this,_e,t)}}var Te=0,Se=2,_e=3;function Ae(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ae.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ne=new F((function(){return new Ae}),(function(t){t.reset()}));function ke(t,e,n){var r=Ne.get();return r.g=t,r.b=e,r.f=n,r}function De(t){if(t instanceof Ee)return t;var e=new Ee(l);return Me(e,Se,t),e}function Ce(t){return new Ee((function(e,n){n(t)}))}function Oe(t,e,n){Fe(t,e,n,null)||ge(E(e,t))}function Re(t){return new Ee((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Oe(t[o],E(i,o,!0),E(i,o,!1));else e(r)}))}function xe(t,e){if(t.a==Te)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Te&&1==r?xe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ve(n),je(n,i,_e,e)))}t.c=null}else Me(t,_e,e)}function Pe(t,e){t.b||t.a!=Se&&t.a!=_e||Ue(t),t.f?t.f.next=e:t.b=e,t.f=e}function Le(t,e,n,r){var i=ke(null,null,null);return i.a=new Ee((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ke?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Pe(t,i),i.a}function Me(t,e,n){t.a==Te&&(t===n&&(e=_e,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Fe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ue(t),e!=_e||n instanceof Ke||function(t,e){t.g=!0,ge((function(){t.g&&Be.call(null,e)}))}(t,n)))}function Fe(t,e,n,r){if(t instanceof Ee)return Pe(t,ke(e||l,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Ue(t){t.h||(t.h=!0,ge(t.gc,t))}function Ve(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function je(t,e,n,r){if(n==_e&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,qe(e,n,r);else try{e.c?e.g.call(e.f):qe(e,n,r)}catch(t){Be.call(null,t)}U(Ne,e)}function qe(t,e,n){e==Se?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ee.prototype.then=function(t,e,n){return Le(this,p(t)?t:null,p(e)?e:null,n)},Ee.prototype.$goog_Thenable=!0,(t=Ee.prototype).oa=function(t,e){return(t=ke(t,t,e)).c=!0,Pe(this,t),this},t.o=function(t,e){return Le(this,null,t,e)},t.cancel=function(t){if(this.a==Te){var e=new Ke(t);ge((function(){xe(this,e)}),this)}},t.$c=function(t){this.a=Te,Me(this,Se,t)},t.ad=function(t){this.a=Te,Me(this,_e,t)},t.gc=function(){for(var t;t=Ve(this);)je(this,t,this.a,this.i);this.h=!1};var Be=ye;function Ke(t){P.call(this,t)}function Ge(){0!=He&&(ze[m(this)]=this),this.xa=this.xa,this.pa=this.pa}S(Ke,P),Ke.prototype.name="cancel";var He=0,ze={};function We(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=He)){var e=m(t);if(0!=He&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ze[e]}}Ge.prototype.xa=!1,Ge.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Qe=Object.freeze||function(t){return t},Xe=!Yt||9<=Number(ue),Ye=Yt&&!se("9"),Je=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(t){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{zt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},S(Ze,$e);var tn=Qe({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ye)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ze.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++nn,this.va=this.Pa=!1}function on(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function an(t){this.src=t,this.a={},this.b=0}function sn(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}an.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=un(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new rn(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),hn={};function ln(t,e,n,r,i){if(r&&r.once)dn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=En(n),t&&t[en]?Sn(t,e,n,v(r)?!!r.capture:!!r,i):fn(t,e,n,!1,r,i)}function fn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=wn(t);if(s||(t[cn]=s=new an(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=bn,e=Xe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Je||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else n=En(n),t&&t[en]?_n(t,e,n,v(r)?!!r.capture:!!r,i):fn(t,e,n,!0,r,i)}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=En(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=wn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[en])sn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wn(e))?(sn(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function mn(t){return t in hn?hn[t]:hn[t]="on"+t}function yn(t,e,n,r){var i=!0;if((t=wn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=gn(o,r),i=i&&!1!==o)}return i}function gn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&vn(t),n.call(r,e)}function bn(t,e){if(t.va)return!0;if(!Xe){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=yn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=yn(r[i],t,!1,e),n=n&&o}return n}return gn(t,new Ze(e,this))}function wn(t){return(t=t[cn])instanceof an?t:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(t){return p(t)?t:(t[In]||(t[In]=function(e){return t.handleEvent(e)}),t[In])}function Tn(){Ge.call(this),this.v=new an(this),this.ac=this,this.gb=null}function Sn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function _n(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function An(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&sn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Nn(t,e,n){if(p(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function kn(t){var e=null;return new Ee((function(n,r){-1==(e=Nn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Dn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Cn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function On(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof On)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Rn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}S(Tn,Ge),Tn.prototype[en]=!0,Tn.prototype.addEventListener=function(t,e,n,r){ln(this,t,e,n,r)},Tn.prototype.removeEventListener=function(t,e,n,r){pn(this,t,e,n,r)},Tn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;gt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=An(a,r,!0,t)&&i}if(i=An(a=t.b=n,r,!0,t)&&i,i=An(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=An(a=t.b=e[o],r,!1,t)&&i;return i},Tn.prototype.Da=function(){if(Tn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=On.prototype).W=function(){Rn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Rn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return xn(this.b,t)?this.b[t]:e},t.set=function(t,e){xn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ln(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Ln?(this.i=void 0!==e?e:t.i,Mn(this,t.c),this.l=t.l,this.a=t.a,Fn(this,t.g),this.f=t.f,Un(this,rr(t.b)),this.h=t.h):t&&(n=String(t).match(Pn))?(this.i=!!e,Mn(this,n[1]||"",!0),this.l=Kn(n[2]||""),this.a=Kn(n[3]||"",!0),Fn(this,n[4]),this.f=Kn(n[5]||"",!0),Un(this,n[6]||"",!0),this.h=Kn(n[7]||"")):(this.i=!!e,this.b=new Jn(null,this.i))}function Mn(t,e,n){t.c=n?Kn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Fn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Un(t,e,n){e instanceof Jn?(t.b=e,function(t,e){e&&!t.f&&($n(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Gn(e,Xn)),t.b=new Jn(e,t.i))}function Vn(t,e,n){t.b.set(e,n)}function jn(t,e){return t.b.get(e)}function qn(t){return t instanceof Ln?new Ln(t):new Ln(t,void 0)}function Bn(t,e,n,r){var i=new Ln(null,void 0);return t&&Mn(i,t),e&&(i.a=e),n&&Fn(i,n),r&&(i.f=r),i}function Kn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Gn(e,zn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Gn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Gn(n,"/"==n.charAt(0)?Qn:Wn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Gn(n,Yn)),t.join("")},Ln.prototype.resolve=function(t){var e=new Ln(this),n=!!t.c;n?Mn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Fn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Un(e,rr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var zn=/[#\/\?@]/g,Wn=/[#\?:]/g,Qn=/[#\?]/g,Xn=/[#\?@]/g,Yn=/#/g;function Jn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $n(t){t.a||(t.a=new On,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=Cn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Jn(null,void 0);t=Dn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){$n(t),e=ir(t,e),xn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,xn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Rn(t)))}function er(t,e){return $n(t),e=ir(t,e),xn(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),Z(n)),t.b+=n.length)}function rr(t){var e=new Jn;return e.c=t.c,t.a&&(e.a=new On(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return sr(new ar,t,e),e.join("")}function ar(){}function sr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),sr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),hr(r,n),n.push(":"),sr(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":hr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Jn.prototype).add=function(t,e){$n(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){$n(this),this.a.forEach((function(n,r){G(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){$n(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){$n(this);var e=[];if("string"==typeof t)er(this,t)&&(e=J(e,this.a.get(ir(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},t.set=function(t,e){return $n(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function hr(t,e){e.push('"',t.replace(cr,(function(t){var e=ur[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ur[t]=e),e})),'"')}function lr(){var t=Or();return Yt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function fr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function dr(t,e){e=e||s.window;var n="about:blank";t&&(n=xt(Ft(t)||jt)),e.location.href=n}function pr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<pr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function vr(t){return!!((t=(t||Or()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function mr(t){t=t||s.window;try{t.close()}catch(t){}}function yr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Or().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),kr(Or())==Ar&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Rt?n:Ft(void 0!==n.href?n.href:String(n))||jt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((dt("iPhone")&&!dt("iPod")&&!dt("iPad")||dt("iPad")||dt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(a=me(document,"A"),"HTMLAnchorElement"),e=e instanceof Rt?e:Ut(e),a.href=xt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Kt("",r,n,a),t=xt(e),a&&($t&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ht(t)+'">',t=new qt(t=(r=_t())?r.createHTML(t):t,null,Bt),r=a.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Kt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var gr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function wr(){var t=null;return new Ee((function(e){"complete"==s.document.readyState?e():(t=function(){e()},dn(window,"load",t))})).o((function(e){throw pn(window,"load",t),e}))}function Ir(t){return t=t||Or(),!("file:"!==Mr()&&"ionic:"!==Mr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Er(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Tr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function Sr(){return $.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":$.INTERNAL.hasOwnProperty("node")?"Node":Tr()?"Worker":"Browser"}function _r(){var t=Sr();return"ReactNative"===t||"Node"===t}var Ar="Firefox",Nr="Chrome";function kr(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Ar:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Nr:"Safari"}var Dr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Cr(t,e){e=e||[];var n,r=[],i={};for(n in Dr)i[Dr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Sr())?r=kr(i=Or()):"Worker"===r&&(r=kr(i=Or())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Or(){return s.navigator&&s.navigator.userAgent||""}function Rr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function xr(){try{var t=s.localStorage,e=qr();if(t)return t.setItem(e,"1"),t.removeItem(e),!lr()||!!s.indexedDB}catch(t){return Tr()&&!!s.indexedDB}return!1}function Pr(){return(Lr()||"chrome-extension:"===Mr()||Ir())&&!_r()&&xr()&&!Tr()}function Lr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){return s.location&&s.location.protocol||null}function Fr(t){return!vr(t=t||Or())&&kr(t)!=Ar}function Ur(t){return void 0===t?null:or(t)}function Vr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function jr(t){if(null!==t)return JSON.parse(t)}function qr(t){return t||Math.floor(1e9*Math.random()).toString()}function Br(t){return"Safari"!=kr(t=t||Or())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Kr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Gr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Or(),e=Sr(),this.b=vr(t)||"ReactNative"===e}function Hr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function zr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Wr(){return!(!Rr("fireauth.oauthhelper",s)&&!Rr("fireauth.iframe",s))}Gr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Lr()&&"chrome-extension:"!==Mr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Qr,Xr={};function Yr(t){Xr[t]||(Xr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Jr={};Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:2}),Qr=2==Jr.abcd}catch(Qt){Qr=!1}function $r(t,e,n){Qr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&$r(t,n,e[n])}function ti(t){var e={};return Zr(e,t),e}function ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)$r(e,n,ei(t[n]));return e}function ni(t){var e=t&&(t[si]?"phone":null);if(!(e&&t&&t[ai]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");$r(this,"uid",t[ai]),$r(this,"displayName",t[ii]||null);var n=null;t[oi]&&(n=new Date(t[oi]).toUTCString()),$r(this,"enrollmentTime",n),$r(this,"factorId",e)}function ri(t){try{var e=new ui(t)}catch(t){e=null}return e}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",ai="mfaEnrollmentId",si="phoneInfo";function ui(t){ni.call(this,t),$r(this,"phoneNumber",t[si])}function ci(t){var e={},n=t[di],r=t[vi],i=t[mi];if(t=ri(t[pi]),!i||i!=li&&i!=fi&&!n||i==fi&&!r||i==hi&&!t)throw Error("Invalid checkActionCode response!");i==fi?(e[gi]=n||null,e[wi]=n||null,e[yi]=r):(e[gi]=r||null,e[wi]=r||null,e[yi]=n||null),e[bi]=t||null,$r(this,Ei,i),$r(this,Ii,ei(e))}S(ui,ni),ui.prototype.w=function(){var t=ui.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var hi="REVERT_SECOND_FACTOR_ADDITION",li="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",di="email",pi="mfaInfo",vi="newEmail",mi="requestType",yi="email",gi="fromEmail",bi="multiFactorInfo",wi="previousEmail",Ii="data",Ei="operation";function Ti(t){var e=jn(t=qn(t),Si)||null,n=jn(t,_i)||null,r=jn(t,ki)||null;if(r=r&&Ci[r]||null,!e||!n||!r)throw new A("argument-error",Si+", "+_i+"and "+ki+" are required in a valid action code URL.");Zr(this,{apiKey:e,operation:r,code:n,continueUrl:jn(t,Ai)||null,languageCode:jn(t,Ni)||null,tenantId:jn(t,Di)||null})}var Si="apiKey",_i="oobCode",Ai="continueUrl",Ni="languageCode",ki="mode",Di="tenantId",Ci={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:hi,signIn:li,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function Oi(t){try{return new Ti(t)}catch(t){return null}}function Ri(t){var e=t[Fi];if(void 0===e)throw new A("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new A("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[xi];if(n&&"object"==typeof n){e=n[ji];var r=n[Ui];if(n=n[Vi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new A("argument-error",Ui+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new A("argument-error",Vi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new A("argument-error",ji+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new A("missing-android-pkg-name")}}else if(void 0!==n)throw new A("argument-error",xi+" property must be a non null object when specified.");if(this.f=null,(e=t[Mi])&&"object"==typeof e){if("string"==typeof(e=e[qi])&&e.length)this.f=e;else if(void 0!==e)throw new A("argument-error",qi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new A("argument-error",Mi+" property must be a non null object when specified.");if(void 0!==(e=t[Li])&&"boolean"!=typeof e)throw new A("argument-error",Li+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Pi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new A("argument-error",Pi+" property must be a non empty string when specified.");this.i=t||null}var xi="android",Pi="dynamicLinkDomain",Li="handleCodeInApp",Mi="iOS",Fi="url",Ui="installApp",Vi="minimumVersion",ji="packageName",qi="bundleId";function Bi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ki=null;function Gi(t){var e=zi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Hi(t){try{return new Gi(t)}catch(t){return null}}function zi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ki[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ki){Ki={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ki[o]&&(Ki[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(t){}return null}Gi.prototype.T=function(){return this.f},Gi.prototype.l=function(){return this.c},Gi.prototype.toString=function(){return this.h};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Qi=["client_id","response_type","scope","redirect_uri","state"],Xi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Qi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Qi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Qi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Wi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Yi(t){for(var e in Xi)if(Xi[e].fa==t)return Xi[e];return null}function Ji(t){var e={};e["facebook.com"]=no,e["google.com"]=io,e["github.com"]=ro,e["twitter.com"]=oo;var n=t&&t[Zi];try{if(n)return e[n]?new e[n](t):new eo(t);if(void 0!==t[$i])return new to(t)}catch(t){}return null}var $i="idToken",Zi="providerId";function to(t){var e=t[Zi];if(!e&&t[$i]){var n=Hi(t[$i]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),$r(this,"providerId",e),$r(this,"isNewUser",n)}function eo(t){to.call(this,t),$r(this,"profile",ei((t=jr(t.rawUserInfo||"{}"))||{}))}function no(t){if(eo.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(eo.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",this.profile&&this.profile.login||null)}function io(t){if(eo.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function oo(t){if(eo.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",t.screenName||null)}function ao(t){var e=qn(t),n=jn(e,"link"),r=jn(qn(n),"link");return e=jn(e,"deep_link_id"),jn(qn(e),"link")||e||r||n||t}function so(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?uo:co}S(eo,to),S(no,eo),S(ro,eo),S(io,eo),S(oo,eo);var uo="enroll",co="signin";function ho(){}function lo(t,e){return t.then((function(t){if(t[Za]){var n=Hi(t[Za]);if(!n||e!=n.i)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==D+"user-not-found"?new A("user-mismatch"):t}))}function fo(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,$r(this,"providerId",t),$r(this,"signInMethod",t)}function po(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function vo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new fo(t.providerId,t.pendingToken)}catch(t){}return null}function mo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&$r(this,"idToken",e.idToken),e.accessToken&&$r(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&$r(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");$r(this,"accessToken",e.oauthToken),$r(this,"secret",e.oauthTokenSecret)}$r(this,"providerId",t),$r(this,"signInMethod",n)}function yo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function go(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new mo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function bo(t,e){this.Qc=e||[],Zr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Yi(t)||{}).Ja||null,this.ob=null}function wo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');bo.call(this,t,[])}function Io(t){bo.call(this,t,Qi),this.a=[]}function Eo(){Io.call(this,"facebook.com")}function To(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new Eo).credential({accessToken:e})}function So(){Io.call(this,"github.com")}function _o(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new So).credential({accessToken:e})}function Ao(){Io.call(this,"google.com"),this.Ca("profile")}function No(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new Ao).credential({idToken:n,accessToken:e})}function ko(){bo.call(this,"twitter.com",Wi)}function Do(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new mo("twitter.com",n,"twitter.com")}function Co(t,e,n){this.a=t,this.f=e,$r(this,"providerId","password"),$r(this,"signInMethod",n===Ro.EMAIL_LINK_SIGN_IN_METHOD?Ro.EMAIL_LINK_SIGN_IN_METHOD:Ro.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Oo(t){return t&&t.email&&t.password?new Co(t.email,t.password,t.signInMethod):null}function Ro(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function xo(t,e){if(!(e=Po(e)))throw new A("argument-error","Invalid email link!");return new Co(t,e.code,Ro.EMAIL_LINK_SIGN_IN_METHOD)}function Po(t){return(t=Oi(t=ao(t)))&&t.operation===li?t:null}function Lo(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new A("internal-error");this.a=t,$r(this,"providerId","phone"),this.fa="phone",$r(this,"signInMethod","phone")}function Mo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return G(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Lo(e)}return null}function Fo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Uo(t){try{this.a=t||$.auth()}catch(t){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function Vo(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new Lo({eb:t,cb:e})}function jo(t){if(t.temporaryProof&&t.phoneNumber)return new Lo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return No(o,n);case"facebook.com":return To(n);case"github.com":return _o(n);case"twitter.com":return Do(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new fo(e,a):new mo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Io(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function qo(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function Bo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function Ko(t){return(t=t||{}).type?new Bo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&N(t.error),t.postBody,t.tenantId):null}function Go(){this.b=null,this.a=[]}so.prototype.Ha=function(){return this.a?De(this.a):De(this.b)},so.prototype.w=function(){return this.type==uo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ho.prototype.ka=function(){},ho.prototype.b=function(){},ho.prototype.c=function(){},ho.prototype.w=function(){},fo.prototype.ka=function(t){return ws(t,po(this))},fo.prototype.b=function(t,e){var n=po(this);return n.idToken=e,Is(t,n)},fo.prototype.c=function(t,e){return lo(Es(t,po(this)),e)},fo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},mo.prototype.ka=function(t){return ws(t,yo(this))},mo.prototype.b=function(t,e){var n=yo(this);return n.idToken=e,Is(t,n)},mo.prototype.c=function(t,e){return lo(Es(t,yo(this)),e)},mo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},bo.prototype.Ka=function(t){return this.Ib=mt(t),this},S(wo,bo),S(Io,bo),Io.prototype.Ca=function(t){return Q(this.a,t)||this.a.push(t),this},Io.prototype.Qb=function(){return Z(this.a)},Io.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new mo(this.providerId,n,this.providerId)},S(Eo,Io),$r(Eo,"PROVIDER_ID","facebook.com"),$r(Eo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(So,Io),$r(So,"PROVIDER_ID","github.com"),$r(So,"GITHUB_SIGN_IN_METHOD","github.com"),S(Ao,Io),$r(Ao,"PROVIDER_ID","google.com"),$r(Ao,"GOOGLE_SIGN_IN_METHOD","google.com"),S(ko,bo),$r(ko,"PROVIDER_ID","twitter.com"),$r(ko,"TWITTER_SIGN_IN_METHOD","twitter.com"),Co.prototype.ka=function(t){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Cs,{email:this.a,oobCode:this.f}):ru(t,$s,{email:this.a,password:this.f})},Co.prototype.b=function(t,e){return this.signInMethod==Ro.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Os,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Gs,{idToken:e,email:this.a,password:this.f})},Co.prototype.c=function(t,e){return lo(this.ka(t),e)},Co.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Ro,{PROVIDER_ID:"password"}),Zr(Ro,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Ro,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Lo.prototype.ka=function(t){return t.fb(Fo(this))},Lo.prototype.b=function(t,e){var n=Fo(this);return n.idToken=e,ru(t,tu,n)},Lo.prototype.c=function(t,e){var n=Fo(this);return n.operation="REAUTH",lo(t=ru(t,eu,n),e)},Lo.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Uo.prototype.fb=function(t,e){var n=this.a.a;return De(e.verify()).then((function(r){if("string"!=typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=v(t)?t.session:null,o=v(t)?t.phoneNumber:t;return(i&&i.type==uo?i.Ha().then((function(t){return function(t,e){return ru(t,zs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==co?i.Ha().then((function(e){return function(t,e){return ru(t,Ws,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Bs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Zr(Uo,{PROVIDER_ID:"phone"}),Zr(Uo,{PHONE_SIGN_IN_METHOD:"phone"}),Bo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Bo.prototype.T=function(){return this.h},Bo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ho,zo=null;function Wo(t){var e="unauthorized-domain",n=void 0,r=qn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Gt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Gt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function Qo(t,e,n){A.call(this,t,n),(t=e||{}).Jb&&$r(this,"email",t.Jb),t.ea&&$r(this,"phoneNumber",t.ea),t.credential&&$r(this,"credential",t.credential),t.Zb&&$r(this,"tenantId",t.Zb)}function Xo(t){if(t.code){var e=t.code||"";0==e.indexOf(D)&&(e=e.substring(D.length));var n={credential:jo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new Qo(e,n,t.message)}return null}function Yo(){}function Jo(t){return t.c||(t.c=t.b())}function $o(){}function Zo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ta(){}function ea(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.qc,this),this.a.onerror=I(this.Sb,this),this.a.onprogress=I(this.rc,this),this.a.ontimeout=I(this.vc,this)}function na(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ra(t,e,n){this.reset(t,e,n,void 0,void 0)}function ia(t){this.f=t,this.b=this.c=this.a=null}function oa(t,e){this.name=t,this.value=e}S(Wo,A),S(Qo,A),Qo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&gt(t,e),t},Qo.prototype.toJSON=function(){return this.w()},Yo.prototype.c=null,S($o,Yo),$o.prototype.a=function(){var t=Zo(this);return t?new ActiveXObject(t):new XMLHttpRequest},$o.prototype.b=function(){var t={};return Zo(this)&&(t[0]=!0,t[1]=!0),t},Ho=new $o,S(ta,Yo),ta.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ea;throw Error("Unsupported browser")},ta.prototype.b=function(){return{}},(t=ea.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,na(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",na(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,na(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ra.prototype.a=null,ra.prototype.reset=function(t,e,n,r,i){r||T(),delete this.a},oa.prototype.toString=function(){return this.name};var aa=new oa("SEVERE",1e3),sa=new oa("WARNING",900),ua=new oa("CONFIG",700),ca=new oa("FINE",500);function ha(t){return t.c?t.c:t.a?ha(t.a):(M("Root logger has no level set."),null)}ia.prototype.log=function(t,e,n){if(t.value>=ha(this).value)for(p(e)&&(e=e()),t=new ra(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var la={},fa=null;function da(t){var e;if(fa||(fa=new ia(""),la[""]=fa,fa.c=ua),!(e=la[t])){e=new ia(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=da(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,la[t]=e}return e}function pa(t,e){t&&t.log(ca,e,void 0)}function va(t){this.f=t}function ma(t){Tn.call(this),this.u=t,this.h=void 0,this.readyState=ya,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=da("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}S(va,Yo),va.prototype.a=function(){return new ma(this.f)},va.prototype.b=function(t){return function(){return t}}({}),S(ma,Tn);var ya=0;function ga(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ba(t){t.readyState=4,t.g=null,t.c=null,t.m=null,wa(t)}function wa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Ia(t){Tn.call(this),this.headers=new On,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=Ea,this.u=this.S=!1}(t=ma.prototype).open=function(t,e){if(this.readyState!=ya)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,wa(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ba(this)),this.readyState=ya},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,wa(this)),this.a&&(this.readyState=3,wa(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ga(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ba(this):wa(this),3==this.readyState&&ga(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ba(this))},t.sc=function(t){this.a&&(this.response=t,ba(this))},t.Ua=function(t){var e=this.i;e&&e.log(sa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ba(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(sa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(sa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ma.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),S(Ia,Tn);var Ea="";Ia.prototype.b=da("goog.net.XhrIo");var Ta=/^https?$/i,Sa=["POST","PUT"];function _a(t){return"content-type"==t.toLowerCase()}function Aa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Na(t),Da(t)}function Na(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ka(t){if(t.c&&void 0!==a)if(t.C[1]&&4==Oa(t)&&2==Ra(t))pa(t.b,xa(t,"Local request error detected and ignored"));else if(t.i&&4==Oa(t))Nn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Oa(t)){pa(t.b,xa(t,"Request complete")),t.c=!1;try{var e,n=Ra(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Pn)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!Ta.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Oa(t)?t.a.statusText:""}catch(e){pa(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Ra(t)+"]",Na(t)}}finally{Da(t)}}}function Da(t,e){if(t.a){Ca(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(aa,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Ca(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Oa(t){return t.a?t.a.readyState:0}function Ra(t){try{return 2<Oa(t)?t.a.status:-1}catch(t){return-1}}function xa(t,e){return e+" ["+t.R+" "+t.l+" "+Ra(t)+"]"}function Pa(t){var e=Ha;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function La(t,e,n){t.a=!0,t.c=n,t.f=!e,Va(t)}function Ma(t){if(t.a){if(!t.v)throw new ja(t);t.v=!1}}function Fa(t,e,n,r){t.g.push([e,n,r]),t.a&&Va(t)}function Ua(t){return W(t.g,(function(t){return p(t[1])}))}function Va(t){if(t.h&&t.a&&Ua(t)){var e=t.h,n=Ka[e];n&&(s.clearTimeout(n.a),delete Ka[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(x(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Ua(t)||(n=!0)}}t.c=e,r&&(u=I(t.m,t,!0),r=I(t.m,t,!1),e instanceof Pa?(Fa(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Ba(e),Ka[e.a]=e,t.h=e.a)}function ja(){P.call(this)}function qa(){P.call(this)}function Ba(t){this.a=s.setTimeout(I(this.c,this),0),this.b=t}(t=Ia.prototype).Ma=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",pa(this.b,xa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(pa(this.b,xa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Da(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Da(this,!0)),Ia.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?ka(this):this.Jc())},t.Jc=function(){ka(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ea:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(aa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return pa(this.b,"Can not get response: "+t.message),null}},Pa.prototype.cancel=function(t){if(this.a)this.c instanceof Pa&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new qa(this),Ma(this),La(this,!1,t))}},Pa.prototype.m=function(t,e){this.i=!1,La(this,t,e)},Pa.prototype.then=function(t,e,n){var r,i,o=new Ee((function(t,e){r=t,i=e}));return Fa(this,r,(function(t){t instanceof qa?o.cancel():i(t)})),o.then(t,e,n)},Pa.prototype.$goog_Thenable=!0,S(ja,P),ja.prototype.message="Deferred has already fired",ja.prototype.name="AlreadyCalledError",S(qa,P),qa.prototype.message="Deferred was canceled",qa.prototype.name="CanceledError",Ba.prototype.c=function(){throw delete Ka[this.a],this.b};var Ka={};function Ga(t){var e={},n=e.document||document,r=Nt(t).toString(),i=me(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new Pa(o),u=null,l=null!=e.timeout?e.timeout:5e3;return 0<l&&(u=window.setTimeout((function(){za(i,!0);var t=new Xa(Qa,"Timeout reached for loading script "+r);Ma(a),La(a,!1,t)}),l),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(za(i,e.xd||!1,u),Ma(a),La(a,!0,null))},i.onerror=function(){za(i,!0,u);var t=new Xa(Wa,"Error while loading script "+r);Ma(a),La(a,!1,t)},gt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),le(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=Nt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=h(e.document):(null===c&&(c=h(s.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ha(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&za(t,!0,this.Ma)}}function za(t,e,n){null!=n&&s.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Wa=0,Qa=1;function Xa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function Ya(t){this.f=t}function Ja(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||ts,this.g=mt(t.secureTokenHeaders||es),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ns,this.a=mt(t.firebaseHeaders||rs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Sr(),!(n=s.XMLHttpRequest||n&&$.INTERNAL.node&&$.INTERNAL.node.XMLHttpRequest)&&!Tr())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Tr()?this.f=new va(self):_r()?this.f=new Ya(n):this.f=new ta,this.b=null}S(Xa,P),S(Ya,Yo),Ya.prototype.a=function(){return new this.f},Ya.prototype.b=function(){return{}};var $a,Za="idToken",ts=new Gr(3e4,6e4),es={"Content-Type":"application/x-www-form-urlencoded"},ns=new Gr(3e4,6e4),rs={"Content-Type":"application/json"};function is(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function os(t,e){e&&(t.l=as("https://securetoken.googleapis.com/v1/token",e),t.h=as("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=as("https://identitytoolkit.googleapis.com/v2/",e))}function as(t,e){return t=qn(t),e=qn(e.url),t.f=t.a+t.f,Mn(t,e.c),t.a=e.a,Fn(t,e.g),t.toString()}function ss(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function us(t,e,n,r,i,o,a){(function(){var t=Or();return!((t=kr(t)!=Nr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Yt&&ue&&!(9<ue))})()||Tr()?t=I(t.u,t):($a||($a=new Ee((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(s[hs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Fa(t,null,e,void 0)}(Ga(kt(cs,{onload:hs})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=I(t.s,t)),t(e,n,r,i,o,a)}Ja.prototype.T=function(){return this.b},Ja.prototype.u=function(t,e,n,r,i,o){if(Tr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Ia(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Sn(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return pa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),_n(a,"ready",(function(){u&&clearTimeout(u),We(this)})),_n(a,"timeout",(function(){u&&clearTimeout(u),We(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ho.a(),t.C=t.D?Jo(t.D):Jo(Ho),t.a.onreadystatechange=I(t.Vb,t);try{pa(t.b,xa(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return pa(t.b,xa(t,"Error opening Xhr: "+e.message)),void Aa(t,e)}e=r||"";var o=new On(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)G(t,e,void 0);else for(var n=Cn(t),r=Dn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=_a,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!Q(Sa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Ca(t),0<t.g&&(t.u=function(t){return Yt&&se(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),pa(t.b,xa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ma,t)):t.s=Nn(t.Ma,t.g,t)),pa(t.b,xa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){pa(t.b,xa(t,"Send error: "+e.message)),Aa(t,e)}}(a,t,n,r,i)};var cs=new wt(St,"https://apis.google.com/js/client.js?onload=%{onload}"),hs="__fcb"+Math.floor(1e6*Math.random()).toString();function ls(t){if("string"!=typeof(t=t.email)||!br.test(t))throw new A("invalid-email")}function fs(t){"email"in t&&ls(t)}function ds(t){if(!t[Za]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,mt(t));throw new A("internal-error")}}function ps(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}Ja.prototype.s=function(t,e,n,r,i){var o=this;$a.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ja.prototype.zb=function(){return ru(this,Hs,{})},Ja.prototype.Bb=function(t,e){return ru(this,Ks,{idToken:t,email:e})},Ja.prototype.Cb=function(t,e){return ru(this,Gs,{idToken:t,password:e})};var vs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ms(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function ys(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function gs(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&er(t=new Jn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function bs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Xo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Xo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Xo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;ds(t)}function ws(t,e){return e.returnIdpCredential=!0,ru(t,Qs,e)}function Is(t,e){return e.returnIdpCredential=!0,ru(t,Ys,e)}function Es(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Xs,e)}function Ts(t){if(!t.oobCode)throw new A("invalid-action-code")}(t=Ja.prototype).Db=function(t,e){var n={idToken:t},r=[];return pt(vs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ks,n)},t.vb=function(t,e){return gt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Us,t)},t.wb=function(t,e){return gt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ls,t)},t.ub=function(t,e){return gt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ms,t)},t.Eb=function(t,e,n){return gt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fs,t)},t.fb=function(t){return ru(this,Zs,t)},t.nb=function(t,e){return ru(this,qs,{oobCode:t,newPassword:e})},t.Ra=function(t){return ru(this,_s,{oobCode:t})},t.jb=function(t){return ru(this,Ss,{oobCode:t})};var Ss={endpoint:"setAccountInfo",A:Ts,Z:"email",B:!0},_s={endpoint:"resetPassword",A:Ts,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},B:!0},As={endpoint:"signupNewUser",A:function(t){if(ls(t),!t.password)throw new A("weak-password")},G:ds,V:!0,B:!0},Ns={endpoint:"createAuthUri",B:!0},ks={endpoint:"deleteAccount",N:["idToken"]},Ds={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new A("internal-error")}},Cs={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ls,G:ds,V:!0,B:!0},Os={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ls,G:ds,V:!0},Rs={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ms,G:ds,B:!0,Na:!0},xs={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ms,G:ds,B:!0,Na:!0},Ps={endpoint:"getAccountInfo"},Ls={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");ls(t)},Z:"email",B:!0},Ms={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Fs={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Us={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");ls(t)},Z:"email",B:!0},Vs={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},js={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},qs={endpoint:"resetPassword",A:Ts,Z:"email",B:!0},Bs={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ks={endpoint:"setAccountInfo",N:["idToken"],A:fs,V:!0},Gs={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(fs(t),!t.password)throw new A("weak-password")},G:ds,V:!0},Hs={endpoint:"signupNewUser",G:ds,V:!0,B:!0},zs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Ws={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Qs={endpoint:"verifyAssertion",A:ys,Ya:gs,G:bs,V:!0,B:!0},Xs={endpoint:"verifyAssertion",A:ys,Ya:gs,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);ds(t)},V:!0,B:!0},Ys={endpoint:"verifyAssertion",A:function(t){if(ys(t),!t.idToken)throw new A("internal-error")},Ya:gs,G:bs,V:!0},Js={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new A("invalid-custom-token")},G:ds,V:!0,B:!0},$s={endpoint:"verifyPassword",A:function(t){if(ls(t),!t.password)throw new A("wrong-password")},G:ds,V:!0,B:!0},Zs={endpoint:"verifyPhoneNumber",A:ps,G:ds,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new A("internal-error");ps(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Xo(t);ds(t)}},eu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ps,G:ds,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Za]^!!t.refreshToken)throw new A("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.N))return Ce(new A("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return De(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=qn(e+n);Vn(s,"key",t.c),a&&Vn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Vn(s,c,i[c]);return new Ee((function(e,n){us(t,s.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:or(Vr(i)),t.a,t.v.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new A("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",gt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=Ur(t)),new A("internal-error",e)}function au(t){this.b=t,this.a=null,this.rb=function(t){return(hu||(hu=new Ee((function(t,e){function n(){Kr(),Rr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Kr(),e(Error("Network Error"))},timeout:uu.get()})}if(Rr("gapi.iframes.Iframe"))t();else if(Rr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Rr("gapi.load")?n():e(Error("Network Error"))},De(Ga(r=kt(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new Ee((function(e,n){Rr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new wt(St,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Gr(3e4,6e4),cu=new Gr(5e3,15e3),hu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Bn((t=qn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Bn("https",this.l,null,"/__/auth/iframe"),this.a=t,Vn(this.a,"apiKey",this.h),Vn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function du(t){try{return $.app(t).auth().Ga()}catch(t){return[]}}function pu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=fr();return function(t){return ru(t,Vs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=qn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=qn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:gr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Wo(fr())}))}function mu(t){return t.m||(t.m=wr().then((function(){if(!t.u){var e=t.c,n=t.i,r=du(t.b),i=new lu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.v=new au(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Ko(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",De(n)}return n.status="ERROR",De(n)}))}(t)}))),t.m}function yu(t){return t.l||(t.C=t.c?Cr(t.c,du(t.b)):null,t.l=new Ja(t.g,R(t.i),t.C),t.f&&os(t.l,t.f)),t.l}function gu(t,e,n,r,i,o,a,s,u,c,h,l){return(t=new fu(t,e,n,r,i,l)).l=o,t.g=a,t.i=s,t.b=mt(u||null),t.f=c,t.yb(h).toString()}function bu(t){if(this.a=t||$.INTERNAL.reactNative&&$.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function wu(t){this.b=t,this.a={},this.f=I(this.c,this)}lu.prototype.toString=function(){return this.f?Vn(this.a,"v",this.f):tr(this.a.b,"v"),this.b?Vn(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?Vn(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},fu.prototype.yb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=qn(this.v.url);t=Bn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Bn("https",this.u,null,"/__/auth/handler");if(Vn(t,"apiKey",this.s),Vn(t,"appName",this.c),Vn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=$.app(this.c).auth().la()}catch(t){n=null}for(var r in e.ob=n,Vn(t,"providerId",this.a.providerId),e=Vr((n=this.a).Ib))e[r]=e[r].toString();r=n.Qc,e=mt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),vt(e)||Vn(t,"customParameters",Ur(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&Vn(t,"scopes",n.join(",")),this.l?Vn(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?Vn(t,"eventId",this.g):tr(t.b,"eventId"),this.i?Vn(t,"v",this.i):tr(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!jn(t,a)&&Vn(t,a,this.b[a]);return this.h?Vn(t,"tid",this.h):tr(t.b,"tid"),this.f?Vn(t,"eid",this.f):tr(t.b,"eid"),(a=du(this.c)).length&&Vn(t,"fw",a.join(",")),t.toString()},(t=pu.prototype).Ob=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return mu(t).then((function(){return function(t,e){return t.rb.then((function(){return new Ee((function(n){t.a.send(e.type,e,n,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&mr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Ee((function(e){return function n(){kn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return kn(n).then((function(){e(r)}))}))},t.Xb=function(){var t=Or();return!Fr(t)&&!Br(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,a,s){if(!t)return Ce(new A("popup-blocked"));if(a&&!Fr())return this.ma().o((function(e){mr(t),i(e)})),r(),De();this.a||(this.a=vu(yu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw mr(t),i(e),e}));return r(),e})).then((function(){qo(n),a||dr(gu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=vu(yu(this)));var i=this;return this.a.then((function(){qo(e),dr(gu(i.s,i.g,i.b,t,e,fr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return mu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new A("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){Y(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return De(this.a.getItem(t)).then((function(t){return t&&jr(t)}))},t.set=function(t,e){return De(this.a.setItem(t,Ur(e)))},t.U=function(t){return De(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var Iu,Eu=[];function Tu(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Su(t){this.a=t}function _u(t){this.c=t,this.b=!1,this.a=[]}function Au(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Ce(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Ee((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Nu(t,c),e})).o((function(e){throw Nu(t,c),e}))}function Nu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function ku(){if(!Ru())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Tr()&&self?(this.v=function(){var t=Tr()?self:null;if(G(Eu,(function(n){n.b==t&&(e=n)})),!e){var e=new wu(t);Eu.push(e)}return e}(),Tu(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&G(t.a,(function(t){t(e)})),{keyProcessed:Q(e,n.key)}}))})),Tu(this.v,"ping",(function(){return De(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?De().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):De(null)}().then((function(e){(t.h=e)&&(t.g=new _u(new Su(e)),Au(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Du(t){return new Ee((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Ee((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Du(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Cu(t){return t.i||(t.i=Du(t)),t.i}function Ou(t,e){var n=0;return new Ee((function r(i,o){Cu(t).then(e).then(i).o((function(e){if(!(3<++n))return Cu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ru(){try{return!!s.indexedDB}catch(t){return!1}}function xu(t){return t.objectStore("firebaseLocalStorage")}function Pu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new Ee((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Au(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):De()}function Fu(t){return Cu(t).then((function(t){var e=xu(Pu(t,!1));return e.getAll?Lu(e.getAll()):new Ee((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=pr(t.c,n),t.c=n}return r}))}function Uu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Vu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=De().then((function(){if(Ru()){var t=qr(),r="__sak"+t;return Iu||(Iu=new ku),(n=Iu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){G(e.a,(function(e){e(t)}))})),t}))}function ju(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==Sr();if(!(t=Bu()||t&&$.INTERNAL.node&&$.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Sr())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Bu()||$.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=s.localStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ku(){this.type="nullStorage"}function Gu(){if(!function(){var t="Node"==Sr();if(!(t=Hu()||t&&$.INTERNAL.node&&$.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Sr())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Hu()||$.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=s.sessionStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){var t={};t.Browser=Xu,t.Node=Yu,t.ReactNative=Ju,t.Worker=$u,this.a=t[Sr()]}wu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];G(r,(function(e){i.push(De().then((function(){return e(t.origin,t.data.data)})))})),Re(i).then((function(r){var i=[];G(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),G(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Su.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},_u.prototype.close=function(){for(;0<this.a.length;)Nu(this,this.a[0]);this.b=!0},(t=ku.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,(function(e){return Lu((e=xu(Pu(e,!0))).get(t))})).then((function(i){return Ou(n,(function(o){if(o=xu(Pu(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Lu(o.add(a))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ou(this,(function(e){return Lu(xu(Pu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ou(this,(function(r){return n=!0,e.b++,Lu(xu(Pu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){Uu(t),function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&G(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&Uu(this)},(t=Vu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t}))},(t=ju.prototype).get=function(t){return De(this.a[t])},t.set=function(t,e){return this.a[t]=e,De()},t.U=function(t){return delete this.a[t],De()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return De().then((function(){return jr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return De().then((function(){var r=Ur(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&ln(s.window,"storage",t)},t.ia=function(t){s.window&&pn(s.window,"storage",t)},(t=Ku.prototype).get=function(){return De(null)},t.set=function(){return De()},t.U=function(){return De()},t.ca=function(){},t.ia=function(){},(t=Gu.prototype).get=function(t){var e=this;return De().then((function(){return jr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return De().then((function(){var r=Ur(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return De().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Wu,Qu,Xu={F:qu,bb:Gu},Yu={F:qu,bb:Gu},Ju={F:bu,bb:Ku},$u={F:qu,bb:Ku},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(Br(Or())||!Er()),e=Fr(),n=xr();this.m=t,this.h=e,this.l=n,this.a={},Wu||(Wu=new zu),t=Wu;try{this.g=!lr()&&Wr()||!s.indexedDB?new t.a.F:new Vu(Tr()?new ju:new t.a.F)}catch(t){this.g=new ju,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new ju}this.v=new ju,this.f=I(this.Yb,this),this.b={}}function ec(){return Qu||(Qu=new tc),Qu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function ac(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),vt(this.a)&&(nc(this,"local").ca(this.f),this.h||(lr()||!Wr())&&s.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.mb(e))},Yt&&ue&&10==ue&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else G(t,I(this.mb,this))},t.mb=function(t){this.a[t]&&G(this.a[t],(function(t){t()}))};var sc,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=lc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=s.Int32Array?new Int32Array(gc):gc),this.reset()}S(hc,(function(){this.b=-1}));for(var lc=64,fc=lc-1,dc=[],pc=0;pc<fc;pc++)dc[pc]=0;var vc=J(128,dc);function mc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|sc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function yc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(mc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(mc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):Z(this.h)};var gc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){hc.call(this,8,wc)}S(bc,hc);var wc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ic(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ec(t){return new A("invalid-cordova-configuration",t)}function Tc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Sc(t){return t.f||(t.f=t.ma().then((function(){return new Ee((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),_c(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ao(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=jr(jn(o=qn(i),"firebaseError")||null))?N(o):null)?new Bo(r.c,r.b,null,null,o,null,r.T()):new Bo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Tc(t,i)}))}var n=new Bo("unknown",null,null,null,new A("no-auth-event")),r=!1,i=kn(500).then((function(){return _c(t).then((function(){r||Tc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Rr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},zo||(zo=new Go),function(t){var e=zo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Rr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function _c(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return Ko(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function Ac(t){this.a=t,this.b=ec()}(t=Ic.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(Ir(void 0)?wr().then((function(){return new Ee((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ce(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Rr("universalLinks.subscribe",s))throw Ec("cordova-universal-links-plugin-fix is not installed");if(void 0===Rr("BuildInfo.packageName",s))throw Ec("cordova-plugin-buildinfo is not installed");if("function"!=typeof Rr("cordova.plugins.browsertab.openUrl",s))throw Ec("cordova-plugin-browsertab is not installed");if("function"!=typeof Rr("cordova.InAppBrowser.open",s))throw Ec("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},t.Ob=function(t,e){return e(new A("operation-not-supported-in-this-environment")),De()},t.Mb=function(){return Ce(new A("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return Ce(new A("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=De().then((function(){return qo(e),Sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Bo(e,r,null,o,new A("no-auth-event"),null,i),u=Rr("BuildInfo.packageName",s);if("string"!=typeof u)throw new A("invalid-cordova-configuration");var c=Rr("BuildInfo.displayName",s),h={};if(Or().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Or().toLowerCase().match(/android/))return Ce(new A("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=function(t){var e=new bc;yc(e,t),t=[];var n=8*e.g;56>e.c?yc(e,vc,56-e.c):yc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(mc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return z(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),h.sessionId=o;var l=gu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,a.w(),e)})).then((function(){var e=Rr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Rr("cordova.plugins.browsertab.openUrl",s)))throw new A("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Rr("cordova.InAppBrowser.open",s)))throw new A("invalid-cordova-configuration");e=Or(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Ee((function(t,e){u=function(){var e=Rr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=kn(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},h=function(){Hr()&&c()},o.addEventListener("resume",c,!1),Or().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return _c(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Sa(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Bo("unknown",null,null,null,new A("no-auth-event")),t(e))}))},t.Sa=function(t){Y(this.b,(function(e){return e==t}))};var Nc={name:"pendingRedirect",F:"session"};function kc(t){return ic(t.b,Nc,t.a)}function Dc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new Gc,this.C=new Xc,this.g=new Ac(Bc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Cc(this.D,this.v,this.m,k,this.J)}function Cc(t,e,n,r,i){var o=$.SDK_VERSION||null;return Ir()?new Ic(t,e,n,o,r,i):new pu(t,e,n,o,r,i)}function Oc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Rc(t){t.a.Xb()&&Oc(t).o((function(e){var n=new Bo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)})),t.a.Tb()||Hc(t.b)}function xc(t,e){Q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Nc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?kc(t.g).then((function(){Oc(t).o((function(e){var n=new Bo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)}))})):Rc(t)})).o((function(){Rc(t)}))}function Pc(t,e){Y(t.h,(function(t){return t==e}))}Dc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Cc(this.D,this.v,this.m,null,this.J),this.i={}},Dc.prototype.s=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Hc(this.b),e};var Lc=new Gr(2e3,1e4),Mc=new Gr(3e4,6e4);function Fc(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Uc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Vc(t,e,n,r,i){var o;return function(t){return t.b.set(Nc,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Uc(e))throw new A("operation-not-supported-in-this-environment");return o=e,kc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new Ee((function(){})):kc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function jc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),Lc.get())}Dc.prototype.qa=function(){return this.b.qa()};var qc={};function Bc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Kc(t,e,n,r){var i=Bc(e,n,r);return qc[i]||(qc[i]=new Dc(t,e,n,r)),qc[i]}function Gc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Hc(t){t.g||(t.g=!0,Qc(t,!1,null,null))}function zc(t){t.g&&!t.i&&Qc(t,!1,null,null)}function Wc(t,e){if(t.b=function(){return De(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Qc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ce(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Wc(t,n):Wc(t,{user:null}),t.f=[],t.c=[]}function Xc(){}function Yc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Jc(t,e){this.a=e,$r(this,"verificationId",t)}function $c(t,e,n,r){return new Uo(t).fb(e,n).then((function(t){return new Jc(t,r)}))}function Zc(t){var e=zi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:t,expirationTime:zr(1e3*e.exp),authTime:zr(1e3*e.auth_time),issuedAtTime:zr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function th(t,e,n){var r=e&&e[nh];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=mt(e),this.g=n,this.c=new so(null,r),this.b=[];var i=this;G(e[eh]||[],(function(t){(t=ri(t))&&i.b.push(t)})),$r(this,"auth",this.a),$r(this,"session",this.c),$r(this,"hints",this.b)}Gc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Gc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Qc(this,!0,null,t.a),De()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Qc(t,s,e,null)})).o((function(e){Qc(t,s,null,e)}))}(this,t,e):Ce(new A("invalid-auth-event")):(Qc(this,!1,null,null),De())}else Ce(new A("invalid-auth-event"))},Gc.prototype.qa=function(){var t=this;return new Ee((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=kn(Mc.get()).then((function(){t.b||(t.g=!0,Qc(t,!0,null,e))}))}(t))}))},Xc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),De()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ce(new A("invalid-auth-event"))}else Ce(new A("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Vo(this.verificationId,t),this.a(t)};var eh="mfaInfo",nh="mfaPendingCredential";function rh(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new th(t,e,n),$r(this,"resolver",this.b)}function ih(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new rh(e,t.serverResponse,n,t.message)}catch(t){}return null}function oh(){}function ah(t){$r(this,"factorId",t.fa),this.a=t}function sh(t){if(ah.call(this,t),this.a.fa!=Uo.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function uh(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function ch(t,e){this.a=t,this.b=[],this.c=I(this.yc,this),ln(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&G(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ai]=t.uid),t.displayName&&(r[ii]=t.displayName),t.enrollmentTime&&(r[oi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[si]=t.phoneNumber);try{e=new ui(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),hh(this,n)}function hh(t,e){t.b=e,$r(t,"enrolledFactors",e)}function lh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function fh(t,e){t.stop(),t.b=kn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return Hr()||!t?De():new Ee((function(n){e=function(){Hr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){fh(t,!0)})).o((function(e){t.i(e)&&fh(t,!1)}))}function dh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function ph(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function vh(t,e){t.b=Hi(e[Za]||""),t.a=e.refreshToken,ph(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function mh(t,e){this.a=t||null,this.b=e||null,Zr(this,{lastSignInTime:zr(e||null),creationTime:zr(t||null)})}function yh(t,e,n,r,i,o){Zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function gh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=$.SDK_VERSION?Cr($.SDK_VERSION):null;this.a=new Ja(this.l,R(k),r),t.emulatorConfig&&os(this.a,t.emulatorConfig),this.b=new dh(this.a),Ah(this,e[Za]),vh(this.b,e),$r(this,"refreshToken",this.b.a),Dh(this,n||{}),Tn.call(this),this.R=!1,this.s&&Pr()&&(this.i=Kc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new lh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=I(this.hb,this);var i=this;this.ya=null,this.Oa=function(t){i.wa(t.h)},this.ja=null,this.Aa=function(t){os(i.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){Ih(i,t.f)},this.ba=null,this.O=new ch(this,n),$r(this,"multiFactor",this.O)}function bh(t,e){t.ja&&pn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&ln(e,"languageCodeChanged",t.Oa)}function wh(t,e){t.X&&pn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&ln(e,"emulatorConfigChanged",t.Aa)}function Ih(t,e){t.$=e,ss(t.a,$.SDK_VERSION?Cr($.SDK_VERSION,t.$):null)}function Eh(t,e){t.ba&&pn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&ln(e,"frameworkChanged",t.Ba)}function Th(t){try{return $.app(t.m).auth()}catch(e){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Sh(t){t.D||t.u.b||(t.u.start(),pn(t,"tokenChanged",t.aa),ln(t,"tokenChanged",t.aa))}function _h(t){pn(t,"tokenChanged",t.aa),t.u.stop()}function Ah(t,e){t.za=e,$r(t,"_lat",e)}function Nh(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Re(e).then((function(){return t}))}function kh(t){t.i&&!t.R&&(t.R=!0,xc(t.i,t))}function Dh(t,e){Zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new mh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Ch(){}function Oh(t){return De().then((function(){if(t.D)throw new A("app-deleted")}))}function Rh(t){return z(t.providerData,(function(t){return t.providerId}))}function xh(t,e){e&&(Ph(t,e.providerId),t.providerData.push(e))}function Ph(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function Lh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&$r(t,e,n)}function Mh(t,e){t!=e&&(Zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?$r(t,"metadata",function(t){return new mh(t.a,t.b)}(e.metadata)):$r(t,"metadata",new mh),G(e.providerData,(function(e){xh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),$r(t,"refreshToken",t.b.a),hh(t.O,e.O.b))}function Fh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Ps,{idToken:e}).then(I(t.Kc,t))}(t,e).then((function(){return n||Lh(t,"isAnonymous",!1),e}))}))}function Uh(t,e){e[Za]&&t.za!=e[Za]&&(vh(t.b,e),t.dispatchEvent(new uh("tokenChanged")),Ah(t,e[Za]),Lh(t,"refreshToken",t.b.a))}function Vh(t,e){return Fh(t).then((function(){if(Q(Rh(t),e))return Nh(t).then((function(){throw new A("provider-already-linked")}))}))}function jh(t,e,n){return ti({user:t,credential:jo(e),additionalUserInfo:e=Ji(e),operationType:n})}function qh(t,e){return Uh(t,e),t.reload().then((function(){return t}))}function Bh(t,e,n,r,i){if(!Pr())return Ce(new A("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ce(t.h);var o=Yi(n.providerId),a=qr(t.uid+":::"),s=null;(!Fr()||Er())&&t.s&&n.isOAuthProvider&&(s=gu(t.s,t.l,t.m,e,n,null,a,$.SDK_VERSION||null,null,null,t.tenantId));var u=yr(s,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return Fc(t.i,u,e,n,a,!!s,t.tenantId)})).then((function(){return new Ee((function(n,r){t.na(e,null,new A("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=jc(t.i,t,e,u,a)}))})).then((function(t){return u&&mr(u),t?ti(t):null})).o((function(t){throw u&&mr(u),t})),Hh(t,r,i)}function Kh(t,e,n,r,i){if(!Pr())return Ce(new A("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ce(t.h);var o=null,a=qr(t.uid+":::");return r=r().then((function(){if(Gh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Nh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Qh,t.w(),e.a)),e})).then((function(){return Vc(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Xh(t.ha);throw o})).then((function(){if(o)throw o})),Hh(t,r,i)}function Gh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new A("internal-error");throw new A("auth-domain-config-required")}}function Hh(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Ce(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new uh("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){X(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),Th(t),I(t.jc,t))),n||e}))}function zh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Za]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new gh(e,n,t);return t.providerData&&G(t.providerData,(function(t){t&&xh(i,ti(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Wh(t){this.a=t,this.b=ec()}th.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=mt(e.f);return delete n[eh],delete n[nh],gt(n,t),e.g(n)}))},S(rh,A),oh.prototype.sb=function(t,e,n){return e.type==uo?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),gt(n,{phoneVerificationInfo:Fo(t.a)}),ru(e,Rs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return gt(n={mfaPendingCredential:n},{phoneVerificationInfo:Fo(t.a)}),ru(e,xs,n)}))}(this,t,e)},S(ah,oh),S(sh,ah),S(uh,$e),(t=ch.prototype).yc=function(t){hh(this,function(t){var e=[];return G(t.mfaInfo||[],(function(t){(t=ri(t))&&e.push(t)})),e}(t.hd))},t.Rb=function(){return this.a.I().then((function(t){return new so(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return Uh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=H(e.b,(function(t){return t.uid!=n}));return hh(e,r),Uh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:z(this.b,(function(t){return t.w()}))}}},lh.prototype.start=function(){this.a=this.c,fh(this,!0)},lh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ce(new A("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new Ee((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?us(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.m.get()):r(new A("internal-error"))}))}(t.f,e).then((function(e){return t.b=Hi(e.access_token),t.a=e.refresh_token,ph(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):De(null):De({accessToken:this.b.toString(),refreshToken:this.a})},mh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(gh,Tn),gh.prototype.wa=function(t){this.ya=t,is(this.a,t)},gh.prototype.la=function(){return this.ya},gh.prototype.Ga=function(){return Z(this.$)},gh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},$r(gh.prototype,"providerId","firebase"),(t=gh.prototype).reload=function(){var t=this;return Hh(this,Oh(this).then((function(){return Fh(t).then((function(){return Nh(t)})).then(Ch)})))},t.oc=function(t){return this.I(t).then((function(t){return new Zc(t)}))},t.I=function(t){var e=this;return Hh(this,Oh(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.za&&(Ah(e,t.accessToken),e.dispatchEvent(new uh("tokenChanged"))),Lh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new A("internal-error");Dh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,(function(t){return new yh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)xh(this,e[n]);Lh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new uh("userReloaded",{hd:t}))},t.Lc=function(t){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Hh(this,t.c(this.a,this.uid).then((function(t){return Uh(e,t),n=jh(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Hh(this,Vh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=jh(e,t,"link"),qh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Hh(this,Vh(this,"phone").then((function(){return $c(Th(n),t,e,I(n.qb,n))})))},t.Mc=function(t,e){var n=this;return Hh(this,De().then((function(){return $c(Th(n),t,e,I(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return Hh(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Uh(e,t),e.reload()})))},t.ed=function(t){var e=this;return Hh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Uh(e,t),e.reload()})))},t.Cb=function(t){var e=this;return Hh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Uh(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Oh(this);var e=this;return Hh(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Uh(e,t),Lh(e,"displayName",t.displayName||null),Lh(e,"photoURL",t.photoUrl||null),G(e.providerData,(function(t){"password"===t.providerId&&($r(t,"displayName",e.displayName),$r(t,"photoURL",e.photoURL))})),Nh(e)})).then(Ch))},t.cd=function(t){var e=this;return Hh(this,Fh(this).then((function(n){return Q(Rh(e),t)?function(t,e,n){return ru(t,Ds,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return G(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),G(Rh(e),(function(t){n[t]||Ph(e,t)})),n[Uo.PROVIDER_ID]||$r(e,"phoneNumber",null),Nh(e)})):Nh(e).then((function(){throw new A("no-such-provider")}))})))},t.delete=function(){var t=this;return Hh(this,this.I().then((function(e){return ru(t.a,ks,{idToken:e})})).then((function(){t.dispatchEvent(new uh("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");bh(t,null),wh(t,null),Eh(t,null),t.J=[],t.D=!0,_h(t),$r(t,"refreshToken",null),t.i&&Pc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?I(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?I(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?I(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?I(this.Lb,this):null},t.Ec=function(t){var e=this;return Bh(this,"linkViaPopup",t,(function(){return Vh(e,t.providerId).then((function(){return Nh(e)}))}),!1)},t.Nc=function(t){return Bh(this,"reauthViaPopup",t,(function(){return De()}),!0)},t.Fc=function(t){var e=this;return Kh(this,"linkViaRedirect",t,(function(){return Vh(e,t.providerId)}),!1)},t.Oc=function(t){return Kh(this,"reauthViaRedirect",t,(function(){return De()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Hh(this,this.I().then((function(n){return Is(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=jh(i,t,"link"),qh(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Hh(this,De().then((function(){return lo(Es(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=jh(i,t,"reauthenticate"),Uh(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return Hh(this,this.I().then((function(e){return n=e,void 0===t||vt(t)?{}:Bi(new Ri(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return Hh(this,this.I().then((function(t){return r=t,void 0===e||vt(e)?{}:Bi(new Ri(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Hh(this,t=lo(De(t),n.uid).then((function(t){return e=jh(n,t,"reauthenticate"),Uh(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&gt(t,this.metadata.w()),G(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),gt(t,this.O.w()),t};var Qh={name:"redirectUser",F:"session"};function Xh(t){return ic(t.b,Qh,t.a)}function Yh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=Zh("local"),n=Zh("session"),r=Zh("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=jr(s.localStorage.getItem(r))}catch(t){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get($h,t.a).then((function(t){return t?Zh(t):e}))}))}))})).then((function(e){return t.c=e,Jh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Zh("local"),this.a,I(this.g,this))}function Jh(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,Zh(Zu[n]),t.a));return r.push(ic(t.b,$h,t.a)),function(t){return new Ee((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Oe(t[s],E(o,s),a);else e(i)}))}(r)}Yh.prototype.g=function(){var t=this,e=Zh("local");rl(this,(function(){return De().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Jh(t,"local").then((function(){t.c=e}))}))}))};var $h={name:"persistence",F:"session"};function Zh(t){return{name:"authUser",F:t}}function tl(t,e){return rl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function el(t){return rl(t,(function(){return ic(t.b,t.c,t.a)}))}function nl(t,e,n){return rl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),zh(t||{})}))}))}function rl(t,e){return t.f=t.f.then(e,e),t.f}function il(t){if(this.l=!1,$r(this,"settings",new Yc),$r(this,"app",t),!fl(this).options||!fl(this).options.apiKey)throw new A("invalid-api-key");t=$.SDK_VERSION?Cr($.SDK_VERSION):null,this.a=new Ja(fl(this).options&&fl(this).options.apiKey,R(k),t),this.R=[],this.s=[],this.O=[],this.hb=$.INTERNAL.createSubscribe(I(this.zc,this)),this.X=void 0,this.bc=$.INTERNAL.createSubscribe(I(this.Ac,this)),hl(this,null),this.i=new Yh(fl(this).options.apiKey+":"+fl(this).name),this.D=new Wh(fl(this).options.apiKey+":"+fl(this).name),this.$=ml(this,function(t){var e=fl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Qh,t.a).then((function(t){return t&&e&&(t.authDomain=e),zh(t||{})}))}(t.D,fl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Xh(t.D)}));return ml(t,e)}(t).then((function(){return nl(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return tl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:el(t.i)}))):null})).then((function(e){hl(t,e||null)}));return ml(t,n)}(this)),this.h=ml(this,function(t){return t.$.then((function(){return cl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Zh("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=I(this.Zc,this),this.Ba=I(this.da,this),this.ya=I(this.mc,this),this.za=I(this.wc,this),this.Aa=I(this.xc,this),this.b=null,function(t){var e=fl(t).options.authDomain,n=fl(t).options.apiKey;e&&Pr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Kc(e,n,fl(t).name,t.P),xc(t.b,t),dl(t)&&kh(dl(t)),t.m){kh(t.m);var r=t.m;r.wa(t.la()),bh(r,t),Ih(r=t.m,t.J),Eh(r,t),os((r=t.m).a,t.P),wh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Gc,this),this.u=0,Tn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=qn(this.P.url);t=ti({protocol:t.c,host:t.a,port:t.g,options:ti({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function ol(t){$e.call(this,"languageCodeChanged"),this.h=t}function al(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function sl(t){$e.call(this,"frameworkChanged"),this.f=t}function ul(t){return t.Oa||Ce(new A("auth-domain-config-required"))}function cl(t){if(!Pr())return Ce(new A("operation-not-supported-in-this-environment"));var e=ul(t).then((function(){return t.b.qa()})).then((function(t){return t?ti(t):null}));return ml(t,e)}function hl(t,e){dl(t)&&(function(t,e){Y(t.S,(function(t){return t==e}))}(dl(t),t.Ba),pn(dl(t),"tokenChanged",t.ya),pn(dl(t),"userDeleted",t.za),pn(dl(t),"userInvalidated",t.Aa),_h(dl(t))),e&&(e.S.push(t.Ba),ln(e,"tokenChanged",t.ya),ln(e,"userDeleted",t.za),ln(e,"userInvalidated",t.Aa),0<t.u&&Sh(e)),$r(t,"currentUser",e),e&&(e.wa(t.la()),bh(e,t),Ih(e,t.J),Eh(e,t),os(e.a,t.P),wh(e,t))}function ll(t,e){var n=null,r=null;return ml(t,e.then((function(e){return n=jo(e),r=Ji(e),function(t,e){var n={};return n.apiKey=fl(t).options.apiKey,n.authDomain=fl(t).options.authDomain,n.appName=fl(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new gh(t,e);return n&&(i.ha=n),r&&Ih(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return dl(t)&&e.uid==dl(t).uid?(Mh(dl(t),e),t.da(e)):(hl(t,e),kh(e),t.da(e))})).then((function(){vl(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ih(e.w(),t,I(t.kc,t))),n||e})).then((function(){return ti({user:dl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function fl(t){return t.app}function dl(t){return t.currentUser}function pl(t){return dl(t)&&dl(t)._lat||null}function vl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](pl(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](pl(t))}}function ml(t,e){return t.R.push(e),e.oa((function(){X(t.R,e)})),e}function yl(){}function gl(){this.a={},this.b=1e12}Yh.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Sr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ru()&&"none"!==t)throw n;break;default:if(!xr()&&"none"!==t)throw n}}(t),rl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Jh(n,t)})).then((function(){if(n.c=Zh(t),e)return n.b.set(n.c,e,n.a)})):De()}))},S(il,Tn),S(ol,$e),S(al,$e),S(sl,$e),(t=il.prototype).xb=function(t){return ml(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,is(this.a,this.aa),this.dispatchEvent(new ol(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&wr().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,os(this.a,this.P),this.dispatchEvent(new al(this.P))}},t.Gc=function(t){this.J.push(t),ss(this.a,$.SDK_VERSION?Cr($.SDK_VERSION,this.J):null),this.dispatchEvent(new sl(this.J))},t.Ga=function(){return Z(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:fl(this).options.apiKey,authDomain:fl(this).options.authDomain,appName:fl(this).name,currentUser:dl(this)&&dl(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?I(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return ll(i,ws(i.a,o))}))},t.Xc=function(t){if(!Pr())return Ce(new A("operation-not-supported-in-this-environment"));var e=this,n=Yi(t.providerId),r=qr(),i=null;(!Fr()||Er())&&fl(this).options.authDomain&&t.isOAuthProvider&&(i=gu(fl(this).options.authDomain,fl(this).options.apiKey,fl(this).name,"signInViaPopup",t,null,r,$.SDK_VERSION||null,null,null,this.T(),this.P));var o=yr(i,n&&n.ua,n&&n.ta);return ml(this,n=ul(this).then((function(n){return Fc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new Ee((function(t,n){e.na("signInViaPopup",null,new A("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=jc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&mr(o),t?ti(t):null})).o((function(t){throw o&&mr(o),t})))},t.Yc=function(t){if(!Pr())return Ce(new A("operation-not-supported-in-this-environment"));var e=this;return ml(this,ul(this).then((function(){return function(t){return rl(t,(function(){return t.b.set($h,t.c.F,t.a)}))}(e.i)})).then((function(){return Vc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return cl(this).then((function(e){return t.b&&zc(t.b.b),e})).o((function(e){throw t.b&&zc(t.b.b),e}))},t.dd=function(t){if(!t)return Ce(new A("null-user"));if(this.S!=t.tenantId)return Ce(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=fl(this).options.apiKey,n.authDomain=fl(this).options.authDomain,n.appName=fl(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Za]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new gh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Ih(e,r),Mh(e,t),e}(t,n,e.D,e.Ga());return ml(this,this.h.then((function(){if(fl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return dl(e)&&t.uid==dl(e).uid?(Mh(dl(e),t),e.da(t)):(hl(e,r),kh(r),e.da(r))})).then((function(){vl(e)})))},t.Ab=function(){var t=this;return ml(this,this.h.then((function(){return t.b&&zc(t.b.b),dl(t)?(hl(t,null),el(t.i).then((function(){vl(t)}))):De()})))},t.Zc=function(){var t=this;return nl(this.i,fl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=dl(t)&&e){n=dl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Mh(dl(t),e),dl(t).I();(dl(t)||e)&&(hl(t,e),e&&(kh(e),e.ha=t.D),t.b&&xc(t.b,t),vl(t))}}))},t.da=function(t){return tl(this.i,t)},t.mc=function(){vl(this),this.da(dl(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return ll(e,De(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(dl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.O.push(e),ml(t,t.h.then((function(){!t.l&&Q(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(pl(t)))})))}(this,(function(){t.next(dl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(dl(r)):"function"==typeof t.next&&t.next(dl(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(dl(r)):"function"==typeof t.next&&t.next(dl(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return ml(this,this.h.then((function(){return dl(e)?dl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return ll(e,ru(e.a,Js,{token:t}))})).then((function(t){var n=t.user;return Lh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return ll(n,ru(n.a,$s,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return ll(n,ru(n.a,As,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return ll(e,t.ka(e.a))}))},t.Sc=function(t){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=dl(t);if(e&&e.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ll(t,t.a.zb()).then((function(e){var n=e.user;return Lh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return dl(this)&&dl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&dl(this)&&Sh(dl(this))},t.Pc=function(t){var e=this;G(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&dl(this)&&_h(dl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),ml(this,this.h.then((function(){e.l||Q(e.s,t)&&t(pl(e))})))},t.removeAuthTokenListener=function(t){Y(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Zh("local"),t.a,this.ja),this.b&&(Pc(this.b,this),zc(this.b.b)),Promise.resolve()},t.hc=function(t){return ml(this,function(t,e){return ru(t,Ns,{identifier:e,continueUri:Lr()?fr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Po(t)},t.wb=function(t,e){var n=this;return ml(this,De().then((function(){var t=new Ri(e);if(!t.c)throw new A("argument-error",Li+" must be true when sending sign in link to email");return Bi(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return ml(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return ml(this,this.a.Ra(t).then((function(t){return new ci(t)})))},t.jb=function(t){return ml(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return ml(this,De().then((function(){return void 0===e||vt(e)?{}:Bi(new Ri(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return ml(this,$c(this,t,e,I(this.$a,this)))},t.Vc=function(t,e){var n=this;return ml(this,De().then((function(){var r=e||fr(),i=xo(t,r);if(!(r=Po(r)))throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new A("tenant-id-mismatch");return n.$a(i)})))},yl.prototype.render=function(){},yl.prototype.reset=function(){},yl.prototype.getResponse=function(){},yl.prototype.execute=function(){};var bl=null;function wl(t,e){return(e=Il(e))&&t.a[e]||null}function Il(t){return(t=void 0===t?1e12:t)?t.toString():null}function El(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=he(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():ln(this.f,"click",this.i)}function Tl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Sl(){}function _l(){}gl.prototype.render=function(t,e){return this.a[this.b.toString()]=new El(t,e),this.b++},gl.prototype.reset=function(t){var e=wl(this,t);t=Il(t),e&&t&&(e.delete(),delete this.a[t])},gl.prototype.getResponse=function(t){return(t=wl(this,t))?t.getResponse():null},gl.prototype.execute=function(t){(t=wl(this,t))&&t.execute()},El.prototype.getResponse=function(){return Tl(this),this.b},El.prototype.execute=function(){Tl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},El.prototype.delete=function(){Tl(this),this.g=!0,clearTimeout(this.a),this.a=null,pn(this.f,"click",this.i)},$r(Sl,"FACTOR_ID","phone"),_l.prototype.g=function(){return bl||(bl=new gl),De(bl)},_l.prototype.c=function(){};var Al=null;function Nl(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var kl=new wt(St,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Dl=new Gr(3e4,6e4);Nl.prototype.g=function(t){var e=this;return new Ee((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),Dl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete s[e.a]},De(Ga(kt(kl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Nl.prototype.c=function(){this.b--};var Cl=null;function Ol(t,e,n,r,i,o,a){if($r(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a?(Al||(Al=new _l),a=Al):(Cl||(Cl=new Nl),a=Cl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Pl])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ll],!s.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!he(e)||!this.i&&he(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ja(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Rl];this.a[Rl]=function(t){if(Ml(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Rr(c,s);"function"==typeof e&&e(t)}};var h=this.a[xl];this.a[xl]=function(){if(Ml(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Rr(h,s);"function"==typeof t&&t()}}}var Rl="callback",xl="expired-callback",Pl="sitekey",Ll="size";function Ml(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Fl(t,e){return t.h.push(e),e.oa((function(){X(t.h,e)})),e}function Ul(t){if(t.D)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function Vl(t,e,n){var r=!1;try{this.b=n||$.app()}catch(t){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=$.SDK_VERSION?Cr($.SDK_VERSION,o):null,Ol.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,R(k),r)}function jl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=ql.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=ql[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}(t=Ol.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Fl(this,De().then((function(){if(Lr()&&!Tr())return wr();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,js,{})})).then((function(e){t.a[Pl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Ul(this);var t=this;return Fl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=he(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ce&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Ht(a.name),'"'),a.type){o.push(' type="',Ht(a.type),'"');var s={};gt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=me(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):le(o,a)),2<r.length&&ve(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Ul(this);var t=this;return Fl(this,this.render().then((function(e){return new Ee((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Ul(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ul(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=he(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},S(Vl,Ol);var ql="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Bl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Kl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Gl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function Hl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function zl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Wl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Ql(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Xl(t){return v(t)&&"string"==typeof t.uid}function Yl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Jl(t,e){for(var n in e){var r=e[n].name;t[r]=tf(r,t[n],e[n].j)}}function $l(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,r){jl(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function Zl(t,e,n,r){t[e]=tf(e,n,r)}function tf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return jl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Jl(il.prototype,{jb:{name:"applyActionCode",j:[Bl("code")]},Ra:{name:"checkActionCode",j:[Bl("code")]},nb:{name:"confirmPasswordReset",j:[Bl("code"),Bl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Bl("email"),Bl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Bl("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Bl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Yl(Gl(),Hl(),"nextOrObserver"),Hl("opt_error",!0),Hl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Yl(Gl(),Hl(),"nextOrObserver"),Hl("opt_error",!0),Hl("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Bl("email"),Yl(Gl("opt_actionCodeSettings",!0),zl(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Bl("email"),Gl("actionCodeSettings")]},xb:{name:"setPersistence",j:[Bl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Wl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Wl()]},Tc:{name:"signInWithCustomToken",j:[Bl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Bl("email"),Bl("password")]},Vc:{name:"signInWithEmailLink",j:[Bl("email"),Bl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Bl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Yl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof gh)}},zl(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Bl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Bl("url"),Gl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Bl("code")]}}),$l(il.prototype,{lc:{name:"languageCode",kb:Yl(Bl(),zl(),"languageCode")},ti:{name:"tenantId",kb:Yl(Bl(),zl(),"tenantId")}}),il.Persistence=Zu,il.Persistence.LOCAL="local",il.Persistence.SESSION="session",il.Persistence.NONE="none",Jl(gh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Kl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Kl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Wl()]},qb:{name:"linkWithCredential",j:[Wl()]},Dc:{name:"linkWithPhoneNumber",j:[Bl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Wl()]},tb:{name:"reauthenticateWithCredential",j:[Wl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Bl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Yl(Gl("opt_actionCodeSettings",!0),zl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Bl(null,!0)]},cd:{name:"unlink",j:[Bl("provider")]},Bb:{name:"updateEmail",j:[Bl("email")]},Cb:{name:"updatePassword",j:[Bl("password")]},ed:{name:"updatePhoneNumber",j:[Wl("phone")]},Db:{name:"updateProfile",j:[Gl("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Bl("email"),Yl(Gl("opt_actionCodeSettings",!0),zl(null,!0),"opt_actionCodeSettings",!0)]}}),Jl(gl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(yl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Jl(Ee.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),$l(Yc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Kl("appVerificationDisabledForTesting")}}),Jl(Jc.prototype,{confirm:{name:"confirm",j:[Bl("verificationCode")]}}),Zl(ho,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[go,Oo,Mo,vo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Yl(Bl(),Gl(),"json")]),Zl(Ro,"credential",(function(t,e){return new Co(t,e)}),[Bl("email"),Bl("password")]),Jl(Co.prototype,{w:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(Eo.prototype,{Ca:{name:"addScope",j:[Bl("scope")]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Zl(Eo,"credential",To,[Yl(Bl(),Gl(),"token")]),Zl(Ro,"credentialWithLink",xo,[Bl("email"),Bl("emailLink")]),Jl(So.prototype,{Ca:{name:"addScope",j:[Bl("scope")]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Zl(So,"credential",_o,[Yl(Bl(),Gl(),"token")]),Jl(Ao.prototype,{Ca:{name:"addScope",j:[Bl("scope")]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Zl(Ao,"credential",No,[Yl(Bl(),Yl(Gl(),zl()),"idToken"),Yl(Bl(),zl(),"accessToken",!0)]),Jl(ko.prototype,{Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Zl(ko,"credential",Do,[Yl(Bl(),Gl(),"token"),Bl("secret",!0)]),Jl(Io.prototype,{Ca:{name:"addScope",j:[Bl("scope")]},credential:{name:"credential",j:[Yl(Bl(),Yl(Gl(),zl()),"optionsOrIdToken"),Yl(Bl(),zl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Gl("customOAuthParameters")]}}),Jl(mo.prototype,{w:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(fo.prototype,{w:{name:"toJSON",j:[Bl(null,!0)]}}),Zl(Uo,"credential",Vo,[Bl("verificationId"),Bl("verificationCode")]),Jl(Uo.prototype,{fb:{name:"verifyPhoneNumber",j:[Yl(Bl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Ql(t.session,uo)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Ql(t.session,co)&&Xl(t.multiFactorHint):t.session&&t.multiFactorUid?Ql(t.session,co)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Jl(Lo.prototype,{w:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(A.prototype,{toJSON:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(Qo.prototype,{toJSON:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(Wo.prototype,{toJSON:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(rh.prototype,{toJSON:{name:"toJSON",j:[Bl(null,!0)]}}),Jl(th.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Jl(ch.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Bl("displayName",!0)]},bd:{name:"unenroll",j:[Yl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Xl},Bl(),"multiFactorInfoIdentifier")]}}),Jl(Vl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Zl(Ti,"parseLink",Oi,[Bl("link")]),Zl(Sl,"assertion",(function(t){return new sh(t)}),[Wl("phone")]),function(){if(void 0===$||!$.INTERNAL||!$.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:li,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:hi,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:il,AuthCredential:ho,Error:A};Zl(t,"EmailAuthProvider",Ro,[]),Zl(t,"FacebookAuthProvider",Eo,[]),Zl(t,"GithubAuthProvider",So,[]),Zl(t,"GoogleAuthProvider",Ao,[]),Zl(t,"TwitterAuthProvider",ko,[]),Zl(t,"OAuthProvider",Io,[Bl("providerId")]),Zl(t,"SAMLAuthProvider",wo,[Bl("providerId")]),Zl(t,"PhoneAuthProvider",Uo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof il)}}]),Zl(t,"RecaptchaVerifier",Vl,[Yl(Bl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Gl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof $.app.App)}}]),Zl(t,"ActionCodeURL",Ti,[]),Zl(t,"PhoneMultiFactorGenerator",Sl,[]),$.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new il(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),$.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:I((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:I(t.nc,t),addAuthTokenListener:I(t.cc,t),removeAuthTokenListener:I(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),$.registerVersion("@firebase/auth","0.16.6"),$.INTERNAL.extendNamespace({User:gh})}()}.apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Z=function(t,e){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function tt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var et,nt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},rt=rt||{},it=nt||self;function ot(){}function at(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function st(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ut="closure_uid_"+(1e9*Math.random()>>>0),ct=0;function ht(t,e,n){return t.call.apply(t.bind,arguments)}function lt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ft(t,e,n){return(ft=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ht:lt).apply(null,arguments)}function dt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function pt(){return Date.now()}function vt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function mt(){this.j=this.j,this.i=this.i}mt.prototype.j=!1,mt.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,ut)&&t[ut]||(t[ut]=++ct)}(this)},mt.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var yt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},gt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function bt(t){return Array.prototype.concat.apply([],arguments)}function wt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function It(t){return/^[\s\xa0]*$/.test(t)}var Et,Tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function St(t,e){return-1!=t.indexOf(e)}function _t(t,e){return t<e?-1:t>e?1:0}t:{var At=it.navigator;if(At){var Nt=At.userAgent;if(Nt){Et=Nt;break t}}Et=""}function kt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Dt(t){var e={};for(var n in t)e[n]=t[n];return e}var Ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ot(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ct.length;o++)n=Ct[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Rt(t){return Rt[" "](t),t}Rt[" "]=ot;var xt,Pt,Lt=St(Et,"Opera"),Mt=St(Et,"Trident")||St(Et,"MSIE"),Ft=St(Et,"Edge"),Ut=Ft||Mt,Vt=St(Et,"Gecko")&&!(St(Et.toLowerCase(),"webkit")&&!St(Et,"Edge"))&&!(St(Et,"Trident")||St(Et,"MSIE"))&&!St(Et,"Edge"),jt=St(Et.toLowerCase(),"webkit")&&!St(Et,"Edge");function qt(){var t=it.document;return t?t.documentMode:void 0}t:{var Bt="",Kt=(Pt=Et,Vt?/rv:([^\);]+)(\)|;)/.exec(Pt):Ft?/Edge\/([\d\.]+)/.exec(Pt):Mt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Pt):jt?/WebKit\/(\S+)/.exec(Pt):Lt?/(?:Version)[ \/]?(\S+)/.exec(Pt):void 0);if(Kt&&(Bt=Kt?Kt[1]:""),Mt){var Gt=qt();if(null!=Gt&&Gt>parseFloat(Bt)){xt=String(Gt);break t}}xt=Bt}var Ht,zt={};function Wt(t){return function(t,e){var n=zt;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=Tt(String(xt)).split("."),r=Tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=_t(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||_t(0==a[2].length,0==s[2].length)||_t(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}it.document&&Mt?Ht=qt()||parseInt(xt,10)||void 0:Ht=void 0;var Qt=Ht,Xt=!Mt||9<=Number(Qt),Yt=Mt&&!Wt("9"),Jt=function(){if(!it.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{it.addEventListener("test",ot,e),it.removeEventListener("test",ot,e)}catch(t){}return t}();function $t(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Zt(t,e){if($t.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Vt){t:{try{Rt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:te[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}$t.prototype.b=function(){this.defaultPrevented=!0},vt(Zt,$t);var te={2:"touch",3:"pen",4:"mouse"};Zt.prototype.b=function(){Zt.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Yt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var ee="closure_listenable_"+(1e6*Math.random()|0),ne=0;function re(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ne,this.Y=this.Z=!1}function ie(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function oe(t){this.src=t,this.a={},this.b=0}function ae(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=yt(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ie(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function se(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}oe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=se(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new re(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ue="closure_lm_"+(1e6*Math.random()|0),ce={};function he(t,e,n,r,i){if(r&&r.once)return fe(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)he(t,e[o],n,r,i);return null}return n=we(n),t&&t[ee]?t.va(e,n,st(r)?!!r.capture:!!r,i):le(t,e,n,!1,r,i)}function le(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=st(i)?!!i.capture:!!i;if(a&&!Xt)return null;var s=ge(t);if(s||(t[ue]=s=new oe(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=ye,e=Xt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Jt||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ve(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function fe(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)fe(t,e[o],n,r,i);return null}return n=we(n),t&&t[ee]?t.wa(e,n,st(r)?!!r.capture:!!r,i):le(t,e,n,!0,r,i)}function de(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)de(t,e[o],n,r,i);else r=st(r)?!!r.capture:!!r,n=we(n),t&&t[ee]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=se(o=t.a[e],n,r,i))&&(ie(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=ge(t))&&(e=t.a[e.toString()],t=-1,e&&(t=se(e,n,r,i)),(n=-1<t?e[t]:null)&&pe(n))}function pe(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ee])ae(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ve(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ge(e))?(ae(n,t),0==n.b&&(n.src=null,e[ue]=null)):ie(t)}}}function ve(t){return t in ce?ce[t]:ce[t]="on"+t}function me(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&pe(t),n.call(r,e)}function ye(t,e){if(t.Y)return!0;if(!Xt){if(!e)t:{e=["window","event"];for(var n=it,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return me(t,e=new Zt(e,this))}return me(t,new Zt(e,this))}function ge(t){return(t=t[ue])instanceof oe?t:null}var be="__closure_events_fn_"+(1e9*Math.random()>>>0);function we(t){return"function"==typeof t?t:(t[be]||(t[be]=function(e){return t.handleEvent(e)}),t[be])}function Ie(){mt.call(this),this.c=new oe(this),this.J=this,this.C=null}function Ee(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new $t(e,t);else if(e instanceof $t)e.target=e.target||t;else{var i=e;Ot(e=new $t(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=Te(a,r,!0,e)&&i}if(i=Te(a=e.a=t,r,!0,e)&&i,i=Te(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Te(a=e.a=n[o],r,!1,e)&&i}function Te(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&ae(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}vt(Ie,mt),Ie.prototype[ee]=!0,(et=Ie.prototype).addEventListener=function(t,e,n,r){he(this,t,e,n,r)},et.removeEventListener=function(t,e,n,r){de(this,t,e,n,r)},et.G=function(){if(Ie.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ie(n[r]);delete e.a[t],e.b--}}this.C=null},et.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},et.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Se=it.JSON.stringify;function _e(){this.b=this.a=null}var Ae,Ne=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new De}),(function(t){t.reset()}));function ke(){var t=xe,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function De(){this.next=this.b=this.a=null}function Ce(t){it.setTimeout((function(){throw t}),0)}function Oe(t,e){Ae||function(){var t=it.Promise.resolve(void 0);Ae=function(){t.then(Pe)}}(),Re||(Ae(),Re=!0),xe.add(t,e)}_e.prototype.add=function(t,e){var n=Ne.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},De.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},De.prototype.reset=function(){this.next=this.b=this.a=null};var Re=!1,xe=new _e;function Pe(){for(var t;t=ke();){try{t.a.call(t.b)}catch(t){Ce(t)}var e=Ne;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Re=!1}function Le(t,e){Ie.call(this),this.b=t||1,this.a=e||it,this.f=ft(this.Za,this),this.g=pt()}function Me(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Fe(t,e,n){if("function"==typeof t)n&&(t=ft(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ft(t.handleEvent,t)}return 2147483647<Number(e)?-1:it.setTimeout(t,e||0)}function Ue(t){t.a=Fe((function(){t.a=null,t.c&&(t.c=!1,Ue(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}vt(Le,Ie),(et=Le.prototype).aa=!1,et.M=null,et.Za=function(){if(this.aa){var t=pt()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ee(this,"tick"),this.aa&&(Me(this),this.start()))}},et.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=pt())},et.G=function(){Le.X.G.call(this),Me(this),delete this.a};var Ve=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Z(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Ue(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(it.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(mt);function je(t){mt.call(this),this.b=t,this.a={}}vt(je,mt);var qe=[];function Be(t,e,n,r){Array.isArray(n)||(n&&(qe[0]=n.toString()),n=qe);for(var i=0;i<n.length;i++){var o=he(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Ke(t){kt(t.a,(function(t,e){this.a.hasOwnProperty(e)&&pe(t)}),t),t.a={}}function Ge(){this.a=!0}function He(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Se(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}je.prototype.G=function(){je.X.G.call(this),Ke(this)},je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ge.prototype.info=function(){};var ze={},We=null;function Qe(){return We=We||new Ie}function Xe(t){$t.call(this,ze.Fa,t)}function Ye(t){var e=Qe();Ee(e,new Xe(e,t))}function Je(t,e){$t.call(this,ze.STAT_EVENT,t),this.stat=e}function $e(t){var e=Qe();Ee(e,new Je(e,t))}function Ze(t){$t.call(this,ze.Ga,t)}function tn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return it.setTimeout((function(){t()}),e)}ze.Fa="serverreachability",vt(Xe,$t),ze.STAT_EVENT="statevent",vt(Je,$t),ze.Ga="timingevent",vt(Ze,$t);var en={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},nn={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function rn(){}function on(t){var e;return(e=t.a)||(e=t.a={}),e}function an(){}rn.prototype.a=null;var sn,un={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function cn(){$t.call(this,"d")}function hn(){$t.call(this,"c")}function ln(){}function fn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new je(this),this.P=dn,t=Ut?125:void 0,this.R=new Le(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}vt(cn,$t),vt(hn,$t),vt(ln,rn),sn=new ln;var dn=45e3,pn={},vn={};function mn(t,e,n){t.H=1,t.i=Un(Rn(e)),t.j=n,t.I=!0,yn(t,null)}function yn(t,e){t.u=pt(),wn(t),t.l=Rn(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Jn(n.b,"t",r),t.D=0,t.a=Hr(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ve(ft(t.Ca,t,t.a),t.O)),Be(t.J,t.a,"readystatechange",t.Xa),e=t.B?Dt(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Ye(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");a=2<=l.length&&"type"==l[1]?a+(h+"=")+c+"&":a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function gn(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=bn(t,n);if(i==vn){4==e&&(t.h=4,$e(14),r=!1),He(t.c,t.f,null,"[Incomplete Response]");break}if(i==pn){t.h=4,$e(15),He(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}He(t.c,t.f,i,null),_n(t,i)}4==e&&0==n.length&&(t.h=1,$e(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Fr(e),e.F=!0,$e(11))):(He(t.c,t.f,n,"[Invalid Chunked Response]"),Sn(t),Tn(t))}function bn(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?vn:(n=Number(e.substring(n,r)),isNaN(n)?pn:(r+=1)+n>e.length?vn:(e=e.substr(r,n),t.D=r+n,e))}function wn(t){t.T=pt()+t.P,In(t,t.P)}function In(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=tn(ft(t.Va,t),e)}function En(t){t.o&&(it.clearTimeout(t.o),t.o=null)}function Tn(t){0==t.g.v||t.A||jr(t.g,t)}function Sn(t){En(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Me(t.R),Ke(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function _n(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||ir(n.b,t)))if(n.I=t.N,!t.C&&ir(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Vr(n),kr(n)}Mr(n),$e(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=tn(ft(n.Sa,n),6e3));if(1>=rr(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Br(n,11)}else if((t.C||n.a==t)&&Vr(n),!It(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var h=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=u.b;!l.a&&(St(h,"spdy")||St(h,"quic")||St(h,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(or(l,l.b),l.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Fn(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=pt()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Gr(u,u.C?u.ga:null,u.fa),d.C){ar(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(En(p),wn(p)),u.a=d}else Lr(u);0<n.g.length&&Or(n)}else"stop"!=i[0]&&"close"!=i[0]||Br(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Br(n,7):Nr(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Ye(4)}catch(t){}}function An(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(at(t)||"string"==typeof t)gt(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(at(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(at(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Nn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Nn)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function kn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Dn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Dn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Dn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(et=fn.prototype).setTimeout=function(t){this.P=t},et.Xa=function(t){t=t.target;var e=this.F;e&&3==Tr(t)?e.f():this.Ca(t)},et.Ca=function(t){try{if(t==this.a)t:{var e=Tr(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Ut&&!this.a.$())){this.A||4!=e||7==n||Ye(8==n||0>=r?3:2),En(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!It(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,$e(12),Sn(this),Tn(this);break t}He(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,_n(this,u)}this.I?(gn(this,e,o),Ut&&this.b&&3==e&&(Be(this.J,this.R,"tick",this.Wa),this.R.start())):(He(this.c,this.f,o,null),_n(this,o)),4==e&&Sn(this),this.b&&!this.A&&(4==e?jr(this.g,this):(this.b=!1,wn(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,$e(12)):(this.h=0,$e(13)),Sn(this),Tn(this)}}}catch(t){}},et.Wa=function(){if(this.a){var t=Tr(this.a),e=this.a.$();this.D<e.length&&(En(this),gn(this,t,e),this.b&&4!=t&&wn(this))}},et.cancel=function(){this.A=!0,Sn(this)},et.Va=function(){this.o=null;var t=pt();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Ye(3),$e(17)),Sn(this),this.h=2,Tn(this)):In(this,this.T-t)},(et=Nn.prototype).K=function(){kn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},et.L=function(){return kn(this),this.a.concat()},et.get=function(t,e){return Dn(this.b,t)?this.b[t]:e},et.set=function(t,e){Dn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},et.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Cn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function On(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof On){this.a=void 0!==e?e:t.a,xn(this,t.f),this.j=t.j,Pn(this,t.c),Ln(this,t.h),this.g=t.g,e=t.b;var n=new Wn;n.c=e.c,e.a&&(n.a=new Nn(e.a),n.b=e.b),Mn(this,n),this.i=t.i}else t&&(n=String(t).match(Cn))?(this.a=!!e,xn(this,n[1]||"",!0),this.j=Vn(n[2]||""),Pn(this,n[3]||"",!0),Ln(this,n[4]),this.g=Vn(n[5]||"",!0),Mn(this,n[6]||"",!0),this.i=Vn(n[7]||"")):(this.a=!!e,this.b=new Wn(null,this.a))}function Rn(t){return new On(t)}function xn(t,e,n){t.f=n?Vn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Pn(t,e,n){t.c=n?Vn(e,!0):e}function Ln(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Mn(t,e,n){e instanceof Wn?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xn(this,e),Jn(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=jn(e,Hn)),t.b=new Wn(e,t.a))}function Fn(t,e,n){t.b.set(e,n)}function Un(t){return Fn(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^pt()).toString(36)),t}function Vn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function jn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}On.prototype.toString=function(){var t=[],e=this.f;e&&t.push(jn(e,Bn,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(jn(e,Bn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(jn(n,"/"==n.charAt(0)?Gn:Kn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",jn(n,zn)),t.join("")};var Bn=/[#\/\?@]/g,Kn=/[#\?:]/g,Gn=/[#\?]/g,Hn=/[#\?@]/g,zn=/#/g;function Wn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new Nn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xn(t,e){Qn(t),e=$n(t,e),Dn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Dn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&kn(t)))}function Yn(t,e){return Qn(t),e=$n(t,e),Dn(t.a.b,e)}function Jn(t,e,n){Xn(t,e),0<n.length&&(t.c=null,t.a.set($n(t,e),wt(n)),t.b+=n.length)}function $n(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(et=Wn.prototype).add=function(t,e){Qn(this),this.c=null,t=$n(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},et.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){gt(n,(function(n){t.call(e,n,r,this)}),this)}),this)},et.L=function(){Qn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},et.K=function(t){Qn(this);var e=[];if("string"==typeof t)Yn(this,t)&&(e=bt(e,this.a.get($n(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=bt(e,t[n])}return e},et.set=function(t,e){return Qn(this),this.c=null,Yn(this,t=$n(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},et.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},et.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Zn=function(t,e){this.b=t,this.a=e};function tr(t){this.g=t||er,t=it.PerformanceNavigationTiming?0<(t=it.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(it.ia&&it.ia.ya&&it.ia.ya()&&it.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var er=10;function nr(t){return!!t.b||!!t.a&&t.a.size>=t.f}function rr(t){return t.b?1:t.a?t.a.size:0}function ir(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function or(t,e){t.a?t.a.add(e):t.b=e}function ar(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function sr(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=tt(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return wt(t.c)}function ur(){}function cr(){this.a=new ur}function hr(t,e,n){var r=n||"";try{An(t,(function(t,n){var i=t;st(t)&&(i=Se(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function lr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}tr.prototype.cancel=function(){var t,e;if(this.c=sr(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=tt(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},ur.prototype.stringify=function(t){return it.JSON.stringify(t,void 0)},ur.prototype.parse=function(t){return it.JSON.parse(t,void 0)};var fr=it.JSON.parse;function dr(t){Ie.call(this),this.headers=new Nn,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=pr,this.D=this.F=!1}vt(dr,Ie);var pr="",vr=/^https?$/i,mr=["POST","PUT"];function yr(t){return"content-type"==t.toLowerCase()}function gr(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,br(t),Ir(t)}function br(t){t.u||(t.u=!0,Ee(t,"complete"),Ee(t,"error"))}function wr(t){if(t.b&&void 0!==rt&&(!t.s[1]||4!=Tr(t)||2!=t.W()))if(t.l&&4==Tr(t))Fe(t.za,0,t);else if(Ee(t,"readystatechange"),4==Tr(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Cn)[1]||null;if(!o&&it.self&&it.self.location){var a=it.self.location.protocol;o=a.substr(0,a.length-1)}i=!vr.test(o?o.toLowerCase():"")}e=i}if(e)Ee(t,"complete"),Ee(t,"success");else{t.h=6;try{var s=2<Tr(t)?t.a.statusText:""}catch(n){s=""}t.f=s+" ["+t.W()+"]",br(t)}}finally{Ir(t)}}}function Ir(t,e){if(t.a){Er(t);var n=t.a,r=t.s[0]?ot:null;t.a=null,t.s=null,e||Ee(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Er(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(it.clearTimeout(t.m),t.m=null)}function Tr(t){return t.a?t.a.readyState:0}function Sr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return kt(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Fn(t,e,n))}function _r(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ar(t){this.pa=0,this.g=[],this.c=new Ge,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=_r("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=_r("baseRetryDelayMs",5e3,t),this.Ra=_r("retryDelaySeedMs",1e4,t),this.Ma=_r("forwardChannelMaxRetries",2,t),this.ma=_r("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new tr(t&&t.concurrentRequestLimit),this.ka=new cr,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Nr(t){if(Dr(t),3==t.v){var e=t.R++,n=Rn(t.B);Fn(n,"SID",t.J),Fn(n,"RID",e),Fn(n,"TYPE","terminate"),xr(t,n),(e=new fn(t,t.c,e,void 0)).H=2,e.i=Un(Rn(n)),n=!1,it.navigator&&it.navigator.sendBeacon&&(n=it.navigator.sendBeacon(e.i.toString(),"")),!n&&it.Image&&((new Image).src=e.i,n=!0),n||(e.a=Hr(e.g,null),e.a.ba(e.i)),e.u=pt(),wn(e)}Kr(t)}function kr(t){t.a&&(Fr(t),t.a.cancel(),t.a=null)}function Dr(t){kr(t),t.j&&(it.clearTimeout(t.j),t.j=null),Vr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&it.clearTimeout(t.h),t.h=null)}function Cr(t,e){t.g.push(new Zn(t.Oa++,e)),3==t.v&&Or(t)}function Or(t){nr(t.b)||t.h||(t.h=!0,Oe(t.Ba,t),t.u=0)}function Rr(t,e){var n;n=e?e.f:t.R++;var r=Rn(t.B);Fn(r,"SID",t.J),Fn(r,"RID",n),Fn(r,"AID",t.P),xr(t,r),t.i&&t.l&&Sr(r,t.i,t.l),n=new fn(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Pr(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),or(t.b,n),mn(n,r,e)}function xr(t,e){t.f&&An({},(function(t,n){Fn(e,n,t)}))}function Pr(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ft(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{hr(h,a,"req"+c+"_")}catch(t){r&&r(h)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Lr(t){t.a||t.j||(t.T=1,Oe(t.Aa,t),t.o=0)}function Mr(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=tn(ft(t.Aa,t),qr(t,t.o)),t.o++,0))}function Fr(t){null!=t.s&&(it.clearTimeout(t.s),t.s=null)}function Ur(t){t.a=new fn(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Rn(t.la);Fn(e,"RID","rpc"),Fn(e,"SID",t.J),Fn(e,"CI",t.H?"0":"1"),Fn(e,"AID",t.P),xr(t,e),Fn(e,"TYPE","xmlhttp"),t.i&&t.l&&Sr(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Un(Rn(e)),n.j=null,n.I=!0,yn(n,t)}function Vr(t){null!=t.m&&(it.clearTimeout(t.m),t.m=null)}function jr(t,e){var n=null;if(t.a==e){Vr(t),Fr(t),t.a=null;var r=2}else{if(!ir(t.b,e))return;n=e.s,ar(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=pt()-e.u;var i=t.u;Ee(r=Qe(),new Ze(r,n,e,i)),Or(t)}else Lr(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(rr(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=tn(ft(t.Ba,t,e),qr(t,t.u)),t.u++,0)))}(t,e)||2==r&&Mr(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Br(t,5);break;case 4:Br(t,10);break;case 3:Br(t,6);break;default:Br(t,2)}}function qr(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Br(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ft(t.Ya,t);n||(n=new On("//www.google.com/images/cleardot.gif"),it.location&&"http"==it.location.protocol||xn(n,"https"),Un(n)),function(t,e){var n=new Ge;if(it.Image){var r=new Image;r.onload=dt(lr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=dt(lr,n,r,"TestLoadImage: error",!1,e),r.onabort=dt(lr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=dt(lr,n,r,"TestLoadImage: timeout",!1,e),it.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else $e(2);t.v=0,t.f&&t.f.ra(e),Kr(t),Dr(t)}function Kr(t){t.v=0,t.I=-1,t.f&&(0==sr(t.b).length&&0==t.g.length||(t.b.c.length=0,wt(t.g),t.g.length=0),t.f.qa())}function Gr(t,e,n){var r=function(t){return t instanceof On?Rn(t):new On(t,void 0)}(n);if(""!=r.c)e&&Pn(r,e+"."+r.c),Ln(r,r.h);else{var i=it.location;r=function(t,e,n,r){var i=new On(null,void 0);return t&&xn(i,t),e&&Pn(i,e),n&&Ln(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&kt(t.V,(function(t,e){Fn(r,e,t)})),e=t.A,n=t.na,e&&n&&Fn(r,e,n),Fn(r,"VER",t.ha),xr(t,r),r}function Hr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dr(t.Na)).F=t.C,e}function zr(){}function Wr(){if(Mt&&!(10<=Number(Qt)))throw Error("Environmental error: no available transport.")}function Qr(t,e){Ie.call(this),this.a=new Ar(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!It(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!It(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Jr(this)}function Xr(t){cn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Yr(){hn.call(this),this.status=1}function Jr(t){this.a=t}(et=dr.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?on(this.H):on(sn),this.a.onreadystatechange=ft(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void gr(this,t)}t=n||"";var i=new Nn(this.headers);r&&An(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=yr,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=it.FormData&&t instanceof it.FormData,!(0<=yt(mr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Er(this),0<this.o&&((this.D=function(t){return Mt&&Wt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ft(this.xa,this)):this.m=Fe(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){gr(this,t)}},et.xa=function(){void 0!==rt&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ee(this,"timeout"),this.abort(8))},et.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Ee(this,"complete"),Ee(this,"abort"),Ir(this))},et.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ir(this,!0)),dr.X.G.call(this)},et.za=function(){this.j||(this.A||this.l||this.g?wr(this):this.Ua())},et.Ua=function(){wr(this)},et.W=function(){try{return 2<Tr(this)?this.a.status:-1}catch(t){return-1}},et.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},et.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),fr(e)}},et.ua=function(){return this.h},et.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(et=Ar.prototype).ha=8,et.v=1,et.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new fn(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Ot(r=Dt(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Pr(this,n,e),Fn(i=Rn(this.B),"RID",t),Fn(i,"CVER",22),this.A&&Fn(i,"X-HTTP-Session-Id",this.A),xr(this,i),this.i&&r&&Sr(i,this.i,r),or(this.b,n),this.Ia&&Fn(i,"TYPE","init"),this.da?(Fn(i,"$req",e),Fn(i,"SID","null"),n.U=!0,mn(n,i,null)):mn(n,i,e),this.v=2}}else 3==this.v&&(t?Rr(this,t):0==this.g.length||nr(this.b)||Rr(this))},et.Aa=function(){if(this.j=null,Ur(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=tn(ft(this.Ta,this),t)}},et.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,$e(10),kr(this),Ur(this))},et.Sa=function(){null!=this.m&&(this.m=null,kr(this),Mr(this),$e(19))},et.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),$e(2)):(this.c.info("Failed to ping google.com"),$e(1))},(et=zr.prototype).ta=function(){},et.sa=function(){},et.ra=function(){},et.qa=function(){},et.Ja=function(){},Wr.prototype.a=function(t,e){return new Qr(t,e)},vt(Qr,Ie),Qr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;$e(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Gr(t,null,t.fa),Or(t)},Qr.prototype.close=function(){Nr(this.a)},Qr.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Cr(this.a,e)}else this.l?((e={}).__data__=Se(t),Cr(this.a,e)):Cr(this.a,t)},Qr.prototype.G=function(){this.a.f=null,delete this.f,Nr(this.a),delete this.a,Qr.X.G.call(this)},vt(Xr,cn),vt(Yr,hn),vt(Jr,zr),Jr.prototype.ta=function(){Ee(this.a,"a")},Jr.prototype.sa=function(t){Ee(this.a,new Xr(t))},Jr.prototype.ra=function(t){Ee(this.a,new Yr(t))},Jr.prototype.qa=function(){Ee(this.a,"b")},Wr.prototype.createWebChannel=Wr.prototype.a,Qr.prototype.send=Qr.prototype.h,Qr.prototype.open=Qr.prototype.g,Qr.prototype.close=Qr.prototype.close,en.NO_ERROR=0,en.TIMEOUT=8,en.HTTP_ERROR=6,nn.COMPLETE="complete",an.EventType=un,un.OPEN="a",un.CLOSE="b",un.ERROR="c",un.MESSAGE="d",Ie.prototype.listen=Ie.prototype.va,dr.prototype.listenOnce=dr.prototype.wa,dr.prototype.getLastError=dr.prototype.Qa,dr.prototype.getLastErrorCode=dr.prototype.ua,dr.prototype.getStatus=dr.prototype.W,dr.prototype.getResponseJson=dr.prototype.Pa,dr.prototype.getResponseText=dr.prototype.$,dr.prototype.send=dr.prototype.ba;var $r=en,Zr=nn,ti=ze,ei=10,ni=11,ri=an,ii=dr,oi=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();oi.o=-1;var ai={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},si=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return r(e,t),e}(Error),ui=new F("@firebase/firestore");function ci(){return ui.logLevel}function hi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ui.logLevel<=C.DEBUG){var r=e.map(di);ui.debug.apply(ui,c(["Firestore (8.6.2): "+t],r))}}function li(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ui.logLevel<=C.ERROR){var r=e.map(di);ui.error.apply(ui,c(["Firestore (8.6.2): "+t],r))}}function fi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ui.logLevel<=C.WARN){var r=e.map(di);ui.warn.apply(ui,c(["Firestore (8.6.2): "+t],r))}}function di(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function pi(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.2) INTERNAL ASSERTION FAILED: "+t;throw li(e),new Error(e)}function vi(t,e){t||pi()}function mi(t,e){return t}function yi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var gi=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=yi(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function bi(t,e){return t<e?-1:t>e?1:0}function wi(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ii(t){return t+"\0"}var Ei=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new si(ai.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new si(ai.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new si(ai.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new si(ai.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?bi(this.nanoseconds,t.nanoseconds):bi(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ti=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Ei(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Si(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _i(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ai(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ni=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&pi(),void 0===n?n=t.length-e:n>t.length-e&&pi(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ki=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new si(ai.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Ni),Di=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ci=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Di.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new si(ai.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new si(ai.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new si(ai.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new si(ai.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Ni),Oi=function(){function t(t){this.fields=t,t.sort(Ci.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return wi(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Ri=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return bi(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Ri.EMPTY_BYTE_STRING=new Ri("");var xi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(t){if(vi(!!t),"string"==typeof t){var e=0,n=xi.exec(t);if(vi(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Li(t.seconds),nanos:Li(t.nanos)}}function Li(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Mi(t){return"string"==typeof t?Ri.fromBase64String(t):Ri.fromUint8Array(t)}function Fi(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ui(t){var e=t.mapValue.fields.__previous_value__;return Fi(e)?Ui(e):e}function Vi(t){var e=Pi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ei(e.seconds,e.nanos)}function ji(t){return null==t}function qi(t){return 0===t&&1/t==-1/0}function Bi(t){return"number"==typeof t&&Number.isInteger(t)&&!qi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ki=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(ki.fromString(e))},t.fromName=function(e){return new t(ki.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ki.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return ki.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new ki(e.slice()))},t}();function Gi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fi(t)?4:10:pi()}function Hi(t,e){var n=Gi(t);if(n!==Gi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vi(t).isEqual(Vi(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Pi(t.timestampValue),r=Pi(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Mi(t.bytesValue).isEqual(Mi(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Li(t.geoPointValue.latitude)===Li(e.geoPointValue.latitude)&&Li(t.geoPointValue.longitude)===Li(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Li(t.integerValue)===Li(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Li(t.doubleValue),r=Li(e.doubleValue);return n===r?qi(n)===qi(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return wi(t.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Si(n)!==Si(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Hi(n[i],r[i])))return!1;return!0}(t,e);default:return pi()}}function zi(t,e){return void 0!==(t.values||[]).find((function(t){return Hi(t,e)}))}function Wi(t,e){var n=Gi(t),r=Gi(e);if(n!==r)return bi(n,r);switch(n){case 0:return 0;case 1:return bi(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Li(t.integerValue||t.doubleValue),r=Li(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Qi(t.timestampValue,e.timestampValue);case 4:return Qi(Vi(t),Vi(e));case 5:return bi(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Mi(t),r=Mi(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=bi(n[i],r[i]);if(0!==o)return o}return bi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=bi(Li(t.latitude),Li(e.latitude));return 0!==n?n:bi(Li(t.longitude),Li(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Wi(n[i],r[i]);if(o)return o}return bi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=bi(r[a],o[a]);if(0!==s)return s;var u=Wi(n[r[a]],i[o[a]]);if(0!==u)return u}return bi(r.length,o.length)}(t.mapValue,e.mapValue);default:throw pi()}}function Qi(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return bi(t,e);var n=Pi(t),r=Pi(e),i=bi(n.seconds,r.seconds);return 0!==i?i:bi(n.nanos,r.nanos)}function Xi(t){return Yi(t)}function Yi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Pi(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Mi(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ki.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Yi(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Yi(t.fields[o])}return e+"}"}(t.mapValue):pi();var e,n}function Ji(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function $i(t){return!!t&&"integerValue"in t}function Zi(t){return!!t&&"arrayValue"in t}function to(t){return!!t&&"nullValue"in t}function eo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function no(t){return!!t&&"mapValue"in t}var ro=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(Ci.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach((function(t,n){t?e.set(n,t):e.delete(n)}))},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return Hi(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Gi(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),a=no(o)?Object.assign({},o.mapValue.fields):{};return n.forEach((function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(a[n]=o,i=!0)}else null!==t?(a[n]=t,i=!0):a.hasOwnProperty(n)&&(delete a[n],i=!0)})),i?{mapValue:{fields:a}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(Ci.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!no(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function io(t){var e=[];return _i(t.fields||{},(function(t,n){var r=new Ci([t]);if(no(n)){var i=io(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new Oi(e)}var oo=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Ti.min(),ro.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,ro.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,ro.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=ro.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=ro.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),ao=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function so(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new ao(t,e,n,r,i,o,a)}function uo(t){var e=mi(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Xi(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),ji(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Eo(e.startAt)),e.endAt&&(n+="|ub:",n+=Eo(e.endAt)),e.h=n}return e.h}function co(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!So(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Hi(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ao(t.startAt,e.startAt)&&Ao(t.endAt,e.endAt)}function ho(t){return Ki.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var lo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return r(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new fo(t,n,r):"array-contains"===n?new yo(t,r):"in"===n?new go(t,r):"not-in"===n?new bo(t,r):"array-contains-any"===n?new wo(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new po(t,n):new vo(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Wi(e,this.value)):null!==e&&Gi(this.value)===Gi(e)&&this.m(Wi(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return pi()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),fo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ki.fromName(r.referenceValue),i}return r(e,t),e.prototype.matches=function(t){var e=Ki.comparator(t.key,this.key);return this.m(e)},e}(lo),po=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=mo(0,n),r}return r(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(lo),vo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=mo(0,n),r}return r(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(lo);function mo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Ki.fromName(t.referenceValue)}))}var yo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return r(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Zi(e)&&zi(e.arrayValue,this.value)},e}(lo),go=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return r(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&zi(this.value.arrayValue,e)},e}(lo),bo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return r(e,t),e.prototype.matches=function(t){if(zi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!zi(this.value.arrayValue,e)},e}(lo),wo=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return r(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Zi(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return zi(e.value.arrayValue,t)}))},e}(lo),Io=function(t,e){this.position=t,this.before=e};function Eo(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Xi(t)})).join(",")}var To=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function So(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function _o(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?Ki.comparator(Ki.fromName(a.referenceValue),n.key):Wi(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ao(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Hi(t.position[n],e.position[n]))return!1;return!0}var No=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function ko(t,e,n,r,i,o,a,s){return new No(t,e,n,r,i,o,a,s)}function Do(t){return new No(t)}function Co(t){return!ji(t.limit)&&"F"===t.limitType}function Oo(t){return!ji(t.limit)&&"L"===t.limitType}function Ro(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function xo(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Po(t){return null!==t.collectionGroup}function Lo(t){var e=mi(t);if(null===e.p){e.p=[];var n=xo(e),r=Ro(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new To(n)),e.p.push(new To(Ci.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new To(Ci.keyField(),u))}}}return e.p}function Mo(t){var e=mi(t);if(!e.T)if("F"===e.limitType)e.T=so(e.path,e.collectionGroup,Lo(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Lo(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new To(o.field,a))}var s=e.endAt?new Io(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Io(e.startAt.position,!e.startAt.before):null;e.T=so(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function Fo(t,e,n){return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uo(t,e){return co(Mo(t),Mo(e))&&t.limitType===e.limitType}function Vo(t){return uo(Mo(t))+"|lt:"+t.limitType}function jo(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Xi(e.value);var e})).join(", ")+"]"),ji(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Eo(t.startAt)),t.endAt&&(e+=", endAt: "+Eo(t.endAt)),"Target("+e+")"}(Mo(t))+"; limitType="+t.limitType+")"}function qo(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ki.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!_o(t.startAt,Lo(t),e)||t.endAt&&_o(t.endAt,Lo(t),e))}(t,e)}function Bo(t){return function(e,n){for(var r=!1,i=0,o=Lo(t);i<o.length;i++){var a=o[i],s=Ko(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Ko(t,e,n){var r=t.field.isKeyField()?Ki.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Wi(r,i):pi()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pi()}}function Go(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qi(e)?"-0":e}}function Ho(t){return{integerValue:""+t}}function zo(t,e){return Bi(e)?Ho(e):Go(t,e)}var Wo=function(){this._=void 0};function Qo(t,e,n){return t instanceof Jo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof $o?Zo(t,e):t instanceof ta?ea(t,e):function(t,e){var n=Yo(t,e),r=ra(n)+ra(t.A);return $i(n)&&$i(t.A)?Ho(r):Go(t.R,r)}(t,e)}function Xo(t,e,n){return t instanceof $o?Zo(t,e):t instanceof ta?ea(t,e):n}function Yo(t,e){return t instanceof na?$i(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Jo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(Wo),$o=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return r(e,t),e}(Wo);function Zo(t,e){for(var n=ia(e),r=function(t){n.some((function(e){return Hi(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ta=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return r(e,t),e}(Wo);function ea(t,e){for(var n=ia(e),r=function(t){n=n.filter((function(e){return!Hi(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var na=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return r(e,t),e}(Wo);function ra(t){return Li(t.integerValue||t.doubleValue)}function ia(t){return Zi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var oa=function(t,e){this.field=t,this.transform=e},aa=function(t,e){this.version=t,this.transformResults=e},sa=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ua(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ca=function(){};function ha(t,e,n){t instanceof va?function(t,e,n){var r=t.value.clone(),i=ga(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ma?function(t,e,n){if(ua(t.precondition,e)){var r=ga(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(ya(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function la(t,e,n){t instanceof va?function(t,e,n){if(ua(t.precondition,e)){var r=t.value.clone(),i=ba(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(pa(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ma?function(t,e,n){if(ua(t.precondition,e)){var r=ba(t.fieldTransforms,n,e),i=e.data;i.setAll(ya(t)),i.setAll(r),e.convertToFoundDocument(pa(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){ua(t.precondition,e)&&e.convertToNoDocument(Ti.min())}(t,e)}function fa(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Yo(o.transform,a||null);null!=s&&(null==n&&(n=ro.empty()),n.set(o.field,s))}return n||null}function da(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&wi(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof $o&&e instanceof $o||t instanceof ta&&e instanceof ta?wi(t.elements,e.elements,Hi):t instanceof na&&e instanceof na?Hi(t.A,e.A):t instanceof Jo&&e instanceof Jo}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function pa(t){return t.isFoundDocument()?t.version:Ti.min()}var va=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return r(e,t),e}(ca),ma=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return r(e,t),e}(ca);function ya(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function ga(t,e,n){var r=new Map;vi(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Xo(a,s,n[i]))}return r}function ba(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Qo(s,u,e))}return r}var wa,Ia,Ea=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return r(e,t),e}(ca),Ta=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return r(e,t),e}(ca),Sa=function(t){this.count=t};function _a(t){switch(t){case ai.OK:return pi();case ai.CANCELLED:case ai.UNKNOWN:case ai.DEADLINE_EXCEEDED:case ai.RESOURCE_EXHAUSTED:case ai.INTERNAL:case ai.UNAVAILABLE:case ai.UNAUTHENTICATED:return!1;case ai.INVALID_ARGUMENT:case ai.NOT_FOUND:case ai.ALREADY_EXISTS:case ai.PERMISSION_DENIED:case ai.FAILED_PRECONDITION:case ai.ABORTED:case ai.OUT_OF_RANGE:case ai.UNIMPLEMENTED:case ai.DATA_LOSS:return!0;default:return pi()}}function Aa(t){if(void 0===t)return li("GRPC error has no .code"),ai.UNKNOWN;switch(t){case wa.OK:return ai.OK;case wa.CANCELLED:return ai.CANCELLED;case wa.UNKNOWN:return ai.UNKNOWN;case wa.DEADLINE_EXCEEDED:return ai.DEADLINE_EXCEEDED;case wa.RESOURCE_EXHAUSTED:return ai.RESOURCE_EXHAUSTED;case wa.INTERNAL:return ai.INTERNAL;case wa.UNAVAILABLE:return ai.UNAVAILABLE;case wa.UNAUTHENTICATED:return ai.UNAUTHENTICATED;case wa.INVALID_ARGUMENT:return ai.INVALID_ARGUMENT;case wa.NOT_FOUND:return ai.NOT_FOUND;case wa.ALREADY_EXISTS:return ai.ALREADY_EXISTS;case wa.PERMISSION_DENIED:return ai.PERMISSION_DENIED;case wa.FAILED_PRECONDITION:return ai.FAILED_PRECONDITION;case wa.ABORTED:return ai.ABORTED;case wa.OUT_OF_RANGE:return ai.OUT_OF_RANGE;case wa.UNIMPLEMENTED:return ai.UNIMPLEMENTED;case wa.DATA_LOSS:return ai.DATA_LOSS;default:return pi()}}(Ia=wa||(wa={}))[Ia.OK=0]="OK",Ia[Ia.CANCELLED=1]="CANCELLED",Ia[Ia.UNKNOWN=2]="UNKNOWN",Ia[Ia.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ia[Ia.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ia[Ia.NOT_FOUND=5]="NOT_FOUND",Ia[Ia.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ia[Ia.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ia[Ia.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ia[Ia.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ia[Ia.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ia[Ia.ABORTED=10]="ABORTED",Ia[Ia.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ia[Ia.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ia[Ia.INTERNAL=13]="INTERNAL",Ia[Ia.UNAVAILABLE=14]="UNAVAILABLE",Ia[Ia.DATA_LOSS=15]="DATA_LOSS";var Na=function(){function t(t,e){this.comparator=t,this.root=e||Da.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Da.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Da.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new ka(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new ka(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new ka(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new ka(this.root,t,this.comparator,!0)},t}(),ka=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Da=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw pi();if(this.right.isRed())throw pi();var t=this.left.check();if(t!==this.right.check())throw pi();return t+(this.isRed()?0:1)},t}();Da.EMPTY=null,Da.RED=!0,Da.BLACK=!1,Da.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw pi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw pi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw pi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw pi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw pi()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Da(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ca=function(){function t(t){this.comparator=t,this.data=new Na(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Oa(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Oa(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Oa=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Ra=new Na(Ki.comparator);function xa(){return Ra}var Pa=new Na(Ki.comparator);function La(){return Pa}var Ma=new Na(Ki.comparator);function Fa(){return Ma}var Ua=new Ca(Ki.comparator);function Va(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ua,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ja=new Ca(bi);function qa(){return ja}var Ba=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Ka.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Ti.min(),r,qa(),xa(),Va())},t}(),Ka=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Ri.EMPTY_BYTE_STRING,n,Va(),Va(),Va())},t}(),Ga=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Ha=function(t,e){this.targetId=t,this.V=e},za=function(t,e,n,r){void 0===n&&(n=Ri.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Wa=function(){function t(){this.S=0,this.D=Ya(),this.C=Ri.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Va(),e=Va(),n=Va();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:pi()}})),new Ka(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Ya()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Qa=function(){function t(t){this.W=t,this.G=new Map,this.H=xa(),this.J=Xa(),this.Y=new Ca(bi)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:pi()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(ho(i))if(0===n){var o=new Ki(i.path);this.tt(e,o,oo.newNoDocument(o,Ti.min()))}else vi(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.at=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&ho(o.target)){var a=new Ki(o.target.path);null!==e.H.get(a)||e.ut(i,a)||e.tt(i,a,oo.newNoDocument(a,t))}r.O&&(n.set(i,r.M()),r.L())}}));var r=Va();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Ba(t,n,this.Y,this.H,r);return this.H=xa(),this.J=Xa(),this.Y=new Ca(bi),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.ut(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.ut(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Wa,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Ca(bi),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||hi("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Wa),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.ut=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Xa(){return new Na(Ki.comparator)}function Ya(){return new Na(Ki.comparator)}var Ja={asc:"ASCENDING",desc:"DESCENDING"},$a={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Za=function(t,e){this.databaseId=t,this.I=e};function ts(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function es(t,e){return t.I?e.toBase64():e.toUint8Array()}function ns(t,e){return ts(t,e.toTimestamp())}function rs(t){return vi(!!t),Ti.fromTimestamp(function(t){var e=Pi(t);return new Ei(e.seconds,e.nanos)}(t))}function is(t,e){return function(t){return new ki(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function os(t){var e=ki.fromString(t);return vi(Ds(e)),e}function as(t,e){return is(t.databaseId,e.path)}function ss(t,e){var n=os(e);if(n.get(1)!==t.databaseId.projectId)throw new si(ai.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new si(ai.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ki(ls(n))}function us(t,e){return is(t.databaseId,e)}function cs(t){var e=os(t);return 4===e.length?ki.emptyPath():ls(e)}function hs(t){return new ki(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ls(t){return vi(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function fs(t,e,n){return{name:as(t,e),fields:n.toProto().mapValue.fields}}function ds(t,e,n){var r=ss(t,e.name),i=rs(e.updateTime),o=new ro({mapValue:{fields:e.fields}}),a=oo.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function ps(t,e){var n;if(e instanceof va)n={update:fs(t,e.key,e.value)};else if(e instanceof Ea)n={delete:as(t,e.key)};else if(e instanceof ma)n={update:fs(t,e.key,e.data),updateMask:ks(e.fieldMask)};else{if(!(e instanceof Ta))return pi();n={verify:as(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Jo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $o)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ta)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof na)return{fieldPath:e.field.canonicalString(),increment:n.A};throw pi()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ns(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:pi()}(t,e.precondition)),n}function vs(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?sa.updateTime(rs(t.updateTime)):void 0!==t.exists?sa.exists(t.exists):sa.none()}(e.currentDocument):sa.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)vi("REQUEST_TIME"===e.setToServerValue),n=new Jo;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new $o(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new ta(i)}else"increment"in e?n=new na(t,e.increment):pi();var o=Ci.fromServerFormat(e.fieldPath);return new oa(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=ss(t,e.update.name),o=new ro({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new Oi(e.map((function(t){return Ci.fromServerFormat(t)})))}(e.updateMask);return new ma(i,o,a,n,r)}return new va(i,o,n,r)}if(e.delete){var s=ss(t,e.delete);return new Ea(s,n)}if(e.verify){var u=ss(t,e.verify);return new Ta(u,n)}return pi()}function ms(t,e){return{documents:[us(t,e.path)]}}function ys(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=us(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=us(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(eo(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NAN"}};if(to(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(eo(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NOT_NAN"}};if(to(t.value))return{unaryFilter:{field:Ss(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ss(t.field),op:Ts(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Ss(t.field),direction:Es(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||ji(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=ws(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ws(e.endAt)),n}function gs(t){var e=cs(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){vi(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=bs(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new To(_s(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ji(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Is(n.startAt));var h=null;return n.endAt&&(h=Is(n.endAt)),ko(e,i,s,a,u,"F",c,h)}function bs(t){return t?void 0!==t.unaryFilter?[Ns(t)]:void 0!==t.fieldFilter?[As(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return bs(t)})).reduce((function(t,e){return t.concat(e)})):pi():[]}function ws(t){return{before:t.before,values:t.position}}function Is(t){var e=!!t.before,n=t.values||[];return new Io(n,e)}function Es(t){return Ja[t]}function Ts(t){return $a[t]}function Ss(t){return{fieldPath:t.canonicalString()}}function _s(t){return Ci.fromServerFormat(t.fieldPath)}function As(t){return lo.create(_s(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return pi()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ns(t){switch(t.unaryFilter.op){case"IS_NAN":var e=_s(t.unaryFilter.field);return lo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=_s(t.unaryFilter.field);return lo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=_s(t.unaryFilter.field);return lo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=_s(t.unaryFilter.field);return lo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return pi()}}function ks(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Ds(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Cs(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Rs(e)),e=Os(t.get(n),e);return Rs(e)}function Os(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Rs(t){return t+""}function xs(t){var e=t.length;if(vi(e>=2),2===e)return vi(""===t.charAt(0)&&""===t.charAt(1)),ki.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&pi(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:pi()}o=a+2}return new ki(r)}var Ps=function(t,e){this.seconds=t,this.nanoseconds=e},Ls=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Ls.store="owner",Ls.key="owner";var Ms=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Ms.store="mutationQueues",Ms.keyPath="userId";var Fs=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Fs.store="mutations",Fs.keyPath="batchId",Fs.userMutationsIndex="userMutationsIndex",Fs.userMutationsKeyPath=["userId","batchId"];var Us=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Cs(e)]},t.key=function(t,e,n){return[t,Cs(e),n]},t}();Us.store="documentMutations",Us.PLACEHOLDER=new Us;var Vs=function(t,e){this.path=t,this.readTime=e},js=function(t,e){this.path=t,this.version=e},qs=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};qs.store="remoteDocuments",qs.readTimeIndex="readTimeIndex",qs.readTimeIndexPath="readTime",qs.collectionReadTimeIndex="collectionReadTimeIndex",qs.collectionReadTimeIndexPath=["parentPath","readTime"];var Bs=function(t){this.byteSize=t};Bs.store="remoteDocumentGlobal",Bs.key="remoteDocumentGlobalKey";var Ks=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Ks.store="targets",Ks.keyPath="targetId",Ks.queryTargetsIndexName="queryTargetsIndex",Ks.queryTargetsKeyPath=["canonicalId","targetId"];var Gs=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Gs.store="targetDocuments",Gs.keyPath=["targetId","path"],Gs.documentTargetsIndex="documentTargetsIndex",Gs.documentTargetsKeyPath=["path","targetId"];var Hs=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Hs.key="targetGlobalKey",Hs.store="targetGlobal";var zs=function(t,e){this.collectionId=t,this.parent=e};zs.store="collectionParents",zs.keyPath=["collectionId","parent"];var Ws=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ws.store="clientMetadata",Ws.keyPath="clientId";var Qs=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Qs.store="bundles",Qs.keyPath="bundleId";var Xs=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Xs.store="namedQueries",Xs.keyPath="name";var Ys=c(c([],c(c([],c(c([],c(c([],[Ms.store,Fs.store,Us.store,qs.store,Ks.store,Ls.store,Hs.store,Gs.store]),[Ws.store])),[Bs.store])),[zs.store])),[Qs.store,Xs.store]),Js="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$s=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Zs=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},tu=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&pi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),eu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Zs,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new iu(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=cu(e.target.error);n.ft.reject(new iu(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new iu(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(hi("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new au(e)},t}(),nu=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(d())&&li("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return hi("SimpleDb","Removing database:",t),su(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=d(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return o(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(hi("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new iu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new si(ai.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new iu(t,n))},i.onupgradeneeded=function(t){hi("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){hi("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return o(this,void 0,void 0,(function(){var i,o,s,u,c;return a(this,(function(h){switch(h.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,c,h,l;return a(this,(function(a){switch(a.label){case 0:++o,a.label=1;case 1:return a.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=a.sent(),e=eu.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),tu.reject(t)})).toPromise(),c={},s.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(a.sent(),s),c)];case 4:return h=a.sent(),l="FirebaseError"!==h.name&&o<3,hi("SimpleDb","Transaction failed with error:",h.message,"Retrying:",l),u.close(),l?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ru=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return su(this.Pt.delete())},t}(),iu=function(t){function e(e,n){var r=this;return(r=t.call(this,ai.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return r(e,t),e}(si);function ou(t){return"IndexedDbTransactionError"===t.name}var au=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(hi("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(hi("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),su(n)},t.prototype.add=function(t){return hi("SimpleDb","ADD",this.store.name,t,t),su(this.store.add(t))},t.prototype.get=function(t){var e=this;return su(this.store.get(t)).next((function(n){return void 0===n&&(n=null),hi("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return hi("SimpleDb","DELETE",this.store.name,t),su(this.store.delete(t))},t.prototype.count=function(){return hi("SimpleDb","COUNT",this.store.name),su(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){hi("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new tu((function(n,r){e.onerror=function(t){var e=cu(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new tu((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ru(i),a=e(i.primaryKey,i.value,o);if(a instanceof tu){var s=a.catch((function(t){return o.done(),tu.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return tu.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function su(t){return new tu((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=cu(t.target.error);n(e)}}))}var uu=!1;function cu(t){var e=nu._t(d());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new si("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return uu||(uu=!0,setTimeout((function(){throw r}),0)),r}}return t}var hu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return r(e,t),e}($s);function lu(t,e){var n=mi(t);return nu.It(n.Mt,e)}var fu=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&ha(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&la(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&la(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ti.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Va())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&wi(this.mutations,t.mutations,(function(t,e){return da(t,e)}))&&wi(this.baseMutations,t.baseMutations,(function(t,e){return da(t,e)}))},t}(),du=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){vi(e.mutations.length===r.length);for(var i=Fa(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),pu=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=Ti.min()),void 0===o&&(o=Ti.min()),void 0===a&&(a=Ri.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),vu=function(t){this.Lt=t};function mu(t,e){if(e.document)return ds(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ki.fromSegments(e.noDocument.path),r=Iu(e.noDocument.readTime),i=oo.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Ki.fromSegments(e.unknownDocument.path);return r=Iu(e.unknownDocument.version),oo.newUnknownDocument(o,r)}return pi()}function yu(t,e,n){var r=gu(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:as(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:ts(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new qs(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=wu(e.version);return a=e.hasCommittedMutations,new qs(null,new Vs(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=wu(e.version);return new qs(new js(c,h),null,null,!0,r,i)}return pi()}function gu(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function bu(t){var e=new Ei(t[0],t[1]);return Ti.fromTimestamp(e)}function wu(t){var e=t.toTimestamp();return new Ps(e.seconds,e.nanoseconds)}function Iu(t){var e=new Ei(t.seconds,t.nanoseconds);return Ti.fromTimestamp(e)}function Eu(t,e){for(var n=(e.baseMutations||[]).map((function(e){return vs(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return vs(t.Lt,e)})),s=Ei.fromMillis(e.localWriteTimeMs);return new fu(e.batchId,s,n,a)}function Tu(t){var e,n,r=Iu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Iu(t.lastLimboFreeSnapshotVersion):Ti.min();return void 0!==t.query.documents?(vi(1===(n=t.query).documents.length),e=Mo(Do(cs(n.documents[0])))):e=function(t){return Mo(gs(t))}(t.query),new pu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Ri.fromBase64String(t.resumeToken))}function Su(t,e){var n,r=wu(e.snapshotVersion),i=wu(e.lastLimboFreeSnapshotVersion);n=ho(e.target)?ms(t.Lt,e.target):ys(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Ks(e.targetId,uo(e.target),r,o,e.sequenceNumber,i,n)}function _u(t){var e=gs({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Fo(e,e.limit,"L"):e}var Au=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Nu(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Iu(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Nu(t).put({bundleId:(n=e).id,createTime:wu(rs(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return ku(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:_u(e.bundledQuery),readTime:Iu(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return ku(t).put(function(t){return{name:t.name,readTime:wu(rs(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Nu(t){return lu(t,Qs.store)}function ku(t){return lu(t,Xs.store)}var Du=function(){function t(){this.Bt=new Cu}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),tu.resolve()},t.prototype.getCollectionParents=function(t,e){return tu.resolve(this.Bt.getEntries(e))},t}(),Cu=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ca(ki.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ca(ki.comparator)).toArray()},t}(),Ou=function(){function t(){this.qt=new Cu}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Cs(i)};return Ru(t).put(o)}return tu.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ii(e),""],!1,!0);return Ru(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(xs(o.parent))}return n}))},t}();function Ru(t){return lu(t,zs.store)}var xu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Pu=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Lu(t,e,n){var r=t.store(Fs.store),i=t.store(Us.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Ot({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){vi(1===s)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],d=Us.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return tu.waitFor(o).next((function(){return c}))}function Mu(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw pi();e=t.noDocument}return JSON.stringify(e).length}Pu.DEFAULT_COLLECTION_PERCENTILE=10,Pu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pu.DEFAULT=new Pu(41943040,Pu.DEFAULT_COLLECTION_PERCENTILE,Pu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pu.DISABLED=new Pu(-1,0,0);var Fu=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return vi(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vu(t).Ot({index:Fs.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=ju(t),a=Vu(t);return a.add({}).next((function(s){vi("number"==typeof s);for(var u=new fu(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return ps(t.Lt,e)})),i=n.mutations.map((function(e){return ps(t.Lt,e)}));return new Fs(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new Ca((function(t,e){return bi(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=Us.key(i.userId,p.key.path,s);l=l.add(p.key.path.popLast()),h.push(a.put(c)),h.push(o.put(v,Us.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),tu.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Vu(t).get(e).next((function(t){return t?(vi(t.userId===n.userId),Eu(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?tu.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Vu(t).Ot({index:Fs.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(vi(e.batchId>=r),o=Eu(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Vu(t).Ot({index:Fs.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vu(t).Nt(Fs.userMutationsIndex,n).next((function(t){return t.map((function(t){return Eu(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Us.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return ju(t).Ot({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],h=xs(u);if(s===n.userId&&e.path.isEqual(h))return Vu(t).get(c).next((function(t){if(!t)throw pi();vi(t.userId===n.userId),o.push(Eu(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ca(bi),i=[];return e.forEach((function(e){var o=Us.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=ju(t).Ot({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=xs(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),tu.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Us.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Ca(bi);return ju(t).Ot({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],h=xs(u);a===n.userId&&r.isPrefixOf(h)?h.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Vu(t).get(e).next((function(t){if(null===t)throw pi();vi(t.userId===n.userId),r.push(Eu(n.R,t))})))})),tu.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Lu(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),tu.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return tu.resolve();var r=IDBKeyRange.lowerBound(Us.prefixForUser(e.userId)),i=[];return ju(t).Ot({range:r},(function(t,n,r){if(t[0]===e.userId){var o=xs(t[1]);i.push(o)}else r.done()})).next((function(){vi(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Uu(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return qu(t).get(this.userId).next((function(t){return t||new Ms(e.userId,-1,"")}))},t}();function Uu(t,e,n){var r=Us.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return ju(t).Ot({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Vu(t){return lu(t,Fs.store)}function ju(t){return lu(t,Us.store)}function qu(t){return lu(t,Ms.store)}var Bu=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Ku=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Bu(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Ti.fromTimestamp(new Ei(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Gu(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return vi(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Gu(t).Ot((function(a,s){var u=Tu(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return tu.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Gu(t).Ot((function(t,n){var r=Tu(n);e(r)}))},t.prototype.Xt=function(t){return Hu(t).get(Hs.key).next((function(t){return vi(null!==t),t}))},t.prototype.Zt=function(t,e){return Hu(t).put(Hs.key,e)},t.prototype.te=function(t,e){return Gu(t).put(Su(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=uo(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Gu(t).Ot({range:r,index:Ks.queryTargetsIndexName},(function(t,n,r){var o=Tu(n);co(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=zu(t);return e.forEach((function(e){var a=Cs(e.path);i.push(o.put(new Gs(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),tu.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=zu(t);return tu.forEach(e,(function(e){var o=Cs(e.path);return tu.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=zu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=zu(t),i=Va();return r.Ot({range:n,kt:!0},(function(t,e,n){var r=xs(t[1]),o=new Ki(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Cs(e.path),r=IDBKeyRange.bound([n],[Ii(n)],!1,!0),i=0;return zu(t).Ot({index:Gs.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Gu(t).get(e).next((function(t){return t?Tu(t):null}))},t}();function Gu(t){return lu(t,Ks.store)}function Hu(t){return lu(t,Hs.store)}function zu(t){return lu(t,Gs.store)}function Wu(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){if(t.code!==ai.FAILED_PRECONDITION||t.message!==Js)throw t;return hi("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Qu(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=bi(n,i);return 0===a?bi(r,o):a}var Xu=function(){function t(t){this.ne=t,this.buffer=new Ca(Qu),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Qu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Yu=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ae(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ae=function(t){var e=this,n=this.oe?3e5:6e4;hi("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return o(e,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ou(e=n.sent())?(hi("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Wu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ae(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Ju=function(){function t(t,e){this.ue=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ue.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return tu.resolve(oi.o);var r=new Xu(e);return this.ue.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ue.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ue.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ue.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(hi("LruGarbageCollector","Garbage collection skipped; disabled"),tu.resolve(xu)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(hi("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),xu):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ue.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(hi("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),ci()<=C.DEBUG&&hi("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-h)+"ms"),tu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),$u=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Ju(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Zu(t,n)},t.prototype.removeReference=function(t,e,n){return Zu(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Zu(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return qu(t).$t((function(r){return Uu(t,r,e).next((function(t){return t&&(n=!0),tu.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),zu(t).delete([0,Cs(a.path)])}))}));i.push(u)}})).next((function(){return tu.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Zu(t,e)},t.prototype.we=function(t,e){var n,r=zu(t),i=oi.o;return r.Ot({index:Gs.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==oi.o&&e(new Ki(xs(n)),i),i=s,n=a):i=oi.o})).next((function(){i!==oi.o&&e(new Ki(xs(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Zu(t,e){return zu(t).put(function(t,e){return new Gs(0,Cs(t.path),e)}(e,t.currentSequenceNumber))}var tc=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){_i(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return Ai(this.inner)},t}(),ec=function(){function t(){this.changes=new tc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Ti.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:oo.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?tu.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),nc=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return oc(t).put(ac(e),n)},t.prototype.removeEntry=function(t,e){var n=oc(t),r=ac(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return oc(t).get(ac(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return oc(t).get(ac(e)).next((function(t){return{document:n.ye(e,t),size:Mu(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=xa();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=xa(),i=new Na(Ki.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Mu(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return tu.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return oc(t).Ot({range:r},(function(t,e,r){for(var a=Ki.fromSegments(t);o&&Ki.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=xa(),o=e.path.length+1,a={};if(n.isEqual(Ti.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=gu(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=qs.collectionReadTimeIndex}return oc(t).Ot(a,(function(t,n,a){if(t.length===o){var s=mu(r.R,n);e.path.isPrefixOf(s.key.path)?qo(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new rc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return ic(t).get(Bs.key).next((function(t){return vi(!!t),t}))},t.prototype.me=function(t,e){return ic(t).put(Bs.key,e)},t.prototype.ye=function(t,e){if(e){var n=mu(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Ti.min()))return n}return oo.newInvalidDocument(t)},t}(),rc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new tc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return r(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ca((function(t,e){return bi(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=yu(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Mu(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var h=yu(e.Ie.R,oo.newNoDocument(o,Ti.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),tu.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(ec);function ic(t){return lu(t,Bs.store)}function oc(t){return lu(t,qs.store)}function ac(t){return t.path.toArray()}var sc=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;vi(n<r&&n>=0&&r<=11);var o=new eu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Ls.store)}(t),function(t){t.createObjectStore(Ms.store,{keyPath:Ms.keyPath}),t.createObjectStore(Fs.store,{keyPath:Fs.keyPath,autoIncrement:!0}).createIndex(Fs.userMutationsIndex,Fs.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Us.store)}(t),uc(t),function(t){t.createObjectStore(qs.store)}(t));var a=tu.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Gs.store),t.deleteObjectStore(Ks.store),t.deleteObjectStore(Hs.store)}(t),uc(t)),a=a.next((function(){return function(t){var e=t.store(Hs.store),n=new Hs(0,0,Ti.min().toTimestamp(),0);return e.put(Hs.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Fs.store).Nt().next((function(n){t.deleteObjectStore(Fs.store),t.createObjectStore(Fs.store,{keyPath:Fs.keyPath,autoIncrement:!0}).createIndex(Fs.userMutationsIndex,Fs.userMutationsKeyPath,{unique:!0});var r=e.store(Fs.store),i=n.map((function(t){return r.put(t)}));return tu.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Ws.store,{keyPath:Ws.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Bs.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(qs.store);e.createIndex(qs.readTimeIndex,qs.readTimeIndexPath,{unique:!1}),e.createIndex(qs.collectionReadTimeIndex,qs.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(Qs.store,{keyPath:Qs.keyPath})}(t),function(t){t.createObjectStore(Xs.store,{keyPath:Xs.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(qs.store).Ot((function(t,n){e+=Mu(n)})).next((function(){var n=new Bs(e);return t.store(Bs.store).put(Bs.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Ms.store),r=t.store(Fs.store);return n.Nt().next((function(n){return tu.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Fs.userMutationsIndex,i).next((function(r){return tu.forEach(r,(function(r){vi(r.userId===n.userId);var i=Eu(e.R,r);return Lu(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Gs.store),n=t.store(qs.store);return t.store(Hs.store).get(Hs.key).next((function(t){var r=[];return n.Ot((function(n,i){var o=new ki(n),a=function(t){return[0,Cs(t)]}(o);r.push(e.get(a).next((function(n){return n?tu.resolve():function(n){return e.put(new Gs(0,Cs(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return tu.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(zs.store,{keyPath:zs.keyPath});var n=e.store(zs.store),r=new Cu,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Cs(i)})}};return e.store(qs.store).Ot({kt:!0},(function(t,e){var n=new ki(t);return i(n.popLast())})).next((function(){return e.store(Us.store).Ot({kt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],xs(n));return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Ks.store);return n.Ot((function(t,r){var i=Tu(r),o=Su(e.R,i);return n.put(o)}))},t}();function uc(t){t.createObjectStore(Gs.store,{keyPath:Gs.keyPath}).createIndex(Gs.documentTargetsIndex,Gs.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ks.store,{keyPath:Ks.keyPath}).createIndex(Ks.queryTargetsIndexName,Ks.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Hs.store)}var cc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",hc=function(){function t(e,n,r,i,o,a,s,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new si(ai.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $u(this,i),this.Le=n+"main",this.R=new vu(u),this.Be=new nu(this.Le,11,new sc(this.R)),this.qe=new Ku(this.referenceDelegate,this.R),this.Ut=new Ou,this.Ue=function(t,e){return new nc(t,e)}(this.R,this.Ut),this.Qe=new Au,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===h&&li("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new si(ai.FAILED_PRECONDITION,cc);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new oi(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return o(e,void 0,void 0,(function(){return a(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return o(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return o(e,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return fc(e).put(new Ws(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(ou(e))return hi("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return hi("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return lc(t).get(Ls.key).next((function(t){return tu.resolve(e.tn(t))}))},t.prototype.en=function(t){return fc(t).delete(this.clientId)},t.prototype.nn=function(){return o(this,void 0,void 0,(function(){var t,e,n,r,i=this;return a(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=lu(t,Ws.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return tu.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)r=n[e],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?tu.resolve(!0):lc(t).get(Ls.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new si(ai.FAILED_PRECONDITION,cc);return!1}}return!(!e.networkEnabled||!e.inForeground)||fc(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&hi("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return o(this,void 0,void 0,(function(){var t=this;return a(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.an(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.un(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ls.store,Ws.store],(function(e){var n=new hu(e,oi.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return fc(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Fu.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;hi("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Ys,(function(o){return i=new hu(o,r.Ne?r.Ne.next():oi.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw li("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new si(ai.FAILED_PRECONDITION,Js);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return lc(t).get(Ls.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new si(ai.FAILED_PRECONDITION,cc)}))},t.prototype.Ze=function(t){var e=new Ls(this.clientId,this.allowTabSynchronization,Date.now());return lc(t).put(Ls.key,e)},t.yt=function(){return nu.yt()},t.prototype.Xe=function(t){var e=this,n=lc(t);return n.get(Ls.key).next((function(t){return e.tn(t)?(hi("IndexedDbPersistence","Releasing primary lease."),n.delete(Ls.key)):tu.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(li("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.un=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.an(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return hi("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return li("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.an=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){li("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function lc(t){return lu(t,Ls.store)}function fc(t){return lu(t,Ws.store)}function dc(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var pc=function(t,e){this.progress=t,this.wn=e},vc=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Ki.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Po(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Ki(e)).next((function(t){var e=La();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=La();return this.Ut.getCollectionParents(t,i).next((function(a){return tu.forEach(a,(function(a){var s=function(t,e){return new No(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,h=r.get(c);null==h&&(h=oo.newInvalidDocument(c),r=r.insert(c,h)),la(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){qo(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Va(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof ma&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),mc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Va(),i=Va(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),yc=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Ti.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(Co(e)||Oo(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(ci()<=C.DEBUG&&hi("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),jo(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Ca(Bo(t));return e.forEach((function(e,r){qo(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return ci()<=C.DEBUG&&hi("QueryEngine","Using full collection scan to execute query:",jo(e)),this.Sn.getDocumentsMatchingQuery(t,e,Ti.min())},t}(),gc=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Na(bi),this.kn=new tc((function(t){return uo(t)}),co),this.On=Ti.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new vc(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function bc(t,e,n,r){return new gc(t,e,n,r)}function wc(t,e){return o(this,void 0,void 0,(function(){var n,r,i,o;return a(this,(function(a){switch(a.label){case 0:return n=mi(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new vc(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=Va(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var m=0,y=v.mutations;m<y.length;m++){var g=y[m];a=a.add(g.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Ic(t,e){var n=mi(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=tu.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);vi(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Ec(t){var e=mi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Tc(t,e){var n=mi(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return vi(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=xa();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Sc(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(Ti.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return tu.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function Sc(t,e,n,r,i){var o=Va();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=xa();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Ti.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):hi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function _c(t,e){var n=mi(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Ac(t,e){var n=mi(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,tu.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new pu(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Nc(t,e,n){return o(this,void 0,void 0,(function(){var r,i,o,s;return a(this,(function(a){switch(a.label){case 0:r=mi(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ou(s=a.sent()))throw s;return hi("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function kc(t,e,n){var r=mi(t),i=Ti.min(),o=Va();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=mi(t),i=r.kn.get(n);return void 0!==i?tu.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Mo(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Ti.min(),n?o:Va())})).next((function(t){return{documents:t,Bn:o}}))}))}function Dc(t,e){var n=mi(t),r=mi(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Cc(t){var e=mi(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=mi(t),i=xa(),o=gu(n),a=oc(e),s=IDBKeyRange.lowerBound(o,!0);return a.Ot({index:qs.readTimeIndex,range:s},(function(t,e){var n=mu(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:bu(o)}}))}(e.$n,t,e.On)})).then((function(t){var n=t.wn,r=t.readTime;return e.On=r,n}))}function Oc(t){return o(this,void 0,void 0,(function(){var e;return a(this,(function(n){return[2,(e=mi(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=oc(t),n=Ti.min();return e.Ot({index:qs.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=bu(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.On=t}))]}))}))}function Rc(t,e,n,r){return o(this,void 0,void 0,(function(){var i,o,s,u,c,h,l,f,d,p;return a(this,(function(a){switch(a.label){case 0:for(i=mi(t),o=Va(),s=xa(),u=Fa(),c=0,h=n;c<h.length;c++)l=h[c],f=e.qn(l.metadata.name),l.document&&(o=o.add(f)),s=s.insert(f,e.Un(l)),u=u.insert(f,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Ac(i,function(t){return Mo(Do(ki.fromString("__bundle__/docs/"+t)))}(r))];case 1:return p=a.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Sc(t,d,s,Ti.min(),u).next((function(e){return d.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.qe.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function xc(t,e,n){return void 0===n&&(n=Va()),o(this,void 0,void 0,(function(){var r,i;return a(this,(function(o){switch(o.label){case 0:return[4,Ac(t,Mo(_u(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=mi(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=rs(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var a=r.withResumeToken(Ri.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(t,e)}))}))]}}))}))}var Pc=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return tu.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:rs(n.createTime)}),tu.resolve()},t.prototype.getNamedQuery=function(t,e){return tu.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:_u(t.bundledQuery),readTime:rs(t.readTime)}}(e)),tu.resolve()},t}(),Lc=function(){function t(){this.Wn=new Ca(Mc.Gn),this.zn=new Ca(Mc.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Mc(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Mc(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Ki(new ki([])),r=new Mc(n,t),i=new Mc(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Ki(new ki([])),n=new Mc(e,t),r=new Mc(e,t+1),i=Va();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Mc(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Mc=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Ki.comparator(t.key,e.key)||bi(t.ns,e.ns)},t.Hn=function(t,e){return bi(t.ns,e.ns)||Ki.comparator(t.key,e.key)},t}(),Fc=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Ca(Mc.Gn)}return t.prototype.checkEmpty=function(t){return tu.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new fu(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Mc(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return tu.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return tu.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return tu.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return tu.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return tu.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Mc(e,0),i=new Mc(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),tu.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ca(bi);return e.forEach((function(t){var e=new Mc(t,0),i=new Mc(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),tu.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Ki.isDocumentKey(i)||(i=i.child(""));var o=new Mc(new Ki(i),0),a=new Ca(bi);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),tu.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;vi(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return tu.forEach(e.mutations,(function(i){var o=new Mc(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Mc(e,0),r=this.rs.firstAfterOrEqual(n);return tu.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,tu.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Uc=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Na(Ki.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return tu.resolve(n?n.document.clone():oo.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=xa();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():oo.newInvalidDocument(t))})),tu.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=xa(),i=new Ki(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(s.path))break;h.compareTo(n)<=0||qo(e,c)&&(r=r.insert(c.key,c.clone()))}return tu.resolve(r)},t.prototype.fs=function(t,e){return tu.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Vc(this)},t.prototype.getSize=function(t){return tu.resolve(this.size)},t}(),Vc=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return r(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),tu.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ec),jc=function(){function t(t){this.persistence=t,this.ds=new tc((function(t){return uo(t)}),co),this.lastRemoteSnapshotVersion=Ti.min(),this.highestTargetId=0,this.ws=0,this._s=new Lc,this.targetCount=0,this.ys=Bu.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),tu.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return tu.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return tu.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),tu.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),tu.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Bu(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,tu.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),tu.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,tu.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),tu.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return tu.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return tu.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),tu.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),tu.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),tu.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return tu.resolve(n)},t.prototype.containsKey=function(t,e){return tu.resolve(this._s.containsKey(e))},t}(),qc=function(){function t(t,e){var n=this;this.gs={},this.Ne=new oi(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new jc(this),this.Ut=new Du,this.Ue=function(t,e){return new Uc(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new vu(e),this.Qe=new Pc(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Fc(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;hi("MemoryPersistence","Starting transaction:",t);var i=new Bc(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return tu.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Bc=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return r(e,t),e}($s),Kc=function(){function t(t){this.persistence=t,this.As=new Lc,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw pi()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),tu.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),tu.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),tu.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tu.forEach(this.vs,(function(r){var i=Ki.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return tu.or([function(){return tu.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Gc=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Hc(t,e){return"firestore_clients_"+t+"_"+e}function zc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Wc(t,e){return"firestore_targets_"+t+"_"+e}Gc.UNAUTHENTICATED=new Gc(null),Gc.GOOGLE_CREDENTIALS=new Gc("google-credentials-uid"),Gc.FIRST_PARTY=new Gc("first-party-uid");var Qc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new si(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(li("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Xc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new si(i.error.code,i.error.message)),o?new t(e,i.state,r):(li("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Yc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=qa(),a=0;i&&a<r.activeTargetIds.length;++a)i=Bi(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(li("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Jc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(li("SharedClientState","Failed to parse online state: "+e),null)},t}(),$c=function(){function t(){this.activeTargetIds=qa()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Zc=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Na(bi),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=Hc(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new $c),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return o(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,c,h,l,f=this;return a(this,(function(a){switch(a.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=a.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Hc(this.persistenceKey,r)))&&(o=Yc.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(u=this.js(s))&&this.Ws(u),c=0,h=this.Os;c<h.length;c++)l=h[c],this.Fs(l);return this.Os=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Wc(this.persistenceKey,t));if(n){var r=Xc.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Wc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return hi("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){hi("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){hi("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(hi("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void li("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return o(e,void 0,void 0,(function(){var t,e,r,i,o,s;return a(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=oi.o;if(null!=t)try{var n=JSON.parse(t);vi("number"==typeof n),e=n}catch(t){li("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==oi.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Qc(this.currentUser,t,e,n),i=zc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=zc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Wc(this.persistenceKey,t),i=new Xc(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Yc.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Qc.Vs(new Gc(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Xc.Vs(r,e)},t.prototype.js=function(t){return Jc.Vs(t)},t.prototype.ii=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ai(t.batchId,t.state,t.error)]:(hi("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ui(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=qa();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),th=function(){function t(){this.li=new $c,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new $c,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),eh=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),nh=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){hi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){hi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),rh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ih=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),oh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return r(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new ii;a.listenOnce(Zr.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case $r.NO_ERROR:var e=a.getResponseJson();hi("Connection","XHR received:",JSON.stringify(e)),i(e);break;case $r.TIMEOUT:hi("Connection",'RPC "'+t+'" timed out'),o(new si(ai.DEADLINE_EXCEEDED,"Request time out"));break;case $r.HTTP_ERROR:var n=a.getStatus();if(hi("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(ai).indexOf(e)>=0?e:ai.UNKNOWN}(r.status);o(new si(s,r.message))}else o(new si(ai.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new si(ai.UNAVAILABLE,"Connection failed."));break;default:pi()}}finally{hi("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.$i=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new Wr,o=Qe(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())||"object"==typeof navigator&&"ReactNative"===navigator.product||d().indexOf("Electron/")>=0||function(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||d().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");hi("Connection","Creating WebChannel: "+s,a);var u=i.createWebChannel(s,a),c=!1,h=!1,l=new ih({Ei:function(t){h?hi("Connection","Not sending because WebChannel is closed:",t):(c||(hi("Connection","Opening WebChannel transport."),u.open(),c=!0),hi("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,ri.EventType.OPEN,(function(){h||hi("Connection","WebChannel transport opened.")})),f(u,ri.EventType.CLOSE,(function(){h||(h=!0,hi("Connection","WebChannel transport closed"),l.Vi())})),f(u,ri.EventType.ERROR,(function(t){h||(h=!0,fi("Connection","WebChannel transport errored:",t),l.Vi(new si(ai.UNAVAILABLE,"The operation could not be completed")))})),f(u,ri.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];vi(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){hi("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=wa[t];if(void 0!==e)return Aa(e)}(o),s=i.message;void 0===a&&(a=ai.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),h=!0,l.Vi(new si(a,s)),u.close()}else hi("Connection","WebChannel received:",n),l.Si(n)}})),f(o,ti.STAT_EVENT,(function(t){t.stat===ei?hi("Connection","Detected buffering proxy"):t.stat===ni&&hi("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);hi("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return hi("RestConnection","Received: ",t),t}),(function(e){throw fi("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.2",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=rh[t];return this.Di+"/v1/"+e+":"+n},t}());function ah(){return"undefined"!=typeof window?window:null}function sh(){return"undefined"!=typeof document?document:null}function uh(t){return new Za(t,!0)}var ch=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&hi("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),hh=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new ch(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ar(),this.stream.send(t)},t.prototype.rr=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ar=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return o(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return this.ar(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===ai.RESOURCE_EXHAUSTED?(li(e.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===ai.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ur(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ur=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new si(ai.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return o(t,void 0,void 0,(function(){return a(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return hi("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(hi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),lh=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return r(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:pi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(vi(void 0===e||"string"==typeof e),Ri.fromBase64String(e||"")):(vi(void 0===e||e instanceof Uint8Array),Ri.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?ai.UNKNOWN:Aa(t.code);return new si(e,t.message||"")}(s);n=new za(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=ss(t,r.document.name),o=rs(r.document.updateTime);var s=new ro({mapValue:{fields:r.document.fields}}),u=(a=oo.newFoundDocument(i,o,s),r.targetIds||[]),c=r.removedTargetIds||[];n=new Ga(u,c,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=ss(t,r.document),o=r.readTime?rs(r.readTime):Ti.min(),s=oo.newNoDocument(i,o),a=r.removedTargetIds||[],n=new Ga([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=ss(t,r.document),o=r.removedTargetIds||[],n=new Ga([],o,i,null);else{if(!("filter"in e))return pi();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Sa(r),o=h.targetId,n=new Ha(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Ti.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ti.min():e.readTime?rs(e.readTime):Ti.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=hs(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=ho(r)?{documents:ms(t,r)}:{query:ys(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=es(t,e.resumeToken):e.snapshotVersion.compareTo(Ti.min())>0&&(n.readTime=ts(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return pi()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=hs(this.R),e.removeTarget=t,this.cr(e)},e}(hh),fh=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return r(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ur=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(vi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(vi(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?rs(t.updateTime):rs(e);return n.isEqual(Ti.min())&&(n=rs(e)),new aa(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=rs(t.commitTime);return this.listener.Tr(n,e)}return vi(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=hs(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return ps(e.R,t)}))};this.cr(n)},e}(hh),dh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return r(e,t),e.prototype.br=function(){if(this.Rr)throw new si(ai.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===ai.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new si(ai.UNKNOWN,t.toString())}))},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Oi(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===ai.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new si(ai.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),ph=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(li(e),this.Vr=!1):hi("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),vh=function(t,e,n,r,i){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return o(s,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return Sh(this)?(hi("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return o(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return(e=mi(t)).$r.add(4),[4,yh(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,mh(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new ph(n,r)};function mh(t){return o(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:if(!Sh(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function yh(t){return o(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function gh(t,e){var n=mi(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),Th(n)?Eh(n):Vh(n).er()&&wh(n,e))}function bh(t,e){var n=mi(t),r=Vh(n);n.Or.delete(e),r.er()&&Ih(n,e),0===n.Or.size&&(r.er()?r.ir():Sh(n)&&n.Br.set("Unknown"))}function wh(t,e){t.qr.U(e.targetId),Vh(t).mr(e)}function Ih(t,e){t.qr.U(e),Vh(t).yr(e)}function Eh(t){t.qr=new Qa({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Vh(t).start(),t.Br.Sr()}function Th(t){return Sh(t)&&!Vh(t).tr()&&t.Or.size>0}function Sh(t){return 0===mi(t).$r.size}function _h(t){t.qr=void 0}function Ah(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){return t.Or.forEach((function(e,n){wh(t,e)})),[2]}))}))}function Nh(t,e){return o(this,void 0,void 0,(function(){return a(this,(function(n){return _h(t),Th(t)?(t.Br.Nr(e),Eh(t)):t.Br.set("Unknown"),[2]}))}))}function kh(t,e,n){return o(this,void 0,void 0,(function(){var r,i,s;return a(this,(function(u){switch(u.label){case 0:if(t.Br.set("Online"),!(e instanceof za&&2===e.state&&e.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(t,e){return o(this,void 0,void 0,(function(){var n,r,i,o;return a(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.Or.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.Or.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return u.sent(),[3,5];case 3:return r=u.sent(),hi("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Dh(t,r)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ga?t.qr.X(e):e instanceof Ha?t.qr.rt(e):t.qr.et(e),n.isEqual(Ti.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,Ec(t.localStore)];case 8:return i=u.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.at(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Ri.EMPTY_BYTE_STRING,n.snapshotVersion)),Ih(t,e);var r=new pu(n.target,e,1,n.sequenceNumber);wh(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return hi("RemoteStore","Failed to raise snapshot:",s=u.sent()),[4,Dh(t,s)];case 12:return u.sent(),[3,13];case 13:return[2]}}))}))}function Dh(t,e,n){return o(this,void 0,void 0,(function(){var r=this;return a(this,(function(i){switch(i.label){case 0:if(!ou(e))throw e;return t.$r.add(1),[4,yh(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Ec(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return o(r,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return hi("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,mh(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Ch(t,e){return e().catch((function(n){return Dh(t,n,e)}))}function Oh(t){return o(this,void 0,void 0,(function(){var e,n,r,i,o;return a(this,(function(a){switch(a.label){case 0:e=mi(t),n=jh(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return Sh(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,_c(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=jh(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,Dh(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Rh(e)&&xh(e),[2]}}))}))}function Rh(t){return Sh(t)&&!jh(t).tr()&&t.kr.length>0}function xh(t){jh(t).start()}function Ph(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){return jh(t).Ar(),[2]}))}))}function Lh(t){return o(this,void 0,void 0,(function(){var e,n,r,i;return a(this,(function(o){for(e=jh(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Mh(t,e,n){return o(this,void 0,void 0,(function(){var r,i;return a(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=du.from(r,e,n),[4,Ch(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Oh(t)];case 2:return o.sent(),[2]}}))}))}function Fh(t,e){return o(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return e&&jh(t).pr?[4,function(t,e){return o(this,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:return _a(r=e.code)&&r!==ai.ABORTED?(n=t.kr.shift(),jh(t).sr(),[4,Ch(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Oh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Rh(t)&&xh(t),[2]}}))}))}function Uh(t,e){return o(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return n=mi(t),e?(n.$r.delete(2),[4,mh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,yh(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Vh(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=mi(t);return r.br(),new lh(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Ah.bind(null,t),Ri:Nh.bind(null,t),_r:kh.bind(null,t)}),t.Mr.push((function(n){return o(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Th(t)?Eh(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),_h(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function jh(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=mi(t);return r.br(),new fh(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Ph.bind(null,t),Ri:Fh.bind(null,t),Ir:Lh.bind(null,t),Tr:Mh.bind(null,t)}),t.Mr.push((function(n){return o(e,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Oh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(hi("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr}var qh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new si(ai.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Bh(t,e){if(li("AsyncQueue",e+": "+t),ou(t))return new si(ai.UNAVAILABLE,e+": "+t);throw t}var Kh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Ki.comparator(e.key,n.key)}:function(t,e){return Ki.comparator(t.key,e.key)},this.keyedMap=La(),this.sortedSet=new Na(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Gh=function(){function t(){this.Kr=new Na(Ki.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):pi():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Hh=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Kh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Uo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),zh=function(){this.Wr=void 0,this.listeners=[]},Wh=function(){this.queries=new tc((function(t){return Vo(t)}),Uo),this.onlineState="Unknown",this.Gr=new Set};function Qh(t,e){return o(this,void 0,void 0,(function(){var n,r,i,o,s,u,c;return a(this,(function(a){switch(a.label){case 0:if(n=mi(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new zh),!i)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=a.sent(),[3,4];case 3:return u=a.sent(),c=Bh(u,"Initialization of query '"+jo(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&$h(n),[2]}}))}))}function Xh(t,e){return o(this,void 0,void 0,(function(){var n,r,i,o,s;return a(this,(function(a){return n=mi(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Yh(t,e){for(var n=mi(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(a)&&(r=!0);u.Wr=a}}r&&$h(n)}function Jh(t,e,n){var r=mi(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function $h(t){t.Gr.forEach((function(t){t.next()}))}var Zh=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Hh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Hh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),tl=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),el=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return ss(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?ds(this.R,t.document,!1):oo.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return rs(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new el(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],h=(e.get(c)||Va()).add(a);e.set(c,h)}}return e},t.prototype.complete=function(){return o(this,void 0,void 0,(function(){var t,e,n,r,i;return a(this,(function(o){switch(o.label){case 0:return[4,Rc(this.localStore,new el(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,xc(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new pc(Object.assign({},this.progress),t))]}}))}))}}();var nl=function(t){this.key=t},rl=function(t){this.key=t},il=function(){function t(t,e){this.query=t,this.ao=e,this.uo=null,this.current=!1,this.ho=Va(),this.mutatedKeys=Va(),this.lo=Bo(t),this.fo=new Kh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.ao},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Gh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Co(this.query)&&i.size===this.query.limit?i.last():null,c=Oo(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=qo(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),d=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),p=!1;h&&l?h.data.isEqual(l.data)?f!==d&&(r.track({type:3,doc:l}),p=!0):n.yo(h,l)||(r.track({type:2,doc:l}),p=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(s=!0)):!h&&l?(r.track({type:0,doc:l}),p=!0):h&&!l&&(r.track({type:1,doc:h}),p=!0,(u||c)&&(s=!0)),p&&(l?(a=a.add(l),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Co(this.query)||Oo(this.query))for(;a.size>this.query.limit;){var h=Co(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pi()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.uo;return this.uo=s,0!==o.length||u?{snapshot:new Hh(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Gh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.ao.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.ao=e.ao.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.ao=e.ao.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Va(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new rl(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new nl(t))})),n},t.prototype.Ao=function(t){this.ao=t.Bn,this.ho=Va();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Hh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.uo)},t}(),ol=function(t,e,n){this.query=t,this.targetId=e,this.view=n},al=function(t){this.key=t,this.bo=!1},sl=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new tc((function(t){return Vo(t)}),Uo),this.Vo=new Map,this.So=new Set,this.Do=new Na(Ki.comparator),this.Co=new Map,this.No=new Lc,this.xo={},this.Fo=new Map,this.ko=Bu.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function ul(t,e){return o(this,void 0,void 0,(function(){var n,r,i,o,s,u;return a(this,(function(a){switch(a.label){case 0:return n=Fl(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Ac(n.localStore,Mo(e))];case 2:return s=a.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,cl(n,e,r,"current"===u)];case 3:i=a.sent(),n.isPrimaryClient&&gh(n.remoteStore,s),a.label=4;case 4:return[2,i]}}))}))}function cl(t,e,n,r){return o(this,void 0,void 0,(function(){var i,s,u,c,h,l;return a(this,(function(f){switch(f.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return o(this,void 0,void 0,(function(){var i,o,s;return a(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,kc(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(El(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,kc(t.localStore,e,!0)];case 1:return i=f.sent(),s=new il(e,i.Bn),u=s._o(i.documents),c=Ka.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),h=s.applyChanges(u,t.isPrimaryClient,c),El(t,n,h.To),l=new ol(e,n,s),[2,(t.Po.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),h.snapshot)]}}))}))}function hl(t,e){return o(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:return n=mi(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Uo(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Nc(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),bh(n.remoteStore,r.targetId),wl(n,r.targetId)})).catch(Wu)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return wl(n,r.targetId),[4,Nc(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function ll(t,e,n){return o(this,void 0,void 0,(function(){var r,i,o,s;return a(this,(function(a){switch(a.label){case 0:r=Ul(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=mi(t),i=Ei.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Va());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],h=fa(c,n.get(c.key));null!=h&&a.push(new ma(c.key,h,io(h.toProto().mapValue),sa.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Na(bi)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,_l(r,i.changes)];case 3:return a.sent(),[4,Oh(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Bh(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function fl(t,e){return o(this,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:n=mi(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Tc(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(vi(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?vi(r.bo):t.removedDocuments.size>0&&(vi(r.bo),r.bo=!1))})),[4,_l(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Wu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function dl(t,e,n){var r=mi(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=mi(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&$h(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function pl(t,e,n){return o(this,void 0,void 0,(function(){var r,i,o,s,u,c;return a(this,(function(a){switch(a.label){case 0:return(r=mi(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Na(Ki.comparator)).insert(o,oo.newNoDocument(o,Ti.min())),u=Va().add(o),c=new Ba(Ti.min(),new Map,new Ca(bi),s,u),[4,fl(r,c)]):[3,2];case 1:return a.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Sl(r),[3,4];case 2:return[4,Nc(r.localStore,e,!1).then((function(){return wl(r,e,n)})).catch(Wu)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))}function vl(t,e){return o(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:n=mi(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Ic(n.localStore,e)];case 2:return i=o.sent(),bl(n,r,null),gl(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,_l(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Wu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function ml(t,e,n){return o(this,void 0,void 0,(function(){var r,i;return a(this,(function(o){switch(o.label){case 0:r=mi(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=mi(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return vi(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),bl(r,e,n),gl(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,_l(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Wu(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function yl(t,e){return o(this,void 0,void 0,(function(){var n,r,i,o,s;return a(this,(function(a){switch(a.label){case 0:Sh((n=mi(t)).remoteStore)||hi("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=mi(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Bh(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function gl(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function bl(t,e,n){var r=mi(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function wl(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Il(t,e)}))}function Il(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(bh(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Sl(t))}function El(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof nl?(t.No.addReference(o.key,e),Tl(t,o)):o instanceof rl?(hi("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Il(t,o.key)):pi()}}function Tl(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(hi("SyncEngine","New document in limbo: "+n),t.So.add(r),Sl(t))}function Sl(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Ki(ki.fromString(e)),r=t.ko.next();t.Co.set(r,new al(n)),t.Do=t.Do.insert(n,r),gh(t.remoteStore,new pu(Mo(Do(n.path)),r,2,oi.o))}}function _l(t,e,n){return o(this,void 0,void 0,(function(){var r,i,s,u;return a(this,(function(c){switch(c.label){case 0:return r=mi(t),i=[],s=[],u=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,o){u.push(r.$o(o,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(o.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=mc.Pn(o.targetId,t);s.push(e)}})))})),[4,Promise.all(u)]);case 1:return c.sent(),r.vo._r(i),[4,function(t,e){return o(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,h,l;return a(this,(function(a){switch(a.label){case 0:n=mi(t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return tu.forEach(e,(function(e){return tu.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return tu.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return a.sent(),[3,4];case 3:if(!ou(r=a.sent()))throw r;return hi("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(c=n.Fn.get(u),h=c.snapshotVersion,l=c.withLastLimboFreeSnapshotVersion(h),n.Fn=n.Fn.insert(u,l));return[2]}}))}))}(r.localStore,s)];case 2:c.sent(),c.label=3;case 3:return[2]}}))}))}function Al(t,e){return o(this,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:return(n=mi(t)).currentUser.isEqual(e)?[3,3]:(hi("SyncEngine","User change. New user:",e.toKey()),[4,wc(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new si(ai.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,_l(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Nl(t,e){var n=mi(t),r=n.Co.get(e);if(r&&r.bo)return Va().add(r.key);var i=Va(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function kl(t,e){return o(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:return[4,kc((n=mi(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&El(n,e.targetId,i.To),i)]}}))}))}function Dl(t){return o(this,void 0,void 0,(function(){var e;return a(this,(function(n){return[2,Cc((e=mi(t)).localStore).then((function(t){return _l(e,t)}))]}))}))}function Cl(t,e,n,r){return o(this,void 0,void 0,(function(){var i,o;return a(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=mi(t),r=mi(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):tu.resolve(null)}))}))}((i=mi(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Oh(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(bl(i,e,r||null),gl(i,e),function(t,e){mi(mi(t)._n).Gt(e)}(i.localStore,e)):pi(),a.label=4;case 4:return[4,_l(i,o)];case 5:return a.sent(),[3,7];case 6:hi("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function Ol(t,e){return o(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,h;return a(this,(function(a){switch(a.label){case 0:return Fl(n=mi(t)),Ul(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Rl(n,r.toArray())]);case 1:return i=a.sent(),n.Oo=!0,[4,Uh(n.remoteStore,!0)];case 2:for(a.sent(),o=0,s=i;o<s.length;o++)u=s[o],gh(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(c=[],h=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):h=h.then((function(){return wl(n,e),Nc(n.localStore,e,!0)})),bh(n.remoteStore,e)})),[4,h]);case 4:return a.sent(),[4,Rl(n,c)];case 5:return a.sent(),function(t){var e=mi(t);e.Co.forEach((function(t,n){bh(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Na(Ki.comparator)}(n),n.Oo=!1,[4,Uh(n.remoteStore,!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))}function Rl(t,e,n){return o(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,h,l,f,d,p,v,m;return a(this,(function(a){switch(a.label){case 0:n=mi(t),r=[],i=[],o=0,s=e,a.label=1;case 1:return o<s.length?(u=s[o],c=void 0,(h=n.Vo.get(u))&&0!==h.length?[4,Ac(n.localStore,Mo(h[0]))]:[3,7]):[3,13];case 2:c=a.sent(),l=0,f=h,a.label=3;case 3:return l<f.length?(d=f[l],p=n.Po.get(d),[4,kl(n,p)]):[3,6];case 4:(v=a.sent()).snapshot&&i.push(v.snapshot),a.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Dc(n.localStore,u)];case 8:return m=a.sent(),[4,Ac(n.localStore,m)];case 9:return c=a.sent(),[4,cl(n,xl(m),u,!1)];case 10:a.sent(),a.label=11;case 11:r.push(c),a.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function xl(t){return ko(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Pl(t){var e=mi(t);return mi(mi(e.localStore).persistence).fn()}function Ll(t,e,n,r){return o(this,void 0,void 0,(function(){var i,o,s;return a(this,(function(a){switch(a.label){case 0:return(i=mi(t)).Oo?(hi("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Cc(i.localStore)];case 3:return o=a.sent(),s=Ba.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,_l(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Nc(i.localStore,e,!0)];case 6:return a.sent(),wl(i,e,r),[3,8];case 7:pi(),a.label=8;case 8:return[2]}}))}))}function Ml(t,e,n){return o(this,void 0,void 0,(function(){var r,i,o,s,u,c,h,l,f,d;return a(this,(function(p){switch(p.label){case 0:if(!(r=Fl(t)).Oo)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(hi("SyncEngine","Adding an already active target "+s),[3,5]):[4,Dc(r.localStore,s)]):[3,6];case 2:return u=p.sent(),[4,Ac(r.localStore,u)];case 3:return c=p.sent(),[4,cl(r,xl(u),c.targetId,!1)];case 4:p.sent(),gh(r.remoteStore,c),p.label=5;case 5:return i++,[3,1];case 6:h=function(t){return a(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Nc(r.localStore,t,!1).then((function(){bh(r.remoteStore,t),wl(r,t)})).catch(Wu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,f=n,p.label=7;case 7:return l<f.length?(d=f[l],[5,h(d)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Fl(t){var e=mi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fl.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Nl.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pl.bind(null,e),e.vo._r=Yh.bind(null,e.eventManager),e.vo.Mo=Jh.bind(null,e.eventManager),e}function Ul(t){var e=mi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vl.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ml.bind(null,e),e}var Vl=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.R=uh(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return bc(this.persistence,new yc,t.initialUser,this.R)},t.prototype.qo=function(t){return new qc(Kc.bs,this.R)},t.prototype.Bo=function(t){return new th},t.prototype.terminate=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),jl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return r(e,t),e.prototype.initialize=function(e){return o(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Oc(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Ul(this.Ko.syncEngine)];case 4:return n.sent(),[4,Oh(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return bc(this.persistence,new yc,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Yu(e,t.asyncQueue)},e.prototype.qo=function(t){var e=dc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Pu.withCacheSize(this.cacheSizeBytes):Pu.DEFAULT;return new hc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,ah(),sh(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new th},e}(Vl),ql=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return r(e,t),e.prototype.initialize=function(e){return o(this,void 0,void 0,(function(){var n,r=this;return a(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Zc?(this.sharedClientState.syncEngine={ai:Cl.bind(null,n),ui:Ll.bind(null,n),hi:Ml.bind(null,n),fn:Pl.bind(null,n),ci:Dl.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return o(r,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,Ol(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=ah();if(!Zc.yt(e))throw new si(ai.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=dc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Zc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(jl),Bl=function(){function t(){}return t.prototype.initialize=function(t,e){return o(this,void 0,void 0,(function(){var n=this;return a(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return dl(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Al.bind(null,this.syncEngine),[4,Uh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Wh},t.prototype.createDatastore=function(t){var e,n=uh(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new oh(e));return function(t,e,n){return new dh(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return dl(a.syncEngine,t,0)},o=nh.yt()?new nh:new eh,new vh(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new sl(t,e,n,r,i,o);return a&&(s.Oo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return o(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return e=mi(t),hi("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,yh(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),Kl=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Gl=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Zs,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return o(this,void 0,void 0,(function(){var t,e,n,r;return a(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new tl(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return o(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return o(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return o(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return o(this,void 0,void 0,(function(){var e,n=this;return a(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new si(ai.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return o(this,void 0,void 0,(function(){var n,r,i,o,s,u;return a(this,(function(a){switch(a.label){case 0:return n=mi(t),r=hs(n.R)+"/documents",i={documents:e.map((function(t){return as(n.R,t)}))},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){vi(!!e.found),e.found.name,e.found.updateTime;var n=ss(t,e.found.name),r=rs(e.found.updateTime),i=new ro({mapValue:{fields:e.found.fields}});return oo.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){vi(!!e.missing),vi(!!e.readTime);var n=ss(t,e.missing),r=rs(e.readTime);return oo.newNoDocument(n,r)}(t,e):pi()}(n.R,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());vi(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ea(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return o(this,void 0,void 0,(function(){var t,e=this;return a(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Ki.fromPath(n);e.mutations.push(new Ta(r,e.precondition(r)))})),[4,function(t,e){return o(this,void 0,void 0,(function(){var n,r,i;return a(this,(function(o){switch(o.label){case 0:return n=mi(t),r=hs(n.R)+"/documents",i={writes:e.map((function(t){return ps(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw pi();e=Ti.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new si(ai.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?sa.updateTime(e):sa.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Ti.min()))throw new si(ai.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sa.updateTime(e)}return sa.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Hl=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new ch(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return o(t,void 0,void 0,(function(){var t,e,n=this;return a(this,(function(r){return t=new Gl(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ji(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!_a(e)}return!1},t}(),zl=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Gc.UNAUTHENTICATED,this.clientId=gi.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return o(r,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return hi("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new si(ai.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return o(t,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Bh(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Wl(t,e){return o(this,void 0,void 0,(function(){var n,r,i=this;return a(this,(function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),hi("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return o(i,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,wc(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Ql(t,e){return o(this,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Xl(t)];case 1:return n=i.sent(),hi("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return o(this,void 0,void 0,(function(){var n,r;return a(this,(function(i){switch(i.label){case 0:return(n=mi(t)).asyncQueue.verifyOperationInProgress(),hi("RemoteStore","RemoteStore received new credentials"),r=Sh(n),n.$r.add(3),[4,yh(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,mh(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function Xl(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(hi("FirestoreClient","Using default OfflineComponentProvider"),[4,Wl(t,new Vl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Yl(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(hi("FirestoreClient","Using default OnlineComponentProvider"),[4,Ql(t,new Bl)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Jl(t){return Xl(t).then((function(t){return t.persistence}))}function $l(t){return Xl(t).then((function(t){return t.localStore}))}function Zl(t){return Yl(t).then((function(t){return t.remoteStore}))}function tf(t){return Yl(t).then((function(t){return t.syncEngine}))}function ef(t){return o(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return[4,Yl(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=ul.bind(null,e.syncEngine),n.onUnlisten=hl.bind(null,e.syncEngine),n)]}}))}))}function nf(t,e,n){var r=this;void 0===n&&(n={});var i=new Zs;return t.asyncQueue.enqueueAndForget((function(){return o(r,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Kl({next:function(o){e.enqueueAndForget((function(){return Xh(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new si(ai.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new si(ai.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new Zh(Do(n.path),o,{includeMetadataChanges:!0,so:!0});return Qh(t,a)},[4,ef(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function rf(t,e,n){var r=this;void 0===n&&(n={});var i=new Zs;return t.asyncQueue.enqueueAndForget((function(){return o(r,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Kl({next:function(n){e.enqueueAndForget((function(){return Xh(t,a)})),n.fromCache&&"server"===r.source?i.reject(new si(ai.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new Zh(n,o,{includeMetadataChanges:!0,so:!0});return Qh(t,a)},[4,ef(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var of=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},af=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),sf=new Map,uf=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},cf=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(Gc.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),hf=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),lf=function(){function t(t){var e=this;this.currentUser=Gc.UNAUTHENTICATED,this.oc=new Zs,this.cc=0,this.changeListener=function(){return Promise.resolve()},this.ac=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.hc(),e.oc.resolve(),e.ac&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){hi("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.lc(),e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):e.ac&&(hi("FirebaseCredentialsProvider","Auth not yet detected"),e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)})))}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(hi("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(vi("string"==typeof n.accessToken),new uf(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){this.ac=!0,this.asyncQueue=t,this.changeListener=e},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.hc=function(){var t=this.auth&&this.auth.getUid();return vi(null===t||"string"==typeof t),new Gc(t)},t.prototype.lc=function(){var t=this;this.ac&&(this.ac=!1,this.asyncQueue.enqueueRetryable((function(){return o(t,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,this.changeListener(this.currentUser)];case 2:return t.sent(),this.ac=!0,[2]}}))}))})))},t}(),ff=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n,this.type="FirstParty",this.user=Gc.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.dc},e=this.fc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.wc&&(t["X-Goog-Iam-Authorization-Token"]=this.wc),t},enumerable:!1,configurable:!0}),t}(),df=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n}return t.prototype.getToken=function(){return Promise.resolve(new ff(this.fc,this.dc,this.wc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(Gc.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function pf(t,e,n){if(!n)throw new si(ai.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function vf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new si(ai.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function mf(t,e,n,r){if(!0===e&&!0===r)throw new si(ai.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function yf(t){if(!Ki.isDocumentKey(t))throw new si(ai.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function gf(t){if(Ki.isDocumentKey(t))throw new si(ai.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function bf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":pi()}function wf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new si(ai.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=bf(t);throw new si(ai.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function If(t,e){if(e<=0)throw new si(ai.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Ef=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new si(ai.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new si(ai.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,mf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Tf=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ef({}),this._settingsFrozen=!1,t instanceof af?(this._databaseId=t,this._credentials=new cf):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new si(ai.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new af(t.options.projectId)}(t),this._credentials=new lf(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new si(ai.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new si(ai.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ef(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new cf;switch(t.type){case"gapi":var e=t.client;return vi(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new df(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new si(ai.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=sf.get(this))&&(hi("ComponentProvider","Removing Datastore"),sf.delete(this),t.terminate()),Promise.resolve();var t},t}(),Sf=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Af(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),_f=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Af=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Do(r))||this)._path=r,i.type="collection",i}return r(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Sf(this.firestore,null,new Ki(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(_f);function Nf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=T(t),pf("collection","path",e),t instanceof Tf)return gf(n=ki.fromString.apply(ki,c([e],r))),new Af(t,null,n);if(!(t instanceof Sf||t instanceof Af))throw new si(ai.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return gf(n=ki.fromString.apply(ki,c([t.path],r)).child(ki.fromString(e))),new Af(t.firestore,null,n)}function kf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=T(t),1===arguments.length&&(e=gi.u()),pf("doc","path",e),t instanceof Tf)return yf(n=ki.fromString.apply(ki,c([e],r))),new Sf(t,null,new Ki(n));if(!(t instanceof Sf||t instanceof Af))throw new si(ai.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return yf(n=t._path.child(ki.fromString.apply(ki,c([e],r)))),new Sf(t.firestore,t instanceof Af?t.converter:null,new Ki(n))}function Df(t,e){return t=T(t),e=T(e),(t instanceof Sf||t instanceof Af)&&(e instanceof Sf||e instanceof Af)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Cf(t,e){return t=T(t),e=T(e),t instanceof _f&&e instanceof _f&&t.firestore===e.firestore&&Uo(t._query,e._query)&&t.converter===e.converter}var Of=function(){function t(){var t=this;this._c=Promise.resolve(),this.mc=[],this.yc=!1,this.gc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new ch(this,"async_queue_retry"),this.Ac=function(){var e=sh();e&&hi("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=sh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ac)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.yc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Rc(),this.bc(t)},t.prototype.enterRestrictedMode=function(){if(!this.yc){this.yc=!0;var t=sh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ac)}},t.prototype.enqueue=function(t){return this.Rc(),this.yc?new Promise((function(t){})):this.bc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.mc.push(t),e.vc()}))},t.prototype.vc=function(){return o(this,void 0,void 0,(function(){var t,e=this;return a(this,(function(n){switch(n.label){case 0:if(0===this.mc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.mc[0]()];case 2:return n.sent(),this.mc.shift(),this.Zi.reset(),[3,4];case 3:if(!ou(t=n.sent()))throw t;return hi("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.mc.length>0&&this.Zi.ji((function(){return e.vc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.bc=function(t){var e=this,n=this._c.then((function(){return e.Tc=!0,t().catch((function(t){throw e.Ec=t,e.Tc=!1,li("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Tc=!1,t}))}));return this._c=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Rc(),this.Ic.indexOf(t)>-1&&(e=0);var i=qh.createAndSchedule(this,t,e,n,(function(t){return r.Pc(t)}));return this.gc.push(i),i},t.prototype.Rc=function(){this.Ec&&pi()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Vc=function(){return o(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return[4,t=this._c];case 1:e.sent(),e.label=2;case 2:if(t!==this._c)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Sc=function(t){for(var e=0,n=this.gc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Dc=function(t){var e=this;return this.Vc().then((function(){e.gc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.gc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Vc()}))},t.prototype.Cc=function(t){this.Ic.push(t)},t.prototype.Pc=function(t){var e=this.gc.indexOf(t);this.gc.splice(e,1)},t}();function Rf(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Zs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var xf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Of,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return r(e,t),e.prototype._terminate=function(){return this._firestoreClient||Lf(this),this._firestoreClient.terminate()},e}(Tf);function Pf(t){return t._firestoreClient||Lf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Lf(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new of(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new zl(t._credentials,t._queue,r)}function Mf(t,e,n){var r=this,i=new Zs;return t.asyncQueue.enqueue((function(){return o(r,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Wl(t,n)];case 1:return o.sent(),[4,Ql(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ai.FAILED_PRECONDITION||t.code===ai.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Ff(t){if(t._initialized||t._terminated)throw new si(ai.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Uf=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new si(ai.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ci(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Vf=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Ri.fromBase64String(e))}catch(e){throw new si(ai.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Ri.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),jf=function(t){this._methodName=t},qf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new si(ai.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new si(ai.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return bi(this._lat,t._lat)||bi(this._long,t._long)},t}(),Bf=/^__.*__$/,Kf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ma(t,this.data,this.fieldMask,e,this.fieldTransforms):new va(t,this.data,e,this.fieldTransforms)},t}(),Gf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ma(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Hf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pi()}}var zf=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Nc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xc",{get:function(){return this.settings.xc},enumerable:!1,configurable:!0}),t.prototype.Fc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,Oc:!1});return r.$c(t),r},t.prototype.Mc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,Oc:!1});return r.Nc(),r},t.prototype.Lc=function(t){return this.Fc({path:void 0,Oc:!0})},t.prototype.Bc=function(t){return fd(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Uc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Nc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Bc("Document fields must not be empty");if(Hf(this.xc)&&Bf.test(t))throw this.Bc('Document fields cannot begin and end with "__"')},t}(),Wf=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||uh(t)}return t.prototype.Qc=function(t,e,n,r){return void 0===r&&(r=!1),new zf({xc:t,methodName:e,Uc:n,path:Ci.emptyPath(),Oc:!1,qc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Qf(t){var e=t._freezeSettings(),n=uh(t._databaseId);return new Wf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Xf(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Qc(o.merge||o.mergeFields?2:0,e,n,i);ud("Data must be an object, but it was:",a,r);var s,u,c=ad(r,a);if(o.merge)s=new Oi(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var d=cd(e,f[l],n);if(!a.contains(d))throw new si(ai.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");dd(h,d)||h.push(d)}s=new Oi(h),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new Kf(new ro(c),s,u)}var Yf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.xc)throw 1===t.xc?t.Bc(this._methodName+"() can only appear at the top level of your update data"):t.Bc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(jf);function Jf(t,e,n){return new zf({xc:3,Uc:e.settings.Uc,methodName:t._methodName,Oc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var $f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._toFieldTransform=function(t){return new oa(t.path,new Jo)},e.prototype.isEqual=function(t){return t instanceof e},e}(jf),Zf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return r(e,t),e.prototype._toFieldTransform=function(t){var e=Jf(this,t,!0),n=this.Kc.map((function(t){return od(t,e)})),r=new $o(n);return new oa(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(jf),td=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return r(e,t),e.prototype._toFieldTransform=function(t){var e=Jf(this,t,!0),n=this.Kc.map((function(t){return od(t,e)})),r=new ta(n);return new oa(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(jf),ed=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return r(e,t),e.prototype._toFieldTransform=function(t){var e=new na(t.R,zo(t.R,this.jc));return new oa(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(jf);function nd(t,e,n,r){var i=t.Qc(1,e,n);ud("Data must be an object, but it was:",i,r);var o=[],a=ro.empty();_i(r,(function(t,r){var s=ld(e,t,n);r=T(r);var u=i.Mc(s);if(r instanceof Yf)o.push(s);else{var c=od(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new Oi(o);return new Gf(a,s,i.fieldTransforms)}function rd(t,e,n,r,i,o){var a=t.Qc(1,e,n),s=[cd(e,r,n)],u=[i];if(o.length%2!=0)throw new si(ai.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(cd(e,o[c])),u.push(o[c+1]);for(var h=[],l=ro.empty(),f=s.length-1;f>=0;--f)if(!dd(h,s[f])){var d=s[f],p=u[f];p=T(p);var v=a.Mc(d);if(p instanceof Yf)h.push(d);else{var m=od(p,v);null!=m&&(h.push(d),l.set(d,m))}}var y=new Oi(h);return new Gf(l,y,a.fieldTransforms)}function id(t,e,n,r){return void 0===r&&(r=!1),od(n,t.Qc(r?4:3,e))}function od(t,e){if(sd(t=T(t)))return ud("Unsupported field value:",e,t),ad(t,e);if(t instanceof jf)return function(t,e){if(!Hf(e.xc))throw e.Bc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Bc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Oc&&4!==e.xc)throw e.Bc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=od(o[i],e.Lc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=T(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return zo(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ei.fromDate(t);return{timestampValue:ts(e.R,n)}}if(t instanceof Ei)return n=new Ei(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ts(e.R,n)};if(t instanceof qf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vf)return{bytesValue:es(e.R,t._byteString)};if(t instanceof Sf){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Bc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:is(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Bc("Unsupported field value: "+bf(t))}(t,e)}function ad(t,e){var n={};return Ai(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_i(t,(function(t,r){var i=od(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function sd(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ei||t instanceof qf||t instanceof Vf||t instanceof Sf||t instanceof jf)}function ud(t,e,n){if(!sd(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=bf(n);throw"an object"===r?e.Bc(t+" a custom object"):e.Bc(t+" "+r)}}function cd(t,e,n){if((e=T(e))instanceof Uf)return e._internalPath;if("string"==typeof e)return ld(t,e);throw fd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var hd=new RegExp("[~\\*/\\[\\]]");function ld(t,e,n){if(e.search(hd)>=0)throw fd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Uf.bind.apply(Uf,c([void 0],e.split(".")))))._internalPath}catch(r){throw fd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function fd(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new si(ai.INVALID_ARGUMENT,(s+=". ")+t+u)}function dd(t,e){return t.some((function(t){return t.isEqual(e)}))}var pd=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Sf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new vd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(md("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),vd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(pd);function md(t,e){return"string"==typeof e?ld(t,e):e instanceof Uf?e._internalPath:e._delegate._internalPath}var yd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),gd=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return r(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(md("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(pd),bd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(gd),wd=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new yd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new bd(n._firestore,n._userDataWriter,r.key,r,new yd(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new si(ai.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new bd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new yd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new bd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new yd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Id(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Id(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pi()}}function Ed(t,e){return t instanceof gd&&e instanceof gd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof wd&&e instanceof wd&&t._firestore===e._firestore&&Cf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Td(t){if(Oo(t)&&0===t.explicitOrderBy.length)throw new si(ai.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Sd=function(){};function _d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Ad=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Wc=e,i.Gc=n,i.zc=r,i.type="where",i}return r(e,t),e.prototype._apply=function(t){var e=Qf(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new si(ai.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){xd(a,o);for(var u=[],c=0,h=a;c<h.length;c++){var l=h[c];u.push(Rd(r,t,l))}s={arrayValue:{values:u}}}else s=Rd(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||xd(a,o),s=id(n,"where",a,"in"===o||"not-in"===o);var f=lo.create(i,o,s);return function(t,e){if(e.g()){var n=xo(t);if(null!==n&&!n.isEqual(e.field))throw new si(ai.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Ro(t);null!==r&&Pd(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new si(ai.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new si(ai.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.Wc,this.Gc,this.zc);return new _f(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Sd),Nd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wc=e,r.Hc=n,r.type="orderBy",r}return r(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new si(ai.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new si(ai.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new To(e,n);return function(t,e){if(null===Ro(t)){var n=xo(t);null!==n&&Pd(0,n,e.field)}}(t,r),r}(t._query,this.Wc,this.Hc);return new _f(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new No(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Sd),kd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return r(e,t),e.prototype._apply=function(t){return new _f(t.firestore,t.converter,Fo(t._query,this.Jc,this.Yc))},e}(Sd),Dd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return r(e,t),e.prototype._apply=function(t){var e=Od(t,this.type,this.Xc,this.Zc);return new _f(t.firestore,t.converter,function(t,e){return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Sd),Cd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return r(e,t),e.prototype._apply=function(t){var e=Od(t,this.type,this.Xc,this.Zc);return new _f(t.firestore,t.converter,function(t,e){return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Sd);function Od(t,e,n,r){if(n[0]=T(n[0]),n[0]instanceof pd)return function(t,e,n,r,i){if(!r)throw new si(ai.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Lo(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Ji(e,r.key));else{var c=r.data.field(u.field);if(Fi(c))throw new si(ai.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new si(ai.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Io(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Qf(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new si(ai.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new si(ai.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Po(t)&&-1!==c.indexOf("/"))throw new si(ai.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(ki.fromString(c));if(!Ki.isDocumentKey(h))throw new si(ai.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Ki(h);s.push(Ji(e,l))}else{var f=id(n,r,c);s.push(f)}}return new Io(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Rd(t,e,n){if("string"==typeof(n=T(n))){if(""===n)throw new si(ai.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Po(e)&&-1!==n.indexOf("/"))throw new si(ai.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(ki.fromString(n));if(!Ki.isDocumentKey(r))throw new si(ai.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ji(t,new Ki(r))}if(n instanceof Sf)return Ji(t,n._key);throw new si(ai.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+bf(n)+".")}function xd(t,e){if(!Array.isArray(t)||0===t.length)throw new si(ai.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new si(ai.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Pd(t,e,n){if(!n.isEqual(e))throw new si(ai.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Ld=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Gi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Li(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Mi(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw pi()}},t.prototype.convertObject=function(t,e){var n=this,r={};return _i(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new qf(Li(t.latitude),Li(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Ui(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Vi(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Pi(t);return new Ei(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=ki.fromString(t);vi(Ds(n));var r=new af(n.get(1),n.get(3)),i=new Ki(n.popFirst(5));return r.isEqual(e)||li("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Md(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Fd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return r(e,t),e.prototype.convertBytes=function(t){return new Vf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Sf(this.firestore,null,e)},e}(Ld),Ud=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Qf(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Vd(t,this._firestore),i=Md(r.converter,e,n),o=Xf(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,sa.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=Vd(t,this._firestore);return o="string"==typeof(e=T(e))||e instanceof Uf?rd(this._dataReader,"WriteBatch.update",a._key,e,n,r):nd(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,sa.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Vd(t,this._firestore);return this._mutations=this._mutations.concat(new Ea(e._key,sa.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new si(ai.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Vd(t,e){if((t=T(t)).firestore!==e)throw new si(ai.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var jd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return r(e,t),e.prototype.convertBytes=function(t){return new Vf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Sf(this.firestore,null,e)},e}(Ld);function qd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=wf(t,Sf);var o=wf(t.firestore,xf),a=Qf(o);return Kd(o,[("string"==typeof(e=T(e))||e instanceof Uf?rd(a,"updateDoc",t._key,e,n,r):nd(a,"updateDoc",t._key,e)).toMutation(t._key,sa.exists(!0))])}function Bd(t){for(var e,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];t=T(t);var u={includeMetadataChanges:!1},c=0;"object"!=typeof i[c]||Rf(i[c])||(u=i[c],c++);var h,l,f,d={includeMetadataChanges:u.includeMetadataChanges};if(Rf(i[c])){var p=i[c];i[c]=null===(e=p.next)||void 0===e?void 0:e.bind(p),i[c+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),i[c+2]=null===(r=p.complete)||void 0===r?void 0:r.bind(p)}if(t instanceof Sf)l=wf(t.firestore,xf),f=Do(t._key.path),h={next:function(e){i[c]&&i[c](Gd(l,t,e))},error:i[c+1],complete:i[c+2]};else{var v=wf(t,_f);l=wf(v.firestore,xf),f=v._query;var m=new jd(l);h={next:function(t){i[c]&&i[c](new wd(l,m,v,t))},error:i[c+1],complete:i[c+2]},Td(t._query)}return function(t,e,n,r){var i=this,s=new Kl(r),u=new Zh(e,s,n);return t.asyncQueue.enqueueAndForget((function(){return o(i,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return e=Qh,[4,ef(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))})),function(){s.Wo(),t.asyncQueue.enqueueAndForget((function(){return o(i,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return e=Xh,[4,ef(t)];case 1:return[2,e.apply(void 0,[n.sent(),u])]}}))}))}))}}(Pf(l),f,d,h)}function Kd(t,e){return function(t,e){var n=this,r=new Zs;return t.asyncQueue.enqueueAndForget((function(){return o(n,void 0,void 0,(function(){var n;return a(this,(function(i){switch(i.label){case 0:return n=ll,[4,tf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Pf(t),e)}function Gd(t,e,n){var r=n.docs.get(e._key),i=new jd(t);return new gd(t,i,e._key,r,new yd(n.hasPendingWrites,n.fromCache),e.converter)}var Hd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return r(e,t),e.prototype.get=function(e){var n=this,r=Vd(e,this._firestore),i=new jd(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new gd(n._firestore,i,r._key,t._document,new yd(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Qf(t)}return t.prototype.get=function(t){var e=this,n=Vd(t,this._firestore),r=new Fd(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return pi();var i=t[0];if(i.isFoundDocument())return new pd(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new pd(e._firestore,r,n._key,null,n.converter);throw pi()}))},t.prototype.set=function(t,e,n){var r=Vd(t,this._firestore),i=Md(r.converter,e,n),o=Xf(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=Vd(t,this._firestore);return o="string"==typeof(e=T(e))||e instanceof Uf?rd(this._dataReader,"Transaction.update",a._key,e,n,r):nd(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=Vd(t,this._firestore);return this._transaction.delete(e._key),this},t}());function zd(){if("undefined"==typeof Uint8Array)throw new si(ai.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Wd(){if("undefined"==typeof atob)throw new si(ai.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Qd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Wd(),new t(Vf.fromBase64String(e))},t.fromUint8Array=function(e){return zd(),new t(Vf.fromUint8Array(e))},t.prototype.toBase64=function(){return Wd(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return zd(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Xd=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Ff(t=wf(t,xf));var n=Pf(t),r=t._freezeSettings(),i=new Bl;return Mf(n,i,new jl(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Ff(t=wf(t,xf));var e=Pf(t),n=t._freezeSettings(),r=new Bl;return Mf(e,r,new ql(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new si(ai.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Zs;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return o(e,void 0,void 0,(function(){var e;return a(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return o(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return nu.yt()?(e=t+"main",[4,nu.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(dc(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Yd=function(){function t(t,e,n){var r=this;this._delegate=e,this.ta=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof af||(this.ea=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var o=(t=wf(t,Tf))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&fi("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var a=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n="demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=i({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[h.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),h.encodeString(JSON.stringify(a),!1),""].join(".")}(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new si(ai.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new hf(new uf(a,new Gc(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return o(e,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return[4,Jl(t)];case 1:return e=r.sent(),[4,Zl(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=mi(t);return e.$r.delete(0),mh(e)}(n))]}}))}))}))}(Pf(wf(this._delegate,xf)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return o(e,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return[4,Jl(t)];case 1:return e=r.sent(),[4,Zl(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return o(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return(e=mi(t)).$r.add(0),[4,yh(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Pf(wf(this._delegate,xf)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&mf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.ta.enableMultiTabIndexedDbPersistence(this):this.ta.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.ta.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.ea&&(this.ea._removeServiceInstance("firestore"),this.ea._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Zs;return t.asyncQueue.enqueueAndForget((function(){return o(e,void 0,void 0,(function(){var e;return a(this,(function(r){switch(r.label){case 0:return e=yl,[4,tf(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Pf(wf(this._delegate,xf)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Kl(e);return t.asyncQueue.enqueueAndForget((function(){return o(n,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return e=function(t,e){mi(t).Gr.add(e),e.next()},[4,ef(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return o(n,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return e=function(t,e){mi(t).Gr.delete(e)},[4,ef(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Pf(t=wf(t,xf)),Rf(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.ea)throw new si(ai.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.ea},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new hp(this,Nf(this._delegate,t))}catch(t){throw np(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new ep(this,kf(this._delegate,t))}catch(t){throw np(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new sp(this,function(t,e){if(t=wf(t,Tf),pf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new si(ai.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new _f(t,null,function(t){return new No(ki.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw np(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Zs;return t.asyncQueue.enqueueAndForget((function(){return o(n,void 0,void 0,(function(){var n;return a(this,(function(i){switch(i.label){case 0:return[4,function(t){return Yl(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new Hl(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Pf(t),(function(n){return e(new Hd(t,n))}))}(this._delegate,(function(n){return t(new $d(e,n))}))},t.prototype.batch=function(){var t=this;return Pf(this._delegate),new Zd(new Ud(this._delegate,(function(e){return Kd(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new si(ai.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new si(ai.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Jd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return r(e,t),e.prototype.convertBytes=function(t){return new Qd(new Vf(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return ep.na(e,this.firestore,null)},e}(Ld),$d=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Jd(t)}return t.prototype.get=function(t){var e=this,n=lp(t);return this._delegate.get(n).then((function(t){return new op(e._firestore,new gd(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=lp(t);return n?(vf("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=lp(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,c([a,e,n],i)),this},t.prototype.delete=function(t){var e=lp(t);return this._delegate.delete(e),this},t}(),Zd=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=lp(t);return n?(vf("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=lp(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,c([a,e,n],i)),this},t.prototype.delete=function(t){var e=lp(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),tp=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new bd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new ap(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.sa=function(e,n){var r=t.ia,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Jd(e),n),i.set(n,o)),o},t}();tp.ia=new WeakMap;var ep=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Jd(t)}return t.ra=function(e,n,r){if(e.length%2!=0)throw new si(ai.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Sf(n._delegate,r,new Ki(e)))},t.na=function(e,n,r){return new t(n,new Sf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new hp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new hp(this.firestore,Nf(this._delegate,t))}catch(t){throw np(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=T(t))instanceof Sf&&Df(this._delegate,t)},t.prototype.set=function(t,e){e=vf("DocumentReference.set",e);try{return function(t,e,n){t=wf(t,Sf);var r=wf(t.firestore,xf),i=Md(t.converter,e,n);return Kd(r,[Xf(Qf(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,sa.none())])}(this._delegate,t,e)}catch(t){throw np(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?qd(this._delegate,t):qd.apply(void 0,c([this._delegate,t,e],n))}catch(t){throw np(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Kd(wf((t=this._delegate).firestore,xf),[new Ea(t._key,sa.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=rp(e),i=ip(e,(function(e){return new op(t.firestore,new gd(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return Bd(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=wf(t,Sf);var e=wf(t.firestore,xf),n=Pf(e),r=new jd(e);return function(t,e){var n=this,r=new Zs;return t.asyncQueue.enqueueAndForget((function(){return o(n,void 0,void 0,(function(){var n;return a(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return o(this,void 0,void 0,(function(){var r,i;return a(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=mi(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new si(ai.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Bh(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,$l(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new gd(e,r,t._key,n,new yd(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=wf(t,Sf);var e=wf(t.firestore,xf);return nf(Pf(e),t._key,{source:"server"}).then((function(n){return Gd(e,t,n)}))}(this._delegate):function(t){t=wf(t,Sf);var e=wf(t.firestore,xf);return nf(Pf(e),t._key).then((function(n){return Gd(e,t,n)}))}(this._delegate)).then((function(t){return new op(e.firestore,new gd(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(tp.sa(this.firestore,e)):this._delegate.withConverter(null))},t}();function np(t,e,n){return t.message=t.message.replace(e,n),t}function rp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Rf(r))return r}return{}}function ip(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Rf(t[0])?t[0]:Rf(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var op=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new ep(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Ed(this._delegate,t._delegate)},t}(),ap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(op),sp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Jd(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,_d(this._delegate,function(t,e,n){var r=e,i=md("where",t);return new Ad(i,r,n)}(e,n,r)))}catch(e){throw np(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,_d(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=md("orderBy",t);return new Nd(r,n)}(e,n)))}catch(e){throw np(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,_d(this._delegate,function(t){return If("limit",t),new kd("limit",t,"F")}(e)))}catch(e){throw np(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,_d(this._delegate,function(t){return If("limitToLast",t),new kd("limitToLast",t,"L")}(e)))}catch(e){throw np(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,_d(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Dd("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw np(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,_d(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Dd("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw np(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,_d(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cd("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw np(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,_d(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cd("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw np(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Cf(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=wf(t,_f);var e=wf(t.firestore,xf),n=Pf(e),r=new jd(e);return function(t,e){var n=this,r=new Zs;return t.asyncQueue.enqueueAndForget((function(){return o(n,void 0,void 0,(function(){var n;return a(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return o(this,void 0,void 0,(function(){var r,i,o,s,u;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,kc(t,e,!0)];case 1:return u=a.sent(),r=new il(e,u.Bn),i=r._o(u.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=Bh(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,$l(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new wd(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=wf(t,_f);var e=wf(t.firestore,xf),n=Pf(e),r=new jd(e);return rf(n,t._query,{source:"server"}).then((function(n){return new wd(e,r,t,n)}))}(this._delegate):function(t){t=wf(t,_f);var e=wf(t.firestore,xf),n=Pf(e),r=new jd(e);return Td(t._query),rf(n,t._query).then((function(n){return new wd(e,r,t,n)}))}(this._delegate)).then((function(t){return new cp(e.firestore,new wd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=rp(e),i=ip(e,(function(e){return new cp(t.firestore,new wd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Bd(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(tp.sa(this.firestore,e)):this._delegate.withConverter(null))},t}(),up=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new ap(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),cp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new sp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new ap(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new up(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new ap(n._firestore,r))}))},t.prototype.isEqual=function(t){return Ed(this._delegate,t._delegate)},t}(),hp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return r(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new ep(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new ep(this.firestore,void 0===t?kf(this._delegate):kf(this._delegate,t))}catch(t){throw np(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=wf(t.firestore,xf),r=kf(t),i=Md(t.converter,e);return Kd(n,[Xf(Qf(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,sa.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new ep(e.firestore,t)}))},e.prototype.isEqual=function(t){return Df(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(tp.sa(this.firestore,t)):this._delegate.withConverter(null))},e}(sp);function lp(t){return wf(t,Sf)}var fp,dp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Uf.bind.apply(Uf,c([void 0],t)))}return t.documentId=function(){return new t(Ci.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=T(t))instanceof Uf&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),pp=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new $f("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Yf("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Zf("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new td("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new ed("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),vp={Firestore:Yd,GeoPoint:qf,Timestamp:Ei,Blob:Qd,Transaction:$d,WriteBatch:Zd,DocumentReference:ep,DocumentSnapshot:op,Query:sp,QueryDocumentSnapshot:ap,QuerySnapshot:cp,CollectionReference:hp,FieldPath:dp,FieldValue:pp,setLogLevel:function(t){var e;e=t,ui.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new _("firestore",(function(t){return function(t,e){return new Yd(t,new xf(t,e),new Xd)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},vp)))})(fp=$),fp.registerVersion("@firebase/firestore","2.3.1");const mp=$.initializeApp(t),yp=t.apiKey,gp=($.auth,$.firestore());var bp=n(669),wp=n.n(bp);const Ip="CourseRollCall",Ep=document.querySelector("#studentListLoader"),Tp=document.querySelector("#functionButtons"),Sp=document.querySelector("#studentList"),_p=document.querySelector("#rollCallTimeOut"),Ap=document.querySelector("#lastRollCallTimeArea"),Np=document.querySelector("#lastRollCallTime");document.querySelector("#courseName").innerText=window.sessionStorage.getItem("courseName");const kp=document.querySelector("#courseStart"),Dp=window.sessionStorage.getItem("courseId");let Cp=null,Op=["studentId"];function Rp(t){return t<10?"0"+t:t}function xp(t){return{1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"日"}[t]}!function(t){const e=gp.collection("CourseRollCall").doc(t);let n=null,r=null;e.get().then((t=>{t.exists?(n=t.data().state,r=t.data().lastRollCall):n=!1,window.dispatchEvent(new CustomEvent("getState",{detail:{state:n,lastRollCall:r}}))}))}(Dp),window.addEventListener("getState",(t=>{if(Cp=t.detail.lastRollCall,Cp){const t=new Date(Cp),e=Rp(t.getMonth()+1)+"/"+Rp(t.getDate())+" ("+xp(t.getDay())+") "+Rp(t.getHours())+":"+Rp(t.getMinutes());Np.innerText=e}else Np.innerText="尚未點過名"})),window.sessionStorage.getItem("token")||(alert("請務必要從首頁登入！"),window.location.replace("./index.html")),window.sessionStorage.getItem("courseName")||window.location.replace("./classlist.html"),mp.auth().onAuthStateChanged((t=>{t||(alert("請重新登入"),window.location.replace("./index.html")),console.log(t.displayName+" in the course "+window.sessionStorage.getItem("courseName")),wp()({url:"https://classroom.googleapis.com/v1/courses/"+window.sessionStorage.getItem("courseId")+"/students?key="+yp,headers:{Authorization:"Bearer "+window.sessionStorage.getItem("token"),Accept:"application/json"}}).then((function(t){if(Tp.style.display="flex",!t.data.students)return Ep.style.display="none",kp.classList.add("disabled"),void Sp.appendChild(function(){const t=document.createElement("div");t.className="col d-grid p-1 text-center mx-auto",t.style.marginTop="7vh",t.setAttribute("data-aos","zoom-in-up"),t.setAttribute("data-aos-once","true");const e=document.createElement("a");return e.className="fs-3 fw-bold",e.href="./classlist.html",e.innerText="沒有學生在課程中",t.appendChild(e),t}());Sp.dispatchEvent(new CustomEvent("getList",{detail:{students:t.data.students}}))})).catch((function(t){console.log(t),alert("出現了一點問題，請試著重新登入"),window.location.replace("./index.html")}))})),Sp.addEventListener("getList",(t=>{Ep.style.display="none",Ap.style.display="block",t.detail.students.sort((function(t,e){return t.profile.name.familyName-e.profile.name.familyName})),t.detail.students.forEach((t=>{Sp.appendChild(function(t,e,n){const r=document.createElement("div");r.className="col d-grid p-2",r.setAttribute("data-aos","fade-down"),r.setAttribute("data-aos-once","true");const i=document.createElement("div");i.className="border border-0 rounded p-2 shadow";const o=document.createElement("span");o.id=t,o.setAttribute("email-data",n),o.innerHTML=e+"&nbsp;&nbsp;",o.className="fs-4 text-wrap d-inline-block",i.appendChild(o);const a=document.createElement("span");return a.id="badge-"+t,a.className="student",i.appendChild(a),r.appendChild(i),r}(t.userId,t.profile.name.fullName,t.profile.emailAddress))}))})),Sp.addEventListener("getRollCall",(t=>{t.detail.doc;const e=t.detail.docProperty.filter((t=>!Op.includes(t)));console.log(e),e.forEach((t=>{const e="#badge-"+t,n=document.querySelector(e);n&&(n.classList.replace("bg-danger","bg-success"),n.innerText="點名成功")})),Op.push(...e),console.log(Op)})),_p.addEventListener("input",(function(t){""===t.target.value?t.target.value=0:"0"===t.target.value[0]&&(t.target.value=t.target.value[1]),/^[0-9]*$/.exec(t.target.value)||(alert("請規定整數時間喔～"),t.target.value=t.target.value.slice(0,-1))})),kp.addEventListener("click",(function(){const t=window.sessionStorage.getItem("courseId");{if("0"===_p.value)return void alert("時間不能為 0 喔～");const e=new Date,n=e.getTime(),r=Rp(e.getMonth()+1)+"/"+Rp(e.getDate())+"("+xp(e.getDay())+")",i=Rp(e.getHours())+" : "+Rp(e.getMinutes());if(confirm(["現在時間",r+"  "+i,"是否確認要進行【上課】點名？"].join("\n"))){const r="./roll-call-link.html?"+function(t=!0,e){let n=null;return n=t?"start":"end",[window.sessionStorage.getItem("courseId"),e,n].join("-")}(!0,n);!function(t,e){gp.collection(Ip).doc(t).set({lastRollCall:e},{merge:!0})}(t,n),function(t,e,n=10){const r=e+60*n*1e3,i=gp.collection(Ip).doc(t).collection(String(e));i.doc("info").set({timeout:r}),i.doc("rollCall").set({studentId:"studentClassRoomId"})}(window.sessionStorage.getItem("courseId"),n,parseInt(_p.value)),window.open(r,"_blank"),Array.from(document.querySelectorAll(".student")).forEach((t=>{t.className="badge bg-danger",t.innerText="尚未點名"})),function(t,e){gp.collection("CourseRollCall").doc(t).collection(String(e)).doc("rollCall").onSnapshot((t=>{Sp.dispatchEvent(new CustomEvent("getRollCall",{detail:{doc:t.data(),docProperty:Object.getOwnPropertyNames(t.data())}}))}))}(t,n);const i=Rp(e.getMonth()+1)+"/"+Rp(e.getDate())+" ("+xp(e.getDay())+") "+Rp(e.getHours())+":"+Rp(e.getMinutes());Np.innerText=i,alert(["【提醒老師】","在點名期間請不要「關閉」或「重新整理」這個網頁喔！"].join("\n"))}}}))})()})();